window.__require=function e(t,n,a){function r(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return r(t[i][1][e]||e)},u,u.exports,e,t,n,a)}return n[i].exports}for(var o="function"==typeof __require&&__require,i=0;i<a.length;i++)r(a[i]);return r}({AlertView:[function(e,t){"use strict";cc._RF.push(t,"f728bYNFEZGxpE0Z85NpgJi","AlertView");var n=a(e("SharedFunction"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("SharedData")),cc.Class({extends:cc.Component,properties:{mCallBack:null,mBackground:{default:null,type:cc.Node},mAlertContainer:{default:null,type:cc.Node},mAlertTitle:{default:null,type:cc.Node},mAlertDescription:{default:null,type:cc.Node},mAlertButton:{default:null,type:cc.Node},mAlertCloseButton:{default:null,type:cc.Node},mText:""},onLoad:function(){this.mAlertButton&&this.mAlertButton.on(cc.Node.EventType.TOUCH_END,this.onButtonClicked,this)},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground&&(this.mBackground.width=n,this.mBackground.height=a)},setText:function(e){if(void 0===e&&(e=""),this.mText=e,this.mAlertDescription){var t=this.mAlertDescription.getComponent(cc.Label);t&&(t.string=e)}},setTitle:function(e){if(void 0===e&&(e=""),this.mAlertTitle){var t=this.mAlertTitle.getComponent(cc.Label);t&&(t.string=e)}},onButtonClicked:function(){n.default.playButtonClickSound(),this.mCallBack&&"function"==typeof this.mCallBack&&this.mCallBack(),this.node&&this.node.parent&&this.node.parent.removeChild(this.node)},onCloseButtonClicked:function(){n.default.playButtonClickSound(),this.node&&this.node.parent&&this.node.parent.removeChild(this.node)},setCallback:function(e){this.mCallBack=e},show:function(){this.node&&(this.node.active=!0)},hide:function(){this.node&&(this.node.active=!1)},onDestroy:function(){this.mAlertButton&&this.mAlertButton.off(cc.Node.EventType.TOUCH_END,this.onButtonClicked,this)}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],AnnounceItem:[function(e,t){"use strict";cc._RF.push(t,"d125csUoYpPUp0l57JeUSkG","AnnounceItem");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n},r=e("SharedData");cc.Class({extends:cc.Component,properties:{background:{default:null,type:cc.Node},announcement_date:{default:null,type:cc.Node},announcement_title:{default:null,type:cc.Node},mCallBack:null,mData:null},onLoad:function(){this.background?this.background.on(cc.Node.EventType.TOUCH_END,this.onItemClicked,this):this.node.on(cc.Node.EventType.TOUCH_END,this.onItemClicked,this)},onDestroy:function(){this.background?this.background.off(cc.Node.EventType.TOUCH_END,this.onItemClicked,this):this.node.off(cc.Node.EventType.TOUCH_END,this.onItemClicked,this)},init:function(e,t){this.mData=e,this.mCallBack=t;var n=r.getCurrentLanguage();if(this.announcement_date&&e.startDate){var a=this.announcement_date.getComponent(cc.Label);if(a){var o=new Date(e.startDate),i=this.formatDate(o);a.string=i}}if(this.announcement_title&&e.title){var c=this.announcement_title.getComponent(cc.Label);if(c){var s="";"object"==typeof e.title&&e.title[n]?s=e.title[n]:"string"==typeof e.title&&(s=e.title);var l=s.replace(/<[^>]+>/g,"").trim();c.string=l}}},formatDate:function(e){return!e||isNaN(e.getTime())?"":e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+" "+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")},onItemClicked:function(){a.default.playButtonClickSound(),this.mCallBack&&"function"==typeof this.mCallBack.onAnnouncementItemClicked&&this.mCallBack.onAnnouncementItemClicked(this.mData)},getData:function(){return this.mData}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],AnnouncementDetail:[function(e,t){"use strict";cc._RF.push(t,"a234cb15-b28b-4g63-0e36-f8c36f623a17","AnnouncementDetail");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n},r=e("SharedData");cc.Class({extends:cc.Component,properties:{background:{default:null,type:cc.Node},announcement_date:{default:null,type:cc.Node},announcement_title:{default:null,type:cc.Node},accouncement_description:{default:null,type:cc.Node},accountment_image:{default:null,type:cc.Node},accountment_image2:{default:null,type:cc.Node},Collapse_Button:{default:null,type:cc.Node},mCallBack:null,mData:null},onLoad:function(){this.Collapse_Button&&this.Collapse_Button.on(cc.Node.EventType.TOUCH_END,this.onCollapseButtonClicked,this)},onDestroy:function(){if(this.Collapse_Button&&this.Collapse_Button.off(cc.Node.EventType.TOUCH_END,this.onCollapseButtonClicked,this),this.accountment_image2&&cc.isValid(this.accountment_image2)){var e=this.accountment_image2.getComponent("CCGIF");e&&"function"==typeof e.stop&&e.stop()}},init:function(e,t){var n=this;console.log("init",e),this.mData=e,this.mCallBack=t;var a=r.getCurrentLanguage();if(this.announcement_date&&e.startDate){var o=this.announcement_date.getComponent(cc.Label);if(o){var i=new Date(e.startDate),c=this.formatDate(i);o.string=c}}if(this.announcement_title&&e.title){var s=this.announcement_title.getComponent(cc.Label);if(s){var l="";"object"==typeof e.title&&e.title[a]?l=e.title[a]:"string"==typeof e.title&&(l=e.title);var u=l.replace(/<[^>]+>/g,"").trim();s.string=u}}if(this.accouncement_description&&e.description){var d="";"object"==typeof e.description&&e.description[a]?d=e.description[a]:"string"==typeof e.description&&(d=e.description);var h=this.accouncement_description.getComponent(cc.RichText);if(h){var m=this.node.width-100;h.maxWidth=m,h.string=d.trim()}}else if(this.accouncement_description){var f=this.accouncement_description.getComponent(cc.RichText);f&&(f.string="")}if(this.accountment_image&&e.image){var p=this.accountment_image.getComponent(cc.Sprite);if(p&&e.image){var g="";if("object"==typeof e.image&&e.image[a]?g=e.image[a]:"string"==typeof e.image&&(g=e.image),g)if(g.startsWith("http://")||g.startsWith("https://")){var y="https://api.codetabs.com/v1/proxy?quest="+encodeURIComponent(g);console.log("Loading image via proxy:",y);var v=this;cc.assetManager.loadRemote(y,function(e,t){if(e)return console.error("Failed to load image:",e),void v.scheduleOnce(function(){v.adjustHeight()},.1);if(g.endsWith(".gif")){if(!v.accountment_image2||!cc.isValid(v.accountment_image2))return console.error("accountment_image2 node is invalid"),void v.scheduleOnce(function(){v.adjustHeight()},.1);var n=v.accountment_image2.getComponent("CCGIF");if(!n)return console.error("CCGIF component not found on accountment_image2 node"),void v.scheduleOnce(function(){v.adjustHeight()},.1);if(!cc.isValid(n)||!cc.isValid(v.node))return console.error("GIF component or node is invalid"),void v.scheduleOnce(function(){v.adjustHeight()},.1);v.scheduleOnce(function(){n&&cc.isValid(n)&&v.node&&cc.isValid(v.node)&&v.accountment_image2&&cc.isValid(v.accountment_image2)?(n.processGifData(t),v.scheduleOnce(function(){v.adjustHeight()},.2)):(console.error("Component or node became invalid before processing GIF"),v.scheduleOnce(function(){v.adjustHeight()},.1))},.1)}else{var a=new cc.SpriteFrame(t),r=v.accountment_image.getComponent(cc.Sprite);r&&(r.type=cc.Sprite.Type.SIMPLE,v.accountment_image.getComponent(cc.Sprite).spriteFrame=a,v.fitImageToNode(!1,t.width,t.height),v.scheduleOnce(function(){v.adjustHeight()},.1))}})}else{var b=this;cc.loader.loadRes(g,cc.SpriteFrame,function(e,t){!e&&t?(p.spriteFrame=t,b.scheduleOnce(function(){b.adjustHeight()},.1)):(console.error("Failed to load image from resources:",g,e),b.scheduleOnce(function(){b.adjustHeight()},.1))})}}}else this.scheduleOnce(function(){n.adjustHeight()},.1)},fitImageToNode:function(e,t,n){if(e){if(!this.accountment_image2||!cc.isValid(this.accountment_image2))return void console.error("accountment_image node is invalid")}else if(!this.accountment_image||!cc.isValid(this.accountment_image))return void console.error("accountment_image node is invalid");var a=this.node.width,r=e?this.accountment_image2:this.accountment_image,o=a-100,i=t,c=n;if(i>o||c>450){var s=o/i,l=450/c,u=Math.min(s,l);i*=u,c*=u}r.width=i,r.height=c},adjustHeight:function(){if(this.node&&this.node.isValid&&cc.isValid(this.node)){var e=0;if(this.announcement_date&&cc.isValid(this.announcement_date)){var t=this.announcement_date.getComponent(cc.Label);t&&t.string&&""!==t.string.trim()&&(e=this.announcement_date.height)}var n=0;if(this.announcement_title&&cc.isValid(this.announcement_title)){var a=this.announcement_title.getComponent(cc.Label);a&&a.string&&""!==a.string.trim()&&(n=this.announcement_title.height)}var r=0;if(this.accountment_image&&cc.isValid(this.accountment_image)){var o=this.accountment_image.getComponent(cc.Sprite);o&&o.spriteFrame&&(r=this.accountment_image.height)}0==r&&this.accountment_image2&&cc.isValid(this.accountment_image2)&&(r=this.accountment_image2.height*this.accountment_image2.scale);var i=0;if(this.accouncement_description&&cc.isValid(this.accouncement_description)){var c=this.accouncement_description.getComponent(cc.RichText),s=!1;c&&c.string&&""!==c.string.trim()&&(s=!0),s&&(i=this.accouncement_description.height)}this.announcement_date.y=-30,this.announcement_title.y=-1*(30+e),this.accountment_image.y=-1*(30+e+n+10),this.accouncement_description.y=-1*(30+e+n+10+r+10+10);var l=30+e+n+10+r+10+10+i+30;this.background&&(this.background.height=l,this.background.setContentSize(this.background.width,l));var u=l+16;this.node.height=u,this.node.setContentSize(this.node.width,u);var d=this.node.parent;d&&(d.height=u,d.setContentSize(d.width,u)),this.mCallBack&&"function"==typeof this.mCallBack.onDetailHeightAdjusted&&this.mCallBack.onDetailHeightAdjusted(u)}},formatDate:function(e){return!e||isNaN(e.getTime())?"":e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+" "+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")},onCollapseButtonClicked:function(){a.default.playButtonClickSound(),this.mCallBack&&"function"==typeof this.mCallBack.onCollapseAnnouncementDetail&&this.mCallBack.onCollapseAnnouncementDetail()},getData:function(){return this.mData}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],Announcement:[function(e,t){"use strict";cc._RF.push(t,"2f1c8zT11NHB45v0Yx8gu3V","Announcement");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n},r=e("SharedData");cc.Class({extends:cc.Component,properties:{announcementLabel:{default:null,type:cc.Node},announcementContentView:{default:null,type:cc.Node},announcementView:{default:null,type:cc.Node},announcementScrollView:cc.ScrollView,mCallBack:null},onLoad:function(){},onDestroy:function(){},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a},updateView:function(e,t,n,a){var o=this;this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a;for(var i=r.getAnnouncement(),c="",s=0;s<i.length;s++)c+=" "+i[s].title[r.getCurrentLanguage()];this.announcementLabel.getComponent(cc.Label).string=c.replace(/<[^>]+>/g,"").replace(/\n/g," "),setTimeout(function(){var e=o.announcementLabel.parent.width;o.announcementLabel.x=o.announcementLabel.width>e?0:e;var t=o.calculateDuration(),n=o.announcementLabel.width>e?-o.announcementLabel.width+e:-o.announcementLabel.width;cc.tween(o.announcementLabel).repeatForever(cc.tween().to(t,{position:cc.v2(n,o.announcementLabel.y)}).call(function(){o.announcementLabel.x=o.announcementLabel.width>e?0:e})).start()},500)},calculateDuration:function(){return(this.announcementLabel.parent.width+this.announcementLabel.width)/100},setCallBack:function(e){this.mCallBack=e},onAnnouncementClicked:function(){a.default.playButtonClickSound(),this.mCallBack&&"function"==typeof this.mCallBack.onAnnouncementClicked?this.mCallBack.onAnnouncementClicked():console.error("Callback not set or onAnnouncementClicked method not found in callback object")}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],AuthServices:[function(e,t,n){"use strict";cc._RF.push(t,"0c5dbFAbnlHlp3l7wZP+QbG","AuthServices");var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(c){o=[6,c],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AuthServices=void 0;var o=e("./NetworkService"),i=function(){function e(){}return e.login=function(e,t,n,i){var c,s,l,u;return void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=""),a(this,void 0,Promise,function(){var e,a,i;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e={username:t,password:n},[4,o.NetworkService.post(this.LOGIN_ENDPOINT,e,{headers:{"Content-Type":"application/json"}})];case 1:return[2,{status:(a=r.sent()).status,success:null===(c=a.data)||void 0===c?void 0:c.success,message:(null===(s=a.data)||void 0===s?void 0:s.message)||a.message,token:null===(l=a.data)||void 0===l?void 0:l.token,player:null===(u=a.data)||void 0===u?void 0:u.player,data:a.data}];case 2:throw i=r.sent(),console.error("AuthServices.login error:",i),{status:i.status||500,data:i.data||null,message:i.message||"Login failed",error:i};case 3:return[2]}})})},e.register=function(e){var t,n,i,c;return a(this,void 0,Promise,function(){var a,s,l;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={fullName:e.fullName,username:e.username,password:e.password,phone:e.phone},void 0!==e.email&&null!==e.email&&""!==e.email&&(a.email=e.email),void 0!==e.referralCode&&null!==e.referralCode&&(a.referralCode=e.referralCode),void 0!==e.phoneOtp&&null!==e.phoneOtp&&""!==e.phoneOtp&&(a.phoneOtp=e.phoneOtp),void 0!==e.emailOtp&&null!==e.emailOtp&&""!==e.emailOtp&&(a.emailOtp=e.emailOtp),console.log(a),[4,o.NetworkService.post(this.REGISTER_ENDPOINT,a,{headers:{"Content-Type":"application/json"}})];case 1:return[2,{status:(s=r.sent()).status,success:null===(t=s.data)||void 0===t?void 0:t.success,message:(null===(n=s.data)||void 0===n?void 0:n.message)||s.message,token:null===(i=s.data)||void 0===i?void 0:i.token,player:null===(c=s.data)||void 0===c?void 0:c.player,data:s.data}];case 2:throw l=r.sent(),console.error("AuthServices.register error:",l),{status:l.status||500,data:l.data||null,message:l.message||"Registration failed",error:l};case 3:return[2]}})})},e.sendOtp=function(e){var t,n,i;return a(this,void 0,Promise,function(){var a,c,s;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={identifier:e.identifier,type:e.type,purpose:e.purpose},[4,o.NetworkService.post(this.SEND_OTP_ENDPOINT,a,{headers:{"Content-Type":"application/json"}})];case 1:return[2,{status:(c=r.sent()).status,success:null===(t=c.data)||void 0===t?void 0:t.success,message:(null===(n=c.data)||void 0===n?void 0:n.message)||c.message,expiresIn:null===(i=c.data)||void 0===i?void 0:i.expiresIn,data:c.data}];case 2:throw s=r.sent(),console.error("AuthServices.sendOtp error:",s),{status:s.status||500,data:s.data||null,message:s.message||"Send OTP failed",error:s};case 3:return[2]}})})},e.verifyOtp=function(e){var t,n;return a(this,void 0,Promise,function(){var a,i,c;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={identifier:e.identifier,type:e.type,code:e.code,testOnly:e.testOnly},[4,o.NetworkService.post(this.VERIFY_OTP_ENDPOINT,a,{headers:{"Content-Type":"application/json"}})];case 1:return[2,{status:(i=r.sent()).status,success:null===(t=i.data)||void 0===t?void 0:t.success,message:(null===(n=i.data)||void 0===n?void 0:n.message)||i.message,data:i.data}];case 2:throw c=r.sent(),console.error("AuthServices.verifyOtp error:",c),{status:c.status||500,data:c.data||null,message:c.message||"OTP verification failed",error:c};case 3:return[2]}})})},e.forgotPassword=function(e){var t,n,i,c,s,l;return a(this,void 0,Promise,function(){var a,u,d;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={username:e.username},[4,o.NetworkService.post(this.FORGOT_PASSWORD_ENDPOINT,a,{headers:{"Content-Type":"application/json"}})];case 1:return u=r.sent(),[2,{success:null===(t=u.data)||void 0===t?void 0:t.success,message:(null===(n=u.data)||void 0===n?void 0:n.message)||u.message,type:null===(i=u.data)||void 0===i?void 0:i.type,method:null===(c=u.data)||void 0===c?void 0:c.method,contact:null===(s=u.data)||void 0===s?void 0:s.contact,expiresIn:null===(l=u.data)||void 0===l?void 0:l.expiresIn,data:u.data}];case 2:throw d=r.sent(),console.error("AuthServices.forgotPassword error:",d),{status:d.status||500,data:d.data||null,message:d.message||"Failed to process forgot password request",error:d};case 3:return[2]}})})},e.resetPassword=function(e){var t,n;return a(this,void 0,Promise,function(){var a,i,c;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={username:e.username,otp:e.otp,newPassword:e.newPassword,type:e.type},[4,o.NetworkService.post(this.RESET_PASSWORD_ENDPOINT,a,{headers:{"Content-Type":"application/json"}})];case 1:return[2,{status:(i=r.sent()).status,success:null===(t=i.data)||void 0===t?void 0:t.success,message:(null===(n=i.data)||void 0===n?void 0:n.message)||i.message,data:i.data}];case 2:throw c=r.sent(),console.error("AuthServices.resetPassword error:",c),{status:c.status||500,data:c.data||null,message:c.message||"Failed to reset password",error:c};case 3:return[2]}})})},e.LOGIN_ENDPOINT="/api/public/v1/players/login",e.REGISTER_ENDPOINT="/api/public/v1/players/register",e.SEND_OTP_ENDPOINT="/api/public/v1/verification/send-otp",e.VERIFY_OTP_ENDPOINT="/api/public/v1/verification/verify-otp",e.FORGOT_PASSWORD_ENDPOINT="/api/public/v1/players/forgot-password",e.RESET_PASSWORD_ENDPOINT="/api/public/v1/players/reset-password",e}();n.AuthServices=i,n.default=i,cc._RF.pop()},{"./NetworkService":"NetworkService"}],AvatarList:[function(e,t){"use strict";cc._RF.push(t,"4fcf3Q+o4pIhojY/0U+qXmf","AvatarList");var n=r(e("SharedFunction")),a=r(e("SharedData"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{mCallBack:null,mAvatarList:[],createdAvatars:[],mBackground:{default:null,type:cc.Node},myScrollView:{default:null,type:cc.Node},myScrollContent:{default:null,type:cc.Node},myConfirmBtn:{default:null,type:cc.Node},myAvatarPrefab:{default:null,type:cc.Prefab},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},updateView:function(e){this.localizeUI(),this.mCallBack=e,this.mBackground.active=!0,this.node.opacity=255,this.selectedAvatar=a.default.getSelectedAvatar(),this.drawAvatar();var t=this.mBackground.getChildByName("card_bg");t.setScale(0),cc.tween(t).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setCallBack:function(e){this.mCallBack=e},drawAvatar:function(){for(var e=-130,t=1;t<=10;t++){var n=204*((t%5==0?5:t%5)-1)-409,a=-130-216*(Math.ceil(t/5)-1),r=new cc.instantiate(this.myAvatarPrefab).getComponent("Avatar");r.init(n,a,t,this),e=a,this.myScrollContent.addChild(r.node),this.createdAvatars.push(r)}this.myConfirmBtn.y=e-157,this.myScrollContent.height=-1*(e-157)+47,this.myScrollView.getComponent(cc.ScrollView).scrollToTop(0)},onAvatarDidPressed:function(e){this.selectedAvatar!=e&&(this.createdAvatars[this.selectedAvatar-1].hideBorder(),this.selectedAvatar=e)},onCloseButtonDidPressed:function(e,t,a){var r=this;a||n.default.playButtonClickSound();var o=this.mBackground.getChildByName("card_bg");cc.tween(o).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){r.createdAvatars[r.selectedAvatar-1].hideBorder(),r.createdAvatars.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),r.createdAvatars=[],r.mCallBack&&r.mCallBack.myCloseChangeAvatarDidPressed()}).start()},onConfirmButtonDidPressed:function(){a.default.setSelectedAvatar(this.selectedAvatar),this.onCloseButtonDidPressed()},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title"),this.mConfirmLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirm")},updatePrefabSize:function(){cc.view.getVisibleSize()}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],Avatar:[function(e,t){"use strict";var n;cc._RF.push(t,"0b963BfVctDZ5b1Ieqs9iL5","Avatar"),(n=e("SharedFunction"))&&n.__esModule;var a=e("SharedData");cc.Class({extends:cc.Component,properties:{myBorder:{default:null,type:cc.Node},myAvatarImg:{default:null,type:cc.Node}},onLoad:function(){},init:function(e,t,n,r){this.node.x=e,this.node.y=t,this.imgNumber=n,this.mCallBack=r;var o=this;cc.loader.loadRes("images/profile/Avatar"+(n%10==0?10:n%10)+".png",cc.SpriteFrame,function(e,t){o.myAvatarImg.getComponent(cc.Sprite).spriteFrame=t}),n==a.getSelectedAvatar()&&(this.myBorder.active=!0)},onclick:function(){this.myBorder.active=!0,this.mCallBack.onAvatarDidPressed(this.imgNumber)},hideBorder:function(){this.myBorder.active=!1}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],Banner:[function(e,t){"use strict";cc._RF.push(t,"8eea9J7WABNeLjz902Gn64y","Banner");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n},r=e("SharedData");cc.Class({extends:cc.Component,properties:{announcementScrollView:{default:null,type:cc.ScrollView},announcementContent:{default:null,type:cc.Node},closeButton:{default:null,type:cc.Node},announcementItemPrefab:{default:null,type:cc.Prefab},announcementDetailPrefab:{default:null,type:cc.Prefab},background:{default:null,type:cc.Node},mCallBack:null,createdAnnouncementItems:[],savedAnnouncementItems:[],currentDetailNode:null,i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI(),this.createdAnnouncementItems=[],this.savedAnnouncementItems=[],this.currentDetailNode=null,this.setupBackgroundBlocker()},start:function(){},onDestroy:function(){var e=this.background||this.node;e&&(e.off(cc.Node.EventType.TOUCH_START,this.onBackgroundTouched,this),e.off(cc.Node.EventType.TOUCH_END,this.onBackgroundTouched,this))},init:function(e){if(e&&Array.isArray(e)&&0!==e.length)if(this.announcementsData=e,this.announcementScrollView&&this.announcementContent){this.clearAnnouncementItems();var t=this.filterActiveAnnouncements(e);0!==t.length?(t.sort(function(e,t){return void 0!==e.sequence&&void 0!==t.sequence?e.sequence-t.sequence:e.startDate&&t.startDate?new Date(e.startDate)-new Date(t.startDate):0}),this.createAnnouncementItems(t)):console.log("No active announcements to display")}else console.error("Announcement ScrollView or Content is not set");else console.error("Announcement data array is missing or empty")},filterActiveAnnouncements:function(e){var t=[],n=new Date,a=r.getCurrentLanguage();console.log("filterActiveAnnouncements",e);for(var o=0;o<e.length;o++){var i=e[o];if("active"===i.status||"Active"===i.status){if(i.startDate&&n<new Date(i.startDate))continue;if(i.endDate&&n>new Date(i.endDate))continue;i.title&&("object"!=typeof i.title||i.title[a]&&""!==i.title[a].trim())&&t.push(i)}}return t},createAnnouncementItems:function(e){if(this.announcementItemPrefab){var t=this.announcementScrollView.node.width;0===t&&(t=this.announcementContent.width||1076);for(var n=0,a=0;a<e.length;a++){var r=e[a],o=cc.instantiate(this.announcementItemPrefab),i=o.getComponent("AnnounceItem");i?(o.width=t,o.setPosition(0,-n),n+=125,i.init(r,this),this.announcementContent.addChild(o),this.createdAnnouncementItems.push(o)):(console.error("AnnounceItem component not found on prefab"),o.destroy())}this.announcementContent.width=t-100;var c=n-0;this.announcementContent.height=c>0?c:125,this.announcementScrollView.scrollToTop()}else console.error("AnnouncementItem prefab is not set")},clearAnnouncementItems:function(){for(var e=0;e<this.createdAnnouncementItems.length;e++)this.createdAnnouncementItems[e]&&cc.isValid(this.createdAnnouncementItems[e])&&this.createdAnnouncementItems[e].destroy();this.createdAnnouncementItems=[],this.cleanupDetailNode()},cleanupDetailNode:function(){this.currentDetailNode&&cc.isValid(this.currentDetailNode)&&(this.currentDetailNode.destroy(),this.currentDetailNode=null)},restoreListView:function(){this.createdAnnouncementItems=[];for(var e=0;e<this.savedAnnouncementItems.length;e++)this.savedAnnouncementItems[e]&&cc.isValid(this.savedAnnouncementItems[e])&&(this.savedAnnouncementItems[e].parent!==this.announcementContent&&this.announcementContent.addChild(this.savedAnnouncementItems[e]),this.createdAnnouncementItems.push(this.savedAnnouncementItems[e]));this.savedAnnouncementItems=[],this.updateContentHeight(),this.announcementScrollView.scrollToTop()},removeAnnouncementItemsFromContent:function(){for(var e=0;e<this.createdAnnouncementItems.length;e++)this.createdAnnouncementItems[e]&&cc.isValid(this.createdAnnouncementItems[e])&&this.createdAnnouncementItems[e].removeFromParent(!1)},updateContentHeight:function(){var e=this.announcementScrollView.node.width;0===e&&(e=this.announcementContent.width||1076);for(var t=0,n=0;n<this.createdAnnouncementItems.length;n++){var a=this.createdAnnouncementItems[n];a&&cc.isValid(a)&&(a.width=e,a.setPosition(0,-t),t+=125)}this.announcementContent.width=e-100;var r=t-0;this.announcementContent.height=r>0?r:125},onCloseButtonClicked:function(){a.default.playButtonClickSound(),this.hide()},setupBackgroundBlocker:function(){var e=this.background||this.node;if(e){var t=e.getComponent(cc.BlockInputEvents);t||(t=e.addComponent(cc.BlockInputEvents)),e.on(cc.Node.EventType.TOUCH_START,this.onBackgroundTouched,this),e.on(cc.Node.EventType.TOUCH_END,this.onBackgroundTouched,this)}},onBackgroundTouched:function(e){e.stopPropagation()},show:function(){if(this.localizeUI(),this.node.active=!0,this.enableBackgroundBlocker(!0),this.cleanupDetailNode(),this.savedAnnouncementItems&&this.savedAnnouncementItems.length>0){for(var e=0;e<this.savedAnnouncementItems.length;e++)this.savedAnnouncementItems[e]&&cc.isValid(this.savedAnnouncementItems[e])&&this.savedAnnouncementItems[e].destroy();this.savedAnnouncementItems=[]}var t=r.getAnnouncement();t&&t.length>0&&this.init(t)},hide:function(){this.node.active=!1,this.enableBackgroundBlocker(!1),this.cleanupDetailNode()},enableBackgroundBlocker:function(e){var t=this.background||this.node;if(t){var n=t.getComponent(cc.BlockInputEvents);n&&(n.enabled=e)}},setCallBack:function(e){this.mCallBack=e},onAnnouncementItemClicked:function(e){if(this.announcementDetailPrefab){this.savedAnnouncementItems=[];for(var t=0;t<this.createdAnnouncementItems.length;t++)this.createdAnnouncementItems[t]&&cc.isValid(this.createdAnnouncementItems[t])&&this.savedAnnouncementItems.push(this.createdAnnouncementItems[t]);this.removeAnnouncementItemsFromContent(),this.announcementScrollView.scrollToTop();var n=cc.instantiate(this.announcementDetailPrefab),a=n.getComponent("AnnouncementDetail");if(!a)return console.error("AnnouncementDetail component not found on prefab"),void n.destroy();var r=this.announcementScrollView.node.width;0===r&&(r=this.announcementContent.width||1076),n.width=r,n.setPosition(0,0),this.announcementContent.addChild(n),this.currentDetailNode=n,a.init(e,this),this.announcementContent.width=r,this.announcementContent.height=n.height||600}else console.error("AnnouncementDetail prefab is not set")},onDetailHeightAdjusted:function(e){this.announcementContent&&e&&(this.announcementContent.height=e,this.announcementContent.setContentSize(this.announcementContent.width,e),this.announcementScrollView&&this.announcementScrollView.scrollToTop())},onCollapseAnnouncementDetail:function(){this.cleanupDetailNode(),this.restoreListView()},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"title")}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],CCGIF:[function(e,t,n){"use strict";cc._RF.push(t,"2e2a9uamx1IEpYrgvW7Sbiv","CCGIF");var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=i.requireComponent,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delays=[],t.sp=null,t.frames=[],t.asset=null,t.local="",t.remote="",t._gifData=null,t.scaleFactor=1,t.frameIdx=0,t}return r(t,e),Object.defineProperty(t.prototype,"gifData",{get:function(){return this._gifData},set:function(e){this._gifData=e,e&&this.processGifData(e)},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;if(console.log("start"),this.node&&cc.isValid(this.node))if(this.sp=this.node.getComponent(cc.Sprite),this.sp)if(this.node.active=!1,this.asset){var t=this.asset._nativeAsset;t&&this.do(t)}else this.local?cc.resources.load(this.local,function(t,n){if(console.log("local",t,n),!t&&n){var a=n._nativeAsset;a&&e.do(a)}}):this.remote&&cc.assetManager.loadRemote(this.remote,function(t,n){if(console.log("remote",t,n),!t&&n){var a=n._nativeAsset;a&&e.do(a)}});else console.error("CCGIF: Sprite component not found on node");else console.error("CCGIF: Node is invalid in start()")},t.prototype.do=function(e){var t=this;this.sp&&cc.isValid(this.sp)||(this.node&&cc.isValid(this.node)&&(this.sp=this.node.getComponent(cc.Sprite)),this.sp&&cc.isValid(this.sp))?(this.delays=e.delays.map(function(e){return e/100}),this.frames=e.spriteFrames,this.calculateScaleFactor(e),this.applyScale(),this.play(!0),this.scheduleOnce(function(){t.calculateScaleFactor(e),t.applyScale(),t.play(!0)},0)):console.error("CCGIF: Sprite component not available, cannot load GIF")},t.prototype.calculateScaleFactor=function(e){var t=e.spriteFrames[0],n=t.getOriginalSize().width,a=t.getOriginalSize().height;if(0!==n&&0!==a){var r=this.node.parent?this.node.parent.width:cc.winSize.width,o=this.node.parent?this.node.parent.height:cc.winSize.height;this.scaleFactor=n>r||a>o?Math.min(r/n,o/a):1}else this.scaleFactor=1},t.prototype.applyScale=function(){if(this.sp&&cc.isValid(this.sp)&&this.node&&cc.isValid(this.node)&&0!==this.frames.length){var e=this.frames[0],t=e.getOriginalSize().width,n=e.getOriginalSize().height;this.sp.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.sp.trim=!0,this.node.width=t*this.scaleFactor,this.node.height=n*this.scaleFactor,this.node.scaleX=1,this.node.scaleY=1;var a=this.getComponent(cc.Widget);a&&a.updateAlignment()}},t.prototype.processGifData=function(e){if(console.log("processGifData called:",e),this.node&&cc.isValid(this.node))if(this.sp&&cc.isValid(this.sp)||(this.sp=this.node.getComponent(cc.Sprite),this.sp)){this.stop(),this.frames=[],this.delays=[],this.frameIdx=0;var t=e._nativeAsset;if(t)this.do(t);else if(e.spriteFrames&&e.delays){var n={spriteFrames:e.spriteFrames,delays:e.delays,length:e.length||e.spriteFrames.length};this.do(n)}else e.frames&&e.delays?(n={spriteFrames:e.frames,delays:e.delays,length:e.length||e.frames.length},this.do(n)):console.error("Unknown GIF data format:",e)}else console.error("CCGIF: Sprite component not found, cannot process GIF data");else console.error("CCGIF: Node is invalid, cannot process GIF data")},t.prototype.loadFromUrl=function(e){var t=this;console.log("Loading GIF from URL:",e),this.stop(),this.frames=[],this.delays=[],this.frameIdx=0,cc.assetManager.loadRemote(e,function(e,n){e?console.error("Failed to load GIF:",e):(console.log("GIF loaded successfully:",n),t.processGifData(n))})},t.prototype.play=function(e,t){var n=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.node&&cc.isValid(this.node))if(this.sp&&cc.isValid(this.sp)||(this.sp=this.node.getComponent(cc.Sprite),this.sp&&cc.isValid(this.sp)))if(0!==this.frames.length){if(t||this.stop(),this.frames.length){if(this.frameIdx>=this.frames.length&&(this.frameIdx=0,!e))return void(this.node&&cc.isValid(this.node)&&(this.node.active=!1));if(!(this.node&&cc.isValid(this.node)&&this.sp&&cc.isValid(this.sp)))return void console.warn("Node or sprite became invalid during playback, stopping");this.node.active=!0,this.sp.spriteFrame=this.frames[this.frameIdx],this.scheduleOnce(function(){n.play(e,!0)},this.delays[this.frameIdx]||.1),this.frameIdx++}}else console.warn("No frames to play. Load GIF first.");else console.warn("Sprite component is invalid, stopping GIF playback");else console.warn("Node is invalid, stopping GIF playback")},t.prototype.stop=function(){this.frameIdx=0,this.unscheduleAllCallbacks(),this.node&&cc.isValid(this.node)&&(this.node.active=!1)},t.prototype.isPlaying=function(){return this.frameIdx>0},t.prototype.pause=function(){this.unscheduleAllCallbacks()},t.prototype.resume=function(){this.node&&cc.isValid(this.node)&&this.sp&&cc.isValid(this.sp)?this.frames.length>0&&this.frameIdx<this.frames.length&&this.play(!0,!0):console.warn("Cannot resume: node or sprite is invalid")},t.prototype.onDisable=function(){this.stop()},t.prototype.onDestroy=function(){this.stop()},t.prototype.getFrameCount=function(){return this.frames.length},o([s(cc.Asset)],t.prototype,"asset",void 0),o([s],t.prototype,"local",void 0),o([s],t.prototype,"remote",void 0),o([s],t.prototype,"gifData",null),o([c,l(cc.Sprite)],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],CalendarManager:[function(e,t){"use strict";cc._RF.push(t,"d0776k7wvBJTrRS0YyA+BjM","CalendarManager"),cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,currentMonthLabel:cc.Label,prevButton:cc.Button,nextButton:cc.Button,daysGrid:cc.Node,selectedDateLabel:cc.Label,confirmButton:cc.Button,cancelButton:cc.Button,dayCellPrefab:cc.Prefab,weekDays:{default:[],type:cc.Label},normalDayColor:cc.Color.WHITE,weekendColor:cc.Color.RED,todayColor:cc.Color.GREEN,selectedColor:cc.Color.BLUE,otherMonthColor:cc.Color.GRAY},onLoad:function(){this.currentDate=new Date,this.selectedDate=null,this.today=new Date,this.initWeekDays(),this.updateCalendar(),this.setupEventListeners()},initWeekDays:function(){for(var e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=0;t<this.weekDays.length;t++)this.weekDays[t].string=e[t]},setupEventListeners:function(){this.prevButton.node.on("click",this.onPrevMonth,this),this.nextButton.node.on("click",this.onNextMonth,this),this.confirmButton.node.on("click",this.onConfirm,this),this.cancelButton.node.on("click",this.onCancel,this)},updateCalendar:function(){var e=this;this.daysGrid.removeAllChildren(),this.updateMonthLabel();for(var t=this.currentDate.getFullYear(),n=this.currentDate.getMonth(),a=new Date(t,n,1),r=new Date(t,n+1,0).getDate(),o=a.getDay(),i=1,c=function(a){var c=cc.instantiate(e.dayCellPrefab),s=c.getComponentInChildren(cc.Label),l=c.getComponent(cc.Button);if(a>=o&&i<=r){s.string=i.toString();var u=new Date(t,n,i);e.styleDayCell(c,u,i),l.node.on("click",function(){e.onDaySelected(u,c)}),i++}else if(a<o){var d=new Date(t,n,0).getDate()-o+a+1;s.string=d.toString(),s.node.color=e.otherMonthColor,l.interactable=!1}else{var h=a-o-r+1;s.string=h.toString(),s.node.color=e.otherMonthColor,l.interactable=!1}e.daysGrid.addChild(c)},s=0;s<42;s++)c(s)},styleDayCell:function(e,t){var n=e.getComponentInChildren(cc.Label),a=e.getComponent(cc.Button);n.node.color=this.normalDayColor,a.node.color=cc.Color.WHITE;var r=t.getDay();0!==r&&6!==r||(n.node.color=this.weekendColor),this.isSameDay(t,this.today)&&(a.node.color=this.todayColor),this.selectedDate&&this.isSameDay(t,this.selectedDate)&&(a.node.color=this.selectedColor)},isSameDay:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},updateMonthLabel:function(){var e=this.currentDate.getFullYear(),t=["January","February","March","April","May","June","July","August","September","October","November","December"][this.currentDate.getMonth()];this.currentMonthLabel.string=t+" "+e},onPrevMonth:function(){this.currentDate.setMonth(this.currentDate.getMonth()-1),this.updateCalendar()},onNextMonth:function(){this.currentDate.setMonth(this.currentDate.getMonth()+1),this.updateCalendar()},onDaySelected:function(e){this.selectedDate=e,this.updateCalendar();var t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();this.selectedDateLabel.string="Selected: "+t},onConfirm:function(){if(this.selectedDate){var e=new cc.Event.EventCustom("date-selected",!0);e.detail={date:this.selectedDate,year:this.selectedDate.getFullYear(),month:this.selectedDate.getMonth()+1,day:this.selectedDate.getDate()},this.node.dispatchEvent(e),this.node.active=!1}else cc.log("Please select a date first")},onCancel:function(){var e=new cc.Event.EventCustom("date-cancel",!0);this.node.dispatchEvent(e),this.node.active=!1},show:function(e){void 0===e&&(e=null),this.node.active=!0,e?(this.currentDate=new Date(e),this.selectedDate=new Date(e)):(this.currentDate=new Date,this.selectedDate=null),this.updateCalendar(),this.selectedDate?this.onDaySelected(this.selectedDate,null):this.selectedDateLabel.string="Selected: "},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],CustomerServiceItem:[function(e,t){"use strict";cc._RF.push(t,"f966b94OcFMFqt8R3lzCEQe","CustomerServiceItem");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n};e("SharedData"),cc.Class({extends:cc.Component,properties:{logoNode:{default:null,type:cc.Node},titleLabel:{default:null,type:cc.Node},background:{default:null,type:cc.Node},mCallBack:null,mData:null},onLoad:function(){this.background?this.background.on(cc.Node.EventType.TOUCH_END,this.onItemClicked,this):this.node.on(cc.Node.EventType.TOUCH_END,this.onItemClicked,this)},onDestroy:function(){this.background?this.background.off(cc.Node.EventType.TOUCH_END,this.onItemClicked,this):this.node.off(cc.Node.EventType.TOUCH_END,this.onItemClicked,this)},init:function(e,t){if(this.mData=e,this.mCallBack=t,this.titleLabel&&e.title){var n=this.titleLabel.getComponent(cc.Label);n&&(n.string=e.title)}this.logoNode&&e.logo&&this.loadLogoImage(e.logo)},loadLogoImage:function(e){var t=this;if(e.startsWith("http://")||e.startsWith("https://")){var n="https://api.codetabs.com/v1/proxy?quest="+encodeURIComponent(e);cc.assetManager.loadRemote(n,function(e,n){if(e)console.error("Failed to load image:",e);else if(t.logoNode&&cc.isValid(t.logoNode)){var a=t.logoNode.getComponent(cc.Sprite);a&&(a.type=cc.Sprite.Type.SIMPLE,a.spriteFrame=new cc.SpriteFrame(n),t.fitImageToNode(n.width,n.height))}else console.warn("logoNode is no longer valid, skipping image load")})}},onItemClicked:function(){a.default.playButtonClickSound(),this.mData&&this.mData.url&&(cc.sys.isBrowser?this.mData.openNewTab?window.open(this.mData.url,"_blank"):window.location.href=this.mData.url:cc.sys.openURL(this.mData.url))},fitImageToNode:function(e,t){if(this.logoNode&&cc.isValid(this.logoNode)){var n=this.logoNode;if(n&&cc.isValid(n)){var a=e,r=t;if(a>96||r>96){var o=96/a,i=96/r,c=Math.min(o,i);a*=c,r*=c}n.width=a,n.height=r}else console.error("logoNode node is invalid")}else console.error("logoNode is null or invalid")},getData:function(){return this.mData}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],CustomerService:[function(e,t){"use strict";cc._RF.push(t,"49919bo7ZhE7601N9I4ovkv","CustomerService");var n=o(e("SharedFunction")),a=o(e("SharedData")),r=o(e("../Services/UserService"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}cc.Class({extends:cc.Component,properties:{mCallBack:null,mCurrentFocusTab:"LiveChat",myLiveChatTabBtn:{default:null,type:cc.Node},myFAQTabBtn:{default:null,type:cc.Node},myPlayerNameLabel:{default:null,type:cc.Node},myBalanceBG:{default:null,type:cc.Node},myLiveChatContainer:{default:null,type:cc.Node},myFAQScrollView:{default:null,type:cc.Node},mFocusTabImg:{default:null,type:cc.SpriteFrame},mNormalTabImg:{default:null,type:cc.SpriteFrame},myHeaderProfileImg:{default:null,type:cc.Sprite},i18nJson:{default:null,type:cc.JsonAsset},mCustomerServiceLabel:{default:null,type:cc.Node},mLiveChatTabLabel:{default:null,type:cc.Node},mFAQTabLabel:{default:null,type:cc.Node},mAboutUsLabel:{default:null,type:cc.Node},customerServiceItemPrefab:{default:null,type:cc.Prefab},myLiveChatContent:{default:null,type:cc.Node},createdCustomerServiceItems:[]},onLoad:function(){this.localizeUI(),this.createdCustomerServiceItems=[]},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a},updateView:function(e){var t=this;if(this.localizeUI(),this.mCallBack=e,this.mCurrentFocusTab="LiveChat",n.default.isLoggedIn()){this.myPlayerNameLabel.active=!0,this.myBalanceBG.active=!0,this.myHeaderProfileImg.node.active=!0;var r=a.default.getUserObject();this.myPlayerNameLabel.getComponent(cc.Label).string=r.fullName,this.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(r.balance,2),a.default.getSelectedAvatar()==localStorage.getItem("selected_avatar")&&cc.loader.loadRes("images/profile/Avatar"+a.default.getSelectedAvatar()+".png",cc.SpriteFrame,function(e,n){t.myHeaderProfileImg.getComponent(cc.Sprite).spriteFrame=n})}this.node.active=!0,this.onCustomerServiceTabDidPressed("","LiveChat",!0),this.myFAQScrollView.active=!1,this.myLiveChatContainer.active=!0,this.loadCustomerServiceItems();var o=this.node.getComponent(cc.Widget);o.left=this.node.width,o.right=-1*this.node.width,cc.tween(o).to(1/6,{left:0,right:0}).start()},setCallBack:function(e){this.mCallBack=e},myBackButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this.node.getComponent(cc.Widget);cc.tween(r).to(1/6,{left:this.node.width,right:-1*this.node.width}).start(),this.mCallBack&&this.mCallBack.onCustomerServiceBackButtonDidPressed()},onCustomerServiceTabDidPressed:function(e,t,a){a||n.default.playButtonClickSound(),this.myLiveChatTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myFAQTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myLiveChatTabBtn.getChildByName("lblLiveChat").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myLiveChatTabBtn.getChildByName("lblLiveChat").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myFAQTabBtn.getChildByName("lblFAQ").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myFAQTabBtn.getChildByName("lblFAQ").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myLiveChatContainer.active=!1,this.myFAQScrollView.active=!1,"LiveChat"==t?(this.myLiveChatTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myLiveChatTabBtn.getChildByName("lblLiveChat").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myLiveChatTabBtn.getChildByName("lblLiveChat").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myLiveChatContainer.active=!0,"LiveChat"!==this.mCurrentFocusTab&&this.loadCustomerServiceItems()):"FAQ"==t&&(this.myFAQTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myFAQTabBtn.getChildByName("lblFAQ").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myFAQTabBtn.getChildByName("lblFAQ").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myFAQScrollView.active=!0),this.mCurrentFocusTab=t},callGetBalanceApi:function(){var e,t=this;return(e=i().mark(function e(){var o,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.default.showLoadingView("Loading",t),e.prev=1,e.next=4,r.default.getBalance(localStorage.getItem("token"));case 4:if(o=e.sent,!n.default.isSessionExpired(o)){e.next=8;break}return n.default.handleSessionExpiration(o,t),e.abrupt("return");case 8:if(!n.default.isServerError(o)){e.next=11;break}return n.default.handleServerError(o,t),e.abrupt("return");case 11:200==o.status&&(console.log(o),(c=a.default.getUserObject()).balance=o.data.balance,a.default.setUserObject(c),t.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(c.balance,2),t.mCallBack.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(c.balance,2),n.default.hideLoadingView(t)),e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(1),!n.default.handleSessionExpiration(e.t0,t)){e.next=18;break}return e.abrupt("return");case 18:if(!n.default.handleServerError(e.t0,t)){e.next=21;break}return n.default.hideLoadingView(t),e.abrupt("return");case 21:n.default.hideLoadingView(t);case 22:case"end":return e.stop()}},e,null,[[1,14]])}),function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){c(o,a,r,i,s,"next",e)}function s(e){c(o,a,r,i,s,"throw",e)}i(void 0)})})()},localizeUI:function(){this.mCustomerServiceLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"customerService"),this.mLiveChatTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"liveChat"),this.mFAQTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"faq"),this.mAboutUsLabel.getComponent(cc.RichText).string=n.default.getLocalizedString(this.i18nJson,"aboutUs")},updatePrefabSize:function(){cc.view.getVisibleSize()},loadCustomerServiceItems:function(){try{var e=JSON.parse(localStorage.getItem("from_index"));if(!e||!e.settings||!e.settings.contactUs)return void console.log("No contactUs data found in dashboard settings");var t=e.settings.contactUs,n=this.filterActiveContacts(t);if(0===n.length)return void console.log("No active contacts to display");n.sort(function(e,t){return void 0!==e.sequence&&void 0!==t.sequence?e.sequence-t.sequence:0}),this.createCustomerServiceItems(n)}catch(error){console.error("Error loading customer service items:",error)}},filterActiveContacts:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];"active"!==a.status&&"Active"!==a.status||a.title&&""!==a.title.trim()&&t.push(a)}return t},createCustomerServiceItems:function(e){if(this.customerServiceItemPrefab)if(this.myLiveChatContent){this.clearCustomerServiceItems();for(var t=0;t<e.length;t++){var n=e[t],a=cc.instantiate(this.customerServiceItemPrefab),r=a.getComponent("CustomerServiceItem");r?(r.init(n,this),this.myLiveChatContent.addChild(a),this.createdCustomerServiceItems.push(a)):(console.error("CustomerServiceItem component not found on prefab"),a.destroy())}}else console.error("LiveChat content node is not set");else console.error("CustomerServiceItem prefab is not set")},clearCustomerServiceItems:function(){this.myLiveChatContent&&this.myLiveChatContent.removeAllChildren(!0),this.createdCustomerServiceItems=[]},onCustomerServiceItemClicked:function(e){console.log("Customer service item clicked:",e)}}),cc._RF.pop()},{"../Services/UserService":"UserService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],DDLSelect:[function(e,t){"use strict";var n;cc._RF.push(t,"e1dbfgsSAhIV4cgujQ36WuJ","DDLSelect"),(n=e("SharedFunction"))&&n.__esModule,e("SharedData"),cc.Class({extends:cc.Component,properties:{key:"",myLabel:{default:null,type:cc.Node}},onLoad:function(){},init:function(e,t,n,a){null==e&&null==e&&""==e||(this.node.x=e),null==t&&null==t&&""==t||(this.node.y=t),this.status=n,this.mCallBack=a,this.myLabel.getComponent(cc.Label).string=n},setInfoKey:function(e){this.key=e},onclick:function(e){this.mCallBack.onDDLOptionDidPressed(e,"","",this.key)}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],Deposit:[function(e,t){"use strict";cc._RF.push(t,"1ae6bOf641LSov89cA4P55t","Deposit");var n=i(e("SharedFunction")),a=i(e("SharedData")),r=i(e("../Services/UserService")),o=i(e("../Services/WalletService"));function i(e){return e&&e.__esModule?e:{default:e}}function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,i,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function s(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){s(o,a,r,i,c,"next",e)}function c(e){s(o,a,r,i,c,"throw",e)}i(void 0)})}}cc.Class({extends:cc.Component,properties:{mCallBack:null,myManageCardView:null,mCurrentFocusTab:"SureTech",mCardList:[],currentMode:"",myDepositFormContainer:{default:null,type:cc.Node},myAmountLabel:{default:null,type:cc.Node},myBankLabel:{default:null,type:cc.Node},myProofTitleLabel:{default:null,type:cc.Node},myAmountInput:{default:null,type:cc.Node},myBankSelect:{default:null,type:cc.Node},myBankDDL:{default:null,type:cc.Node},myBankScrollView:{default:null,type:cc.Node},myBankScrollContent:{default:null,type:cc.Node},myProofUploadBtn:{default:null,type:cc.Node},myProofLabel:{default:null,type:cc.Node},myProofCloseBtn:{default:null,type:cc.Node},mySubmitBtn:{default:null,type:cc.Node},myDDLSelectPrefab:{default:null,type:cc.Prefab},myErrorLabel:{default:null,type:cc.Node},myError1Label:{default:null,type:cc.Node},myError2Label:{default:null,type:cc.Node},mCompanyBanks:[],mSelectedBankId:null,mSelectedBankName:"",mProofFile:null,createdBankDDLSelect:[],myWithdrawContainer:{default:null,type:cc.Node},myWithdrawAmountInput:{default:null,type:cc.Node},myWithdrawWalletSelect:{default:null,type:cc.Node},myWithdrawWalletDDL:{default:null,type:cc.Node},myWithdrawWalletScrollView:{default:null,type:cc.Node},myWithdrawWalletScrollContent:{default:null,type:cc.Node},myWithdrawConfirmBtn:{default:null,type:cc.Node},myWithdrawError1Label:{default:null,type:cc.Node},myWithdrawError2Label:{default:null,type:cc.Node},mPlayerBankAccounts:[],mSelectedPlayerBankAccountId:null,mSelectedPlayerBankAccountName:"",createdWithdrawWalletDDLSelect:[],mySureTechTabBtn:{default:null,type:cc.Node},myDpayTabBtn:{default:null,type:cc.Node},myHistoryTabBtn:{default:null,type:cc.Node},myPlayerNameLabel:{default:null,type:cc.Node},myBalanceBG:{default:null,type:cc.Node},myCardContainer:{default:null,type:cc.Node},myNoCardContainer:{default:null,type:cc.Node},mFocusTabImg:{default:null,type:cc.SpriteFrame},mNormalTabImg:{default:null,type:cc.SpriteFrame},myHeaderProfileImg:{default:null,type:cc.Sprite},i18nJson:{default:null,type:cc.JsonAsset},mDepositLabel:{default:null,type:cc.Node},mSureTechTabLabel:{default:null,type:cc.Node},mDpayTabLabel:{default:null,type:cc.Node},mHistoryTabLabel:{default:null,type:cc.Node},mSupportTabLabel:{default:null,type:cc.Node},mDescLabel:{default:null,type:cc.Node},mClickHereLabel:{default:null,type:cc.Node},mSetupLabel:{default:null,type:cc.Node},bg_component:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI();var e=this;this.myAmountInput&&this.myAmountInput.on("text-changed",function(){e.myErrorLabel&&(e.myErrorLabel.active=!1)},this),this.myWithdrawAmountInput&&this.myWithdrawAmountInput.on("text-changed",function(){e.myWithdrawError1Label&&(e.myWithdrawError1Label.active=!1)},this)},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a},updateView:function(e,t){var r=this;this.localizeUI(),this.mCallBack=e,t=t||"deposit",this.currentMode=t,"withdrawal"===this.currentMode?(this.mySureTechTabBtn&&(this.mySureTechTabBtn.active=!1),this.myDpayTabBtn&&(this.myDpayTabBtn.active=!0),this.mCurrentFocusTab="Dpay"):(this.mySureTechTabBtn&&(this.mySureTechTabBtn.active=!0),this.myDpayTabBtn&&(this.myDpayTabBtn.active=!1),this.mCurrentFocusTab="SureTech");var o=a.default.getUserObject();this.myPlayerNameLabel.getComponent(cc.Label).string=o.fullName,this.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(o.balance,2),a.default.getSelectedAvatar()==localStorage.getItem("selected_avatar")&&cc.loader.loadRes("images/profile/Avatar"+a.default.getSelectedAvatar()+".png",cc.SpriteFrame,function(e,t){r.myHeaderProfileImg.getComponent(cc.Sprite).spriteFrame=t}),this.node.active=!0,this.bg_component&&(this.bg_component.active=!0),this.mCardList=[],this.updateProofCloseButtonVisibility(),this.myErrorLabel&&(this.myErrorLabel.active=!1),this.myError1Label&&(this.myError1Label.active=!1),this.myError2Label&&(this.myError2Label.active=!1),this.myWithdrawError1Label&&(this.myWithdrawError1Label.active=!1),this.myWithdrawError2Label&&(this.myWithdrawError2Label.active=!1),this.myDepositFormContainer&&(this.myDepositFormContainer.active=!1),this.myWithdrawContainer&&(this.myWithdrawContainer.active=!1),this.myNoCardContainer&&(this.myNoCardContainer.active=!0),this.callGetWalletListingApi(),"withdrawal"===t?this.onDepositTabDidPressed("","Dpay",!0):this.onDepositTabDidPressed("","SureTech",!0),this.myCardContainer.active=!0;var i=this.node.getComponent(cc.Widget);i.left=this.node.width,i.right=-1*this.node.width,cc.tween(i).to(1/6,{left:0,right:0}).start()},setCallBack:function(e){this.mCallBack=e},myBackButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this.node.getComponent(cc.Widget);cc.tween(r).to(1/6,{left:this.node.width,right:-1*this.node.width}).start(),this.mCallBack&&this.mCallBack.onDepositBackButtonDidPressed()},onSupportButtonDidPressed:function(e,t,a){console.log("onSupportButtonDidPressed"),a||n.default.playButtonClickSound(),this.bg_component&&(this.bg_component.active=!1),this.mCallBack&&"function"==typeof this.mCallBack.onSupportButtonDidPressed&&this.mCallBack.onSupportButtonDidPressed()},showBgComponent:function(){this.bg_component&&(this.bg_component.active=!0)},navigateToPersonalCenterCardWallet:function(e,t,a){a||n.default.playButtonClickSound();var r=this;n.default.isLoggedIn()&&(n.default.showLoadingView("",r),cc.resources.load("prefabs/personal/personalCenter",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(r);var a;null==r.mCallBack.myPersonalView?(a=cc.instantiate(t).getComponent("PersonalCenter"),r.mCallBack.updatePrefabSize&&r.mCallBack.updatePrefabSize()):a=r.mCallBack.myPersonalView,a.updateView(r.mCallBack,"CardWallet"),r.mCallBack.myPersonalView=a,r.mCallBack.node.addChild(a.node),r.node.active=!1,r.mCallBack&&r.mCallBack.myLobbyContainer&&(r.mCallBack.myDrawerBG&&(r.mCallBack.myDrawerBG.active=!1),cc.tween(r.mCallBack.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:-1*r.mCallBack.myLobbyContainer.width,right:r.mCallBack.myLobbyContainer.width}).start()),n.default.hideLoadingView(r)}))},onDepositTabDidPressed:function(e,t,a){a||n.default.playButtonClickSound(),this.mySureTechTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myDpayTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myHistoryTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,(r=this.mySureTechTabBtn?this.mySureTechTabBtn.getChildByName("lblSureTech"):null)&&(r.getComponent(cc.LabelOutline).color=new cc.color("#014D92"),r.getComponent(cc.LabelShadow).color=new cc.color("#01277E")),(i=this.myDpayTabBtn?this.myDpayTabBtn.getChildByName("lblDpay"):null)&&(i.getComponent(cc.LabelOutline).color=new cc.color("#014D92"),i.getComponent(cc.LabelShadow).color=new cc.color("#01277E"));var r,o=this.myHistoryTabBtn?this.myHistoryTabBtn.getChildByName("lblHistory"):null;if(o&&(o.getComponent(cc.LabelOutline).color=new cc.color("#014D92"),o.getComponent(cc.LabelShadow).color=new cc.color("#01277E")),this.myCardContainer.active=!1,this.mCurrentFocusTab=t,"SureTech"==t)this.mySureTechTabBtn&&(this.mySureTechTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,(r=this.mySureTechTabBtn.getChildByName("lblSureTech"))&&(r.getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),r.getComponent(cc.LabelShadow).color=new cc.color("#6B017E"))),this.myCardContainer&&(this.myCardContainer.active=!0),this.updateContainerVisibility(),Object.keys(this.mCardList).length>0&&this.myDepositFormContainer&&this.myDepositFormContainer.active&&0==this.mCompanyBanks.length&&this.loadCompanyBanks();else if("Dpay"==t){var i;this.myDpayTabBtn&&(this.myDpayTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,(i=this.myDpayTabBtn.getChildByName("lblDpay"))&&(i.getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),i.getComponent(cc.LabelShadow).color=new cc.color("#6B017E"))),this.myCardContainer&&(this.myCardContainer.active=!0),this.updateContainerVisibility(),Object.keys(this.mCardList).length>0&&this.myWithdrawContainer&&this.myWithdrawContainer.active&&(0==this.mPlayerBankAccounts.length?this.loadPlayerBankAccounts():this.setupWithdrawWalletDropdown())}else"History"==t&&this.navigateToPersonalCenterCardWallet()},onManageCardDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this;n.default.showLoadingView("",r),cc.resources.load("prefabs/deposit/manageCard",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(r);null==r.myManageCardView&&(r.myManageCardView=cc.instantiate(t).getComponent("ManageCard"),r.updatePrefabSize()),r.myManageCardView.updateView(r),r.node.addChild(r.myManageCardView.node),n.default.hideLoadingView(r)})},myCloseManageCardDidPressed:function(){this.node.removeChild(this.myManageCardView.node),this.callGetWalletListingApi()},updateContainerVisibility:function(){var e=Object.keys(this.mCardList).length>0,t="SureTech"===this.mCurrentFocusTab,n="Dpay"===this.mCurrentFocusTab;e?(this.myNoCardContainer&&(this.myNoCardContainer.active=!1),t?(this.myDepositFormContainer&&(this.myDepositFormContainer.active=!0),this.myWithdrawContainer&&(this.myWithdrawContainer.active=!1)):n&&(this.myDepositFormContainer&&(this.myDepositFormContainer.active=!1),this.myWithdrawContainer&&(this.myWithdrawContainer.active=!0))):(this.myNoCardContainer&&(this.myNoCardContainer.active=!0),this.myDepositFormContainer&&(this.myDepositFormContainer.active=!1),this.myWithdrawContainer&&(this.myWithdrawContainer.active=!1))},callGetWalletListingApi:function(){var e=this;return l(c().mark(function t(){var a,r,i,s,l,u;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),t.prev=1,t.next=4,o.default.getBankAccounts(a);case 4:if(r=t.sent,!n.default.isSessionExpired(r)){t.next=8;break}return n.default.handleSessionExpiration(r,e),t.abrupt("return");case 8:if(!n.default.isServerError(r)){t.next=11;break}return n.default.handleServerError(r,e),t.abrupt("return");case 11:if(200==r.status&&r.data)for(e.mCardList=[],i=0;i<r.data.length;i++)s=r.data[i],e.mCardList.push({id:s._id,bank:s.bankName,name:s.accountName,number:s.accountNumber});e.updateContainerVisibility(),e.mCardList.length>0&&"SureTech"==e.mCurrentFocusTab&&e.myDepositFormContainer&&e.myDepositFormContainer.active&&(e.myAmountInput.getComponent(cc.EditBox).string="",e.myProofLabel.getComponent(cc.Label).string=n.default.getLocalizedString(e.i18nJson,"proofOfPayment")||"Proof of Payment",(l=e.myBankSelect.getChildByName("lblBank"))&&l.getComponent(cc.Label)&&(l.getComponent(cc.Label).string=n.default.getLocalizedString(e.i18nJson,"selectBank")||"Select Bank"),e.mProofFile=null,e.mSelectedBankId=null,e.mSelectedBankName="",e.updateProofCloseButtonVisibility(),e.loadCompanyBanks()),e.mCardList.length>0&&"Dpay"==e.mCurrentFocusTab&&e.myWithdrawContainer&&e.myWithdrawContainer.active&&(e.myWithdrawAmountInput&&e.myWithdrawAmountInput.getComponent(cc.EditBox)&&(e.myWithdrawAmountInput.getComponent(cc.EditBox).string=""),(u=e.myWithdrawWalletSelect?e.myWithdrawWalletSelect.getChildByName("lblWallet"):null)&&u.getComponent(cc.Label)&&(u.getComponent(cc.Label).string=n.default.getLocalizedString(e.i18nJson,"selectBank")||"Select Bank"),e.mSelectedPlayerBankAccountId=null,e.mSelectedPlayerBankAccountName="",0==e.mPlayerBankAccounts.length?e.loadPlayerBankAccounts():e.setupWithdrawWalletDropdown()),t.next=25;break;case 17:if(t.prev=17,t.t0=t.catch(1),!n.default.handleSessionExpiration(t.t0,e)){t.next=21;break}return t.abrupt("return");case 21:if(!n.default.handleServerError(t.t0,e)){t.next=23;break}return t.abrupt("return");case 23:console.log(t.t0),e.updateContainerVisibility();case 25:case"end":return t.stop()}},t,null,[[1,17]])}))()},onDDLDidPressed:function(e,t,a){if(a||n.default.playButtonClickSound(),"bank"==t)this.myBankSelect&&(r=this.myBankSelect.getChildByName("iconTriangle"))&&this.myBankDDL&&(this.myBankDDL.active?r.angle=90:r.angle=-90,this.myBankDDL.active=!this.myBankDDL.active);else if("withdrawWallet"==t){var r;console.log("withdrawWallet"),this.myWithdrawWalletSelect&&(r=this.myWithdrawWalletSelect.getChildByName("iconTriangle"))&&this.myWithdrawWalletDDL&&(this.myWithdrawWalletDDL.active?r.angle=90:r.angle=-90,this.myWithdrawWalletDDL.active=!this.myWithdrawWalletDDL.active)}},onDDLOptionDidPressed:function(e,t,a,r){a||n.default.playButtonClickSound();var o=e.target.parent.name,i=e.target.getChildByName("label").getComponent(cc.Label).string;if("BankScrollViewContent"==o||"ddl_bank_bg"==o){var c=this.mCompanyBanks.find(function(e){return e._id===r});if(this.myBankSelect){var s=this.myBankSelect.getChildByName("lblBank");s&&s.getComponent(cc.Label)&&(c?(this.mSelectedBankId=c._id,this.mSelectedBankName=c.bankName,s.getComponent(cc.Label).string=c.bankName):s.getComponent(cc.Label).string=i),(u=this.myBankSelect.getChildByName("iconTriangle"))&&(u.angle=90)}this.myBankDDL&&(this.myBankDDL.active=!1),this.myError1Label&&(this.myError1Label.active=!1)}else if("WithdrawWalletScrollViewContent"==o||"ddl_wallet_bg"==o){var l=this.mPlayerBankAccounts.find(function(e){return e._id===r});if(this.myWithdrawWalletSelect){var u,d=this.myWithdrawWalletSelect.getChildByName("lblWallet");d&&d.getComponent(cc.Label)&&(l?(this.mSelectedPlayerBankAccountId=l._id,this.mSelectedPlayerBankAccountName=l.bankName+" - "+l.accountNumber,d.getComponent(cc.Label).string=this.mSelectedPlayerBankAccountName):d.getComponent(cc.Label).string=i),(u=this.myWithdrawWalletSelect.getChildByName("iconTriangle"))&&(u.angle=90)}this.myWithdrawWalletDDL&&(this.myWithdrawWalletDDL.active=!1),this.myWithdrawError2Label&&(this.myWithdrawError2Label.active=!1)}},callGetBalanceApi:function(){var e=this;return l(c().mark(function t(){var o,i;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.default.showLoadingView("Loading",e),t.prev=1,t.next=4,r.default.getBalance(localStorage.getItem("token"));case 4:if(o=t.sent,!n.default.isSessionExpired(o)){t.next=8;break}return n.default.handleSessionExpiration(o,e),t.abrupt("return");case 8:if(!n.default.isServerError(o)){t.next=11;break}return n.default.handleServerError(o,e),t.abrupt("return");case 11:200==o.status&&(console.log(o),(i=a.default.getUserObject()).balance=o.data.balance,a.default.setUserObject(i),e.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(i.balance,2),e.mCallBack.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(i.balance,2),n.default.hideLoadingView(e)),t.next=22;break;case 14:if(t.prev=14,t.t0=t.catch(1),!n.default.handleSessionExpiration(t.t0,e)){t.next=18;break}return t.abrupt("return");case 18:if(!n.default.handleServerError(t.t0,e)){t.next=21;break}return n.default.hideLoadingView(e),t.abrupt("return");case 21:n.default.hideLoadingView(e);case 22:case"end":return t.stop()}},t,null,[[1,14]])}))()},loadCompanyBanks:function(){var e=this;return l(c().mark(function t(){var a;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.default.showLoadingView("Loading",e),t.next=4,o.default.getCompanyBanks(localStorage.getItem("token"));case 4:if(a=t.sent,!n.default.isSessionExpired(a)){t.next=8;break}return n.default.handleSessionExpiration(a,e),t.abrupt("return");case 8:if(!n.default.isServerError(a)){t.next=11;break}return n.default.handleServerError(a,e),t.abrupt("return");case 11:200==a.status&&a.data&&a.data.length>0?(e.mCompanyBanks=a.data,e.setupBankDropdown()):console.error("No company banks found"),n.default.hideLoadingView(e),t.next=24;break;case 15:if(t.prev=15,t.t0=t.catch(0),!n.default.handleSessionExpiration(t.t0,e)){t.next=19;break}return t.abrupt("return");case 19:if(!n.default.handleServerError(t.t0,e)){t.next=22;break}return n.default.hideLoadingView(e),t.abrupt("return");case 22:console.error("Failed to load company banks:",t.t0),n.default.hideLoadingView(e);case 24:case"end":return t.stop()}},t,null,[[0,15]])}))()},setupBankDropdown:function(){if(this.myBankDDL&&this.myBankScrollView&&this.myBankScrollContent){var e=this.createdBankDDLSelect,t=this.myBankDDL,n=this.myBankScrollView,a=this.myBankScrollContent;if(e.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),this.createdBankDDLSelect=[],this.myDDLSelectPrefab){for(var r in a&&(a.name="BankScrollViewContent"),this.mCompanyBanks){var o=this.mCompanyBanks[r],i=-25-46*parseInt(r),c=cc.instantiate(this.myDDLSelectPrefab).getComponent("DDLSelect");c.init(0,i,o.bankName,this),c.setInfoKey(o._id),a.addChild(c.node),this.createdBankDDLSelect.push(c)}var s=50+46*(this.mCompanyBanks.length-1),l=s;(s=s>234?234:s)<234&&(s+=46),t.height=s,n.height=s;var u=n.getComponent(cc.ScrollView);if(u&&u.scrollToTop(0),a.height=l,this.mCompanyBanks.length>0&&!this.mSelectedBankId){var d=this.mCompanyBanks[0];if(this.mSelectedBankId=d._id,this.mSelectedBankName=d.bankName,this.myBankSelect){var h=this.myBankSelect.getChildByName("lblBank");h&&h.getComponent(cc.Label)&&(h.getComponent(cc.Label).string=d.bankName)}}}else console.error("DDLSelectPrefab is not assigned")}else console.error("Bank dropdown components are not assigned")},onProofUploadDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=document.createElement("input");r.type="file",r.accept="image/*",r.style.display="none";var o=this;r.onchange=function(e){var t=e.target.files[0];t&&(o.mProofFile=t,o.myProofLabel&&o.myProofLabel.getComponent(cc.Label)&&(o.myProofLabel.getComponent(cc.Label).string=t.name),o.updateProofCloseButtonVisibility(),o.myError2Label&&(o.myError2Label.active=!1)),document.body.removeChild(r)},document.body.appendChild(r),r.click()},onProofCloseDidPressed:function(e,t,a){a||n.default.playButtonClickSound(),this.mProofFile=null,this.myProofLabel&&this.myProofLabel.getComponent(cc.Label)&&(this.myProofLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"proofOfPayment")||"Proof of Payment"),this.updateProofCloseButtonVisibility()},updateProofCloseButtonVisibility:function(){this.myProofCloseBtn&&(this.myProofCloseBtn.active=null!==this.mProofFile)},clearDepositForm:function(){if(this.myAmountInput&&this.myAmountInput.getComponent(cc.EditBox)&&(this.myAmountInput.getComponent(cc.EditBox).string=""),this.mProofFile=null,this.myProofLabel&&this.myProofLabel.getComponent(cc.Label)&&(this.myProofLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"proofOfPayment")||"Proof of Payment"),this.updateProofCloseButtonVisibility(),this.mSelectedBankId=null,this.mSelectedBankName="",this.myBankSelect){var e=this.myBankSelect.getChildByName("lblBank");e&&e.getComponent(cc.Label)&&(e.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"selectBank")||"Select Bank");var t=this.myBankSelect.getChildByName("iconTriangle");t&&(t.angle=90)}this.myBankDDL&&(this.myBankDDL.active=!1),this.myErrorLabel&&(this.myErrorLabel.active=!1),this.myError1Label&&(this.myError1Label.active=!1),this.myError2Label&&(this.myError2Label.active=!1)},onDepositSubmitDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r="";if(this.myAmountInput&&this.myAmountInput.getComponent(cc.EditBox)&&(r=this.myAmountInput.getComponent(cc.EditBox).string.trim()),r&&0!=r.length){var o=parseFloat(r);isNaN(o)||o<=0?this.showLableError(this.myErrorLabel,n.default.getLocalizedString(this.i18nJson,"invalidAmount")||"Invalid amount"):this.mSelectedBankId?this.mProofFile?this.submitDeposit(o,this.mSelectedBankId,this.mProofFile):this.showLableError(this.myError2Label,n.default.getLocalizedString(this.i18nJson,"proofRequired")||"Please upload proof of payment"):this.showLableError(this.myError1Label,n.default.getLocalizedString(this.i18nJson,"bankRequired")||"Please select a bank")}else this.showLableError(this.myErrorLabel,n.default.getLocalizedString(this.i18nJson,"amountRequired")||"Amount is required")},showLableError:function(e,t){this.myErrorLabel&&(this.myErrorLabel.active=!1),this.myError1Label&&(this.myError1Label.active=!1),this.myError2Label&&(this.myError2Label.active=!1),e&&(e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},submitDeposit:function(e,t,a){var r=this;return l(c().mark(function i(){var s,l,u,d;return c().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,n.default.showLoadingView("Submitting deposit...",r),i.next=4,o.default.deposit(localStorage.getItem("token"),{amount:e,companyBankId:t,proof:a});case 4:if(s=i.sent,!n.default.isSessionExpired(s)){i.next=8;break}return n.default.handleSessionExpiration(s,r),i.abrupt("return");case 8:if(!n.default.isServerError(s)){i.next=11;break}return n.default.handleServerError(s,r),i.abrupt("return");case 11:200==s.status||201==s.status?(console.log("Deposit submitted successfully:",s),l=s.message||n.default.getLocalizedString(r.i18nJson,"depositSuccess")||"Deposit request submitted successfully. Please wait for admin approval.",n.default.showMessageInfoView(l,r,3),r.clearDepositForm()):(console.error("Failed to submit deposit:",s),s.message&&n.default.showMessageInfoView(s.message,r,3)),n.default.hideLoadingView(r),i.next=26;break;case 15:if(i.prev=15,i.t0=i.catch(0),!n.default.handleSessionExpiration(i.t0,r)){i.next=19;break}return i.abrupt("return");case 19:if(!n.default.handleServerError(i.t0,r)){i.next=22;break}return n.default.hideLoadingView(r),i.abrupt("return");case 22:console.error("Failed to submit deposit:",i.t0),d=i.t0.message||(null==(u=i.t0.data)?void 0:u.message)||n.default.getLocalizedString(r.i18nJson,"depositFailed")||"Failed to submit deposit. Please try again.",n.default.showMessageInfoView(d,r,3),n.default.hideLoadingView(r);case 26:case"end":return i.stop()}},i,null,[[0,15]])}))()},loadPlayerBankAccounts:function(){var e=this;return l(c().mark(function t(){var a;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.default.showLoadingView("Loading",e),t.next=4,o.default.getBankAccounts(localStorage.getItem("token"));case 4:if(a=t.sent,!n.default.isSessionExpired(a)){t.next=8;break}return n.default.handleSessionExpiration(a,e),t.abrupt("return");case 8:if(!n.default.isServerError(a)){t.next=11;break}return n.default.handleServerError(a,e),t.abrupt("return");case 11:200==a.status&&a.data&&a.data.length>0?(e.mPlayerBankAccounts=a.data,e.setupWithdrawWalletDropdown()):console.error("No player bank accounts found"),n.default.hideLoadingView(e),t.next=24;break;case 15:if(t.prev=15,t.t0=t.catch(0),!n.default.handleSessionExpiration(t.t0,e)){t.next=19;break}return t.abrupt("return");case 19:if(!n.default.handleServerError(t.t0,e)){t.next=22;break}return n.default.hideLoadingView(e),t.abrupt("return");case 22:console.error("Failed to load player bank accounts:",t.t0),n.default.hideLoadingView(e);case 24:case"end":return t.stop()}},t,null,[[0,15]])}))()},setupWithdrawWalletDropdown:function(){if(this.myWithdrawWalletDDL&&this.myWithdrawWalletScrollView&&this.myWithdrawWalletScrollContent){var e=this.createdWithdrawWalletDDLSelect,t=this.myWithdrawWalletDDL,n=this.myWithdrawWalletScrollView,a=this.myWithdrawWalletScrollContent;if(e.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),this.createdWithdrawWalletDDLSelect=[],this.myDDLSelectPrefab){for(var r in a&&(a.name="WithdrawWalletScrollViewContent"),this.mPlayerBankAccounts){var o=this.mPlayerBankAccounts[r],i=-25-46*parseInt(r),c=o.bankName+" - "+o.accountNumber,s=cc.instantiate(this.myDDLSelectPrefab).getComponent("DDLSelect");s.init(0,i,c,this),s.setInfoKey(o._id),a.addChild(s.node),this.createdWithdrawWalletDDLSelect.push(s)}var l=50+46*(this.mPlayerBankAccounts.length-1),u=l;(l=l>234?234:l)<234&&(l+=46),t.height=l,n.height=l;var d=n.getComponent(cc.ScrollView);if(d&&d.scrollToTop(0),a.height=u,this.mPlayerBankAccounts.length>0&&!this.mSelectedPlayerBankAccountId){var h=this.mPlayerBankAccounts[0];if(this.mSelectedPlayerBankAccountId=h._id,this.mSelectedPlayerBankAccountName=h.bankName+" - "+h.accountNumber,this.myWithdrawWalletSelect){var m=this.myWithdrawWalletSelect.getChildByName("lblWallet");m&&m.getComponent(cc.Label)&&(m.getComponent(cc.Label).string=this.mSelectedPlayerBankAccountName)}}}else console.error("DDLSelectPrefab is not assigned")}else console.error("Withdrawal wallet dropdown components are not assigned")},onWithdrawWalletDDLDidPressed:function(e,t,a){if(a||n.default.playButtonClickSound(),this.myWithdrawWalletSelect){var r=this.myWithdrawWalletSelect.getChildByName("iconTriangle");r&&this.myWithdrawWalletDDL&&(this.myWithdrawWalletDDL.active?r.angle=90:r.angle=-90,this.myWithdrawWalletDDL.active=!this.myWithdrawWalletDDL.active)}},onWithdrawWalletDDLOptionDidPressed:function(e,t,a,r){a||n.default.playButtonClickSound();var o=e.target.parent.name,i=e.target.getChildByName("label").getComponent(cc.Label).string;if("WithdrawWalletScrollViewContent"==o||"ddl_wallet_bg"==o){var c=this.mPlayerBankAccounts.find(function(e){return e._id===r});if(this.myWithdrawWalletSelect){var s=this.myWithdrawWalletSelect.getChildByName("lblWallet");s&&s.getComponent(cc.Label)&&(c?(this.mSelectedPlayerBankAccountId=c._id,this.mSelectedPlayerBankAccountName=c.bankName+" - "+c.accountNumber,s.getComponent(cc.Label).string=this.mSelectedPlayerBankAccountName):s.getComponent(cc.Label).string=i);var l=this.myWithdrawWalletSelect.getChildByName("iconTriangle");l&&(l.angle=90)}this.myWithdrawWalletDDL&&(this.myWithdrawWalletDDL.active=!1),this.myWithdrawError2Label&&(this.myWithdrawError2Label.active=!1)}},clearWithdrawForm:function(){if(this.myWithdrawAmountInput&&this.myWithdrawAmountInput.getComponent(cc.EditBox)&&(this.myWithdrawAmountInput.getComponent(cc.EditBox).string=""),this.mSelectedPlayerBankAccountId=null,this.mSelectedPlayerBankAccountName="",this.myWithdrawWalletSelect){var e=this.myWithdrawWalletSelect.getChildByName("lblWallet");e&&e.getComponent(cc.Label)&&(e.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"selectBank")||"Select Bank");var t=this.myWithdrawWalletSelect.getChildByName("iconTriangle");t&&(t.angle=90)}this.myWithdrawWalletDDL&&(this.myWithdrawWalletDDL.active=!1),this.myWithdrawError1Label&&(this.myWithdrawError1Label.active=!1),this.myWithdrawError2Label&&(this.myWithdrawError2Label.active=!1)},onWithdrawConfirmDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r="";if(this.myWithdrawAmountInput&&this.myWithdrawAmountInput.getComponent(cc.EditBox)&&(r=this.myWithdrawAmountInput.getComponent(cc.EditBox).string.trim()),r&&0!=r.length){var o=parseFloat(r);isNaN(o)||o<=0?this.showWithdrawError(this.myWithdrawError1Label,n.default.getLocalizedString(this.i18nJson,"invalidAmount")||"Invalid amount"):this.mSelectedPlayerBankAccountId?this.submitWithdrawal(o,this.mSelectedPlayerBankAccountId):this.showWithdrawError(this.myWithdrawError2Label,n.default.getLocalizedString(this.i18nJson,"bankRequired")||"Please select a bank")}else this.showWithdrawError(this.myWithdrawError1Label,n.default.getLocalizedString(this.i18nJson,"amountRequired")||"Amount is required")},showWithdrawError:function(e,t){this.myWithdrawError1Label&&(this.myWithdrawError1Label.active=!1),this.myWithdrawError2Label&&(this.myWithdrawError2Label.active=!1),e&&(e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},submitWithdrawal:function(e,t){var a=this;return l(c().mark(function r(){var i,s,l,u;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n.default.showLoadingView("Submitting withdrawal...",a),r.next=4,o.default.withdraw(localStorage.getItem("token"),{amount:e,playerBankAccountId:t});case 4:if(i=r.sent,!n.default.isSessionExpired(i)){r.next=8;break}return n.default.handleSessionExpiration(i,a),r.abrupt("return");case 8:if(!n.default.isServerError(i)){r.next=11;break}return n.default.handleServerError(i,a),r.abrupt("return");case 11:200==i.status||201==i.status?(console.log("Withdrawal submitted successfully:",i),s=i.message||n.default.getLocalizedString(a.i18nJson,"withdrawSuccess")||"Withdrawal request submitted successfully. Funds have been frozen and pending admin approval.",n.default.showMessageInfoView(s,a,3),a.clearWithdrawForm(),a.callGetBalanceApi()):(console.error("Failed to submit withdrawal:",i),i.message&&n.default.showMessageInfoView(i.message,a,3)),n.default.hideLoadingView(a),r.next=26;break;case 15:if(r.prev=15,r.t0=r.catch(0),!n.default.handleSessionExpiration(r.t0,a)){r.next=19;break}return r.abrupt("return");case 19:if(!n.default.handleServerError(r.t0,a)){r.next=22;break}return n.default.hideLoadingView(a),r.abrupt("return");case 22:console.error("Failed to submit withdrawal:",r.t0),u=r.t0.message||(null==(l=r.t0.data)?void 0:l.message)||n.default.getLocalizedString(a.i18nJson,"withdrawFailed")||"Failed to submit withdrawal. Please try again.",n.default.showMessageInfoView(u,a,3),n.default.hideLoadingView(a);case 26:case"end":return r.stop()}},r,null,[[0,15]])}))()},localizeUI:function(){this.mDepositLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"withdrawal"===this.currentMode?"withdrawal":"deposit"),this.mSureTechTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"deposit"),this.mDpayTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"withdrawal"),this.mHistoryTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"history"),this.mSupportTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"support"),this.mDescLabel.getComponent(cc.RichText).string=n.default.getLocalizedString(this.i18nJson,"desc"),this.mClickHereLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"clickHere"),this.mSetupLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"setup"),this.myAmountLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"amount"),this.myBankLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"bank"),this.myProofTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"proofOfPayment"),this.myProofLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"proofOfPayment");var e=this.mySubmitBtn.getChildByName("lblConfirm");if(e&&(e.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"submit")),this.myWithdrawConfirmBtn){var t=this.myWithdrawConfirmBtn.getChildByName("lblConfirm");t&&(t.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"submit"))}},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myManageCardView&&this.myManageCardView.init(0,0,e.width,e.height)}}),cc._RF.pop()},{"../Services/UserService":"UserService","../Services/WalletService":"WalletService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],DeveloperLogo:[function(e,t){"use strict";cc._RF.push(t,"9f2b4rIap9MIpCRKPuNhqDY","DeveloperLogo");var n=a(e("SharedFunction"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("SharedData")),cc.Class({extends:cc.Component,properties:{logoBG:{default:null,type:cc.Node},providerLogo:{default:null,type:cc.Node},mFocusTabImg:{default:null,type:cc.SpriteFrame},mNormalTabImg:{default:null,type:cc.SpriteFrame}},onLoad:function(){},init:function(e,t,n,a){var r=this;this.node.x=e,this.node.y=t,this.data=n,this.mCallBack=a,this.node.name=n.code,cc.loader.loadRes("images/providers/logo/"+this.data.code+"Logo.png",cc.SpriteFrame,function(e,t){r.providerLogo.getComponent(cc.Sprite).spriteFrame=t}),this.data.code==this.mCallBack.developerData.code&&this.onClick(null,null,!0)},onClick:function(e,t,a){var r=this;a||n.default.playButtonClickSound(),this.mCallBack.onDeveloperLogoButtonDidPressed(null,null,!0,this.data),this.logoBG.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.mCallBack.myDeveloperLabel.getComponent(cc.Label).string=this.data.name,setTimeout(function(){r.mCallBack.myTotalLabel.x=r.mCallBack.myDeveloperLabel.x+r.mCallBack.myDeveloperLabel.width+22},0)},unClick:function(){this.logoBG.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],DrawerCsItem:[function(e,t){"use strict";cc._RF.push(t,"a1b2cPU5fZ4kKvN7xI0VniQ","DrawerCsItem");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n};e("SharedData"),cc.Class({extends:cc.Component,properties:{logoNode:{default:null,type:cc.Node},mCallBack:null,mData:null},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onItemClicked,this),this.node&&(this.node.width=40,this.node.height=40)},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onItemClicked,this)},init:function(e,t){this.mData=e,this.mCallBack=t,this.logoNode&&e.logo&&this.loadLogoImage(e.logo)},loadLogoImage:function(e){var t=this;if(e.startsWith("http://")||e.startsWith("https://")){var n="https://api.codetabs.com/v1/proxy?quest="+encodeURIComponent(e);cc.assetManager.loadRemote(n,function(e,n){if(e)console.error("Failed to load image:",e);else if(t.logoNode&&cc.isValid(t.logoNode)){var a=t.logoNode.getComponent(cc.Sprite);a&&(a.type=cc.Sprite.Type.SIMPLE,a.spriteFrame=new cc.SpriteFrame(n),t.fitImageToNode(n.width,n.height))}else console.warn("logoNode is no longer valid, skipping image load")})}else cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){if(e)console.error("Failed to load local image:",e);else if(t.logoNode&&cc.isValid(t.logoNode)){var a=t.logoNode.getComponent(cc.Sprite);a&&(a.spriteFrame=n,t.fitImageToNode(n.getRect().width,n.getRect().height))}else console.warn("logoNode is no longer valid, skipping image load")})},onItemClicked:function(){a.default.playButtonClickSound(),this.mData&&(this.mData.url&&(cc.sys.isBrowser?this.mData.openNewTab?window.open(this.mData.url,"_blank"):window.location.href=this.mData.url:cc.sys.openURL(this.mData.url)),this.mCallBack&&"function"==typeof this.mCallBack.onDrawerCsItemClicked&&this.mCallBack.onDrawerCsItemClicked(this.mData))},fitImageToNode:function(e,t){if(this.logoNode&&cc.isValid(this.logoNode)){var n=this.logoNode;if(n&&cc.isValid(n)){var a=e,r=t;if(a>40||r>40){var o=40/a,i=40/r,c=Math.min(o,i);a*=c,r*=c}n.width=a,n.height=r}else console.error("logoNode node is invalid")}else console.error("logoNode is null or invalid")},getData:function(){return this.mData}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],EditBasicInfo:[function(e,t){"use strict";cc._RF.push(t,"0181ba1PaZK4oPX2++76PgN","EditBasicInfo");var n=o(e("SharedFunction")),a=o(e("SharedData")),r=o(e("../Services/UserService"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){c(o,a,r,i,s,"next",e)}function s(e){c(o,a,r,i,s,"throw",e)}i(void 0)})}}cc.Class({extends:cc.Component,properties:{mCallBack:null,myVerificationView:null,mBackground:{default:null,type:cc.Node},myUsernameInput:{default:null,type:cc.Node},myEmailInput:{default:null,type:cc.Node},myGenderSelect:{default:null,type:cc.Node},myGenderDDL:{default:null,type:cc.Node},myScrollView:{default:null,type:cc.Node},birthdayPicker:{type:e("SimpleBirthdayPicker"),default:null},calendarPicker:cc.Node,openCalendarButton:cc.Button,myBirthdayLabel:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mEmailLabel:{default:null,type:cc.Node},mUsernameLabel:{default:null,type:cc.Node},mGenderLabel:{default:null,type:cc.Node},mBirthdayLabel:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node},myError1Label:{default:null,type:cc.Node},myError4Label:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI();var e=this;cc.resources.load("prefabs/calendar/CalendarPicker",cc.Prefab,function(t,n){t?console.error("Failed to load prefab:",t):(null==e.calendarPicker&&(e.calendarPicker=cc.instantiate(n),e.updatePrefabSize()),e.node.addChild(e.calendarPicker.getComponent("CalendarManager").node),e.calendarPicker.on("date-selected",e.onDateSelected,e),e.calendarPicker.on("date-cancel",e.onDateCancel,e))})},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},updateView:function(e){this.localizeUI(),this.mCallBack=e,this.mBackground.active=!0,this.node.opacity=255,this.myError1Label.active=!1,this.myGenderDDL.active=!1,this.myScrollView.active=!0;var t=a.default.getUserObject();console.log("userObj",t),this.myUsernameInput.getComponent(cc.EditBox).string=t.fullName,this.myEmailInput.getComponent(cc.EditBox).string=t.email,this.openCalendarButton.node.on("click",this.openCalendar,this),null!=this.calendarPicker&&(this.calendarPicker.getComponent("CalendarManager").hide(),this.calendarPicker.on("date-selected",this.onDateSelected,this),this.calendarPicker.on("date-cancel",this.onDateCancel,this));var n=this.mBackground.getChildByName("card_bg");n.setScale(0),cc.tween(n).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setCallBack:function(e){this.mCallBack=e},openCalendar:function(){var e=this.calendarPicker.getComponent("CalendarManager");this.myScrollView.active=!1,e.show()},onDateSelected:function(e){var t=e.detail;this.myBirthdayLabel.getComponent(cc.Label).string=t.year+"-"+t.month+"-"+t.day,this.calendarPicker.getComponent("CalendarManager").hide(),this.myScrollView.active=!0;var n=t.date;cc.log("Selected date:",n.toString())},onDateCancel:function(){this.myScrollView.active=!0,cc.log("Calendar cancelled")},onBackButtonDidPressed:function(e,t,a){var r=this;a||n.default.playButtonClickSound();var o=this.mBackground.getChildByName("card_bg");cc.tween(o).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){r.mCallBack&&r.mCallBack.myCloseEditBasicInfoDidPressed()}).start()},onConfirmButtonDidPressed:function(e,t,r){r||n.default.playButtonClickSound();var o=a.default.getUserObject(),i=o.email,c=this.myUsernameInput.getComponent(cc.EditBox).string,s=this.myEmailInput.getComponent(cc.EditBox).string;0!=c.length?0!=s.length?c!=o.fullName||s!=o.email?(this.showLableError(this.myError1Label,""),c!=o.fullName&&localStorage.setItem("unverified_username",c),s!=i?(localStorage.setItem("unverified_email",s),this.showVerificationPage("profileEmailVerify")):this.updateUserProfile(null)):this.showLableError(this.myError1Label,n.default.getLocalizedString(this.i18nJson,"noChange")):this.showLableError(this.myError1Label,n.default.getLocalizedString(this.i18nJson,"emailHolder")):this.showLableError(this.myError4Label,n.default.getLocalizedString(this.i18nJson,"usernameHolder"))},onDDLDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this.myGenderSelect.getChildByName("iconTriangle");this.myGenderDDL.active?r.angle=90:r.angle=-90,this.myGenderDDL.active=!this.myGenderDDL.active},onDDLOptionDidPressed:function(e,t,a){a||n.default.playButtonClickSound(),e.target.parent.name;var r=e.target.getChildByName("label").getComponent(cc.Label).string;this.myGenderSelect.getChildByName("lblGenderSelect").getComponent(cc.Label).string=r,this.myGenderSelect.getChildByName("iconTriangle").angle=90,this.myGenderDDL.active=!1},showLableError:function(e,t){this.myError1Label.active=!1,e&&(e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title"),this.mEmailLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"email"),this.mUsernameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"fullName"),this.mGenderLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"gender"),this.mBirthdayLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"birthday"),this.mConfirmLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirm")},showVerificationPage:function(e){var t=this;n.default.showLoadingView("",t),cc.resources.load("prefabs/verification/verification",cc.Prefab,function(a,r){if(a)return console.error("Failed to load prefab:",a),void n.default.hideLoadingView(t);null==t.myVerificationView&&(t.myVerificationView=cc.instantiate(r).getComponent("Verification"),t.updatePrefabSize()),n.default.hideLoadingView(t),t.myVerificationView.setCallBack(t),t.myVerificationView.updateView(t,e,"Register",""),t.node.addChild(t.myVerificationView.node),t.mBackground.active=!1})},onVerificationCloseButtonDidPressed:function(e,t,n){var a=this;return s(i().mark(function r(){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("click"),a.node.removeChild(a.myVerificationView.node),a.mBackground.active=!0,"editBasicInfo"!==e||!n){r.next=8;break}return r.next=6,a.updateUserProfile(n);case 6:r.next=9;break;case 8:t&&a.showLableError(a.myError1Label,t);case 9:case"end":return r.stop()}},r)}))()},updateUserProfile:function(e){var t=this;return s(i().mark(function o(){var c,s,l,u,d,h,m,f,p,g,y,v,b;return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(c=t,s=localStorage.getItem("token")){o.next=5;break}return t.showLableError(t.myError1Label,"Authentication token not found"),o.abrupt("return");case 5:if(n.default.showLoadingView("",c),o.prev=6,l=a.default.getUserObject(),u={},null==e){o.next=21;break}if(d=localStorage.getItem("unverified_email")){o.next=15;break}return n.default.hideLoadingView(c),t.showLableError(t.myError1Label,"Email not found"),o.abrupt("return");case 15:u.email=d,u.emailOtp=e,(h=localStorage.getItem("unverified_username"))&&h!==l.fullName&&(u.fullName=h),o.next=27;break;case 21:if((m=localStorage.getItem("unverified_username"))&&m!==l.fullName){o.next=26;break}return n.default.hideLoadingView(c),t.showLableError(t.myError1Label,"No changes to update"),o.abrupt("return");case 26:u.fullName=m;case 27:return o.next=29,r.default.updateProfile(s,u);case 29:if(f=o.sent,!n.default.isSessionExpired(f)){o.next=33;break}return n.default.handleSessionExpiration(f,t),o.abrupt("return");case 33:if(!n.default.isServerError(f)){o.next=36;break}return n.default.handleServerError(f,t),o.abrupt("return");case 36:200===f.status&&!1!==f.success?(n.default.hideLoadingView(c),console.log("response",f),p=a.default.getUserObject(),f.data&&f.data.player&&(f.data.player.email&&(p.email=f.data.player.email),void 0!==f.data.player.emailVerified&&(p.emailVerified=f.data.player.emailVerified),f.data.player.emailVerifiedAt&&(p.emailVerifiedAt=f.data.player.emailVerifiedAt),f.data.player.fullName&&(p.fullName=f.data.player.fullName),a.default.setUserObject(p)),null!=e&&(g=localStorage.getItem("unverified_email"))&&(t.myEmailInput.getComponent(cc.EditBox).string=g,localStorage.removeItem("unverified_email")),(y=localStorage.getItem("unverified_username"))&&(t.myUsernameInput.getComponent(cc.EditBox).string=y,localStorage.removeItem("unverified_username")),t.mCallBack&&t.mCallBack.myCloseEditBasicInfoDidPressed("","",!0,!0)):(n.default.hideLoadingView(c),v=f.message||"Failed to update profile",t.showLableError(t.myError1Label,v)),o.next=50;break;case 39:if(o.prev=39,o.t0=o.catch(6),!n.default.handleSessionExpiration(o.t0,t)){o.next=43;break}return o.abrupt("return");case 43:if(!n.default.handleServerError(o.t0,t)){o.next=46;break}return n.default.hideLoadingView(c),o.abrupt("return");case 46:n.default.hideLoadingView(c),console.error("Update profile error:",o.t0),b=o.t0.message||"Failed to update profile",t.showLableError(t.myError1Label,b);case 50:case"end":return o.stop()}},o,null,[[6,39]])}))()},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myVerificationView&&this.myVerificationView.init(0,0,e.width,e.height)}}),cc._RF.pop()},{"../Services/UserService":"UserService",SharedData:"SharedData",SharedFunction:"SharedFunction",SimpleBirthdayPicker:"SimpleBirthdayPicker"}],ForgotPassword:[function(e,t){"use strict";cc._RF.push(t,"5e1d4+qqeBLU7JbxWEKE4A/","ForgotPassword");var n=r(e("SharedFunction")),a=r(e("../Services/AuthServices"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function c(e){i(o,a,r,c,s,"next",e)}function s(e){i(o,a,r,c,s,"throw",e)}c(void 0)})}}r(e("SharedData")),cc.Class({extends:cc.Component,properties:{mCallBack:null,myVerificationView:null,myResetPasswordView:null,mBackground:{default:null,type:cc.Node},mPhoneNumber:{default:null,type:cc.Node},myErrorLabel:{default:null,type:cc.Node},mPasswordInput:{default:null,type:cc.Node},mConfirmPasswordInput:{default:null,type:cc.Node},mCodeInput:{default:null,type:cc.Node},mIsRequestedTac:!1,mRequestTacButton:{default:null,type:cc.Node},mCountDownTimer:{default:60,type:cc.Float},mPhoneNoLabel:{default:null,type:cc.Node},mCodeLabel:{default:null,type:cc.Node},mCodeHolderLabel:{default:null,type:cc.Node},mPasswordLabel:{default:null,type:cc.Node},mPasswordHolderLabel:{default:null,type:cc.Node},mConfirmPasswordLabel:{default:null,type:cc.Node},mConfirmPasswordHolderLabel:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mDescLabel:{default:null,type:cc.Node},mClickHereLabel:{default:null,type:cc.Node},mCustomerSupportLabel:{default:null,type:cc.Node},mNextLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},onDestroy:function(){},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},setCallBack:function(e,t){void 0===t&&(t="LOBBY"),this.mCallBack=e,this.isFrom=t},updateView:function(e){this.localizeUI(),this.mCallBack=e,this.mBackground.active=!0,this.myErrorLabel.active=!1,this.node.opacity=255;var t=this.mBackground.getChildByName("forgotpassword_bg");t.setScale(0),cc.tween(t).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},onRequestTacButtonDidPressed:function(){var e=this;return c(o().mark(function t(){var r,i;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.default.playButtonClickSound(),0!=(r=e.mPhoneNumber.getComponent(cc.EditBox).string).length){t.next=5;break}return e.showLableError(e.myErrorLabel,n.default.getLocalizedString(e.i18nJson,"mobileNoHolder")),t.abrupt("return");case 5:return n.default.showLoadingView("",e),t.prev=6,t.next=9,a.default.forgotPassword({username:r});case 9:(i=t.sent).success?e.showVerificationView(r,i.message,i):e.showLableError(e.myErrorLabel,i.message),n.default.hideLoadingView(e),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),e.showLableError(e.myErrorLabel,t.t0.message),n.default.hideLoadingView(e);case 18:case"end":return t.stop()}},t,null,[[6,14]])}))()},onVerificationCloseButtonDidPressed:function(e,t,n,a,r){this.node.removeChild(this.myVerificationView.node),console.log("callback"),"resetPassword"===e&&n?this.showResetPasswordView(n,a,r):this.mCallBack.onForgotPasswordViewCloseButtonDidPressed()},showResetPasswordView:function(e,t,a){var r=this;cc.resources.load("prefabs/resetpassword/resetpassword",cc.Prefab,function(o,i){if(o)return console.error("Failed to load resetpassword prefab:",o),void n.default.hideLoadingView(r);null==r.myResetPasswordView&&(r.myResetPasswordView=cc.instantiate(i).getComponent("ResetPassword"),r.updatePrefabSize(),r.myResetPasswordView.setCallBack(r)),r.myResetPasswordView.updateView(r,a,e,t),r.node.addChild(r.myResetPasswordView.node),r.mBackground.active=!1,n.default.hideLoadingView(r)})},showVerificationView:function(e,t,a){var r=this;cc.resources.load("prefabs/verification/verification",cc.Prefab,function(o,i){if(o)return console.error("Failed to load prefab:",o),void n.default.hideLoadingView(r);null==r.myVerificationView&&(r.myVerificationView=cc.instantiate(i).getComponent("Verification"),r.updatePrefabSize(),r.myVerificationView.setCallBack(r),r.myVerificationView.setForgetPasswordResponse(a),r.myVerificationView.setUsername(e)),r.myVerificationView.updateView(r,"forgotPasswordVerify","ForgotPassword",t),r.node.addChild(r.myVerificationView.node),r.mBackground.active=!1,n.default.hideLoadingView(r)})},onResetPasswordViewCloseButtonDidPressed:function(){this.myResetPasswordView&&this.node.removeChild(this.myResetPasswordView.node),this.mCallBack.onForgotPasswordViewCloseButtonDidPressed()},myCloseButtonDidPressed:function(){var e=this;n.default.playButtonClickSound();var t=this.mBackground.getChildByName("forgotpassword_bg");cc.tween(t).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){e.mCallBack&&e.mCallBack.onForgotPasswordViewCloseButtonDidPressed()}).start()},onSubmitButtonDidPressed:function(){var e=this;return c(o().mark(function t(){var a,r,i,c,s,l;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.default.playButtonClickSound(),a=e.mCodeInput.getChildByName("TEXT_LABEL").getComponent(cc.Label).string,r=e.mPasswordInput.getComponent(cc.EditBox).string,i=e.mConfirmPasswordInput.getComponent(cc.EditBox).string,!(a.length<4)){t.next=7;break}return n.default.showAlertView(n.default.getLocalizedString(e.i18nJson,"invalidCode"),e),t.abrupt("return");case 7:if(0!=r.length){t.next=10;break}return n.default.showAlertView(n.default.getLocalizedString(e.i18nJson,"newPasswordHolder"),e),t.abrupt("return");case 10:if(n.default.passwordRegexCheck(r)){t.next=13;break}return n.default.showAlertView(n.default.getLocalizedString(e.i18nJson,"invalidPassword"),e),t.abrupt("return");case 13:if(0!=i.length){t.next=16;break}return n.default.showAlertView(n.default.getLocalizedString(e.i18nJson,"confirmPasswordHolder"),e),t.abrupt("return");case 16:if(n.default.passwordRegexCheck(i)){t.next=19;break}return n.default.showAlertView(n.default.getLocalizedString(e.i18nJson,"invalidConfirmPassword"),e),t.abrupt("return");case 19:if(r==i){t.next=22;break}return n.default.showAlertView(n.default.getLocalizedString(e.i18nJson,"invalidBothPassword"),e),t.abrupt("return");case 22:return n.default.showLoadingView("",e),c=new ForgetPasswordScript,t.next=26,c.submitForgetPassword(e.mPhoneNumber,r,i,a);case 26:200==(s=t.sent).status&&(0==(l=s.result.submitForgetPassword).status?n.default.showAlertView(l.errorMessage,e):(e.mCodeInput.getChildByName("TEXT_LABEL").getComponent(cc.Label).string="",e.mPasswordInput.getComponent(cc.EditBox).string="",e.mConfirmPasswordInput.getComponent(cc.EditBox).string="",e.mCallBack&&e.mCallBack.callLoginApi("","",r,e.mPhoneNumber))),n.default.hideLoadingView(e);case 29:case"end":return t.stop()}},t)}))()},showLableError:function(e,t){this.myErrorLabel.active=!1,e&&(e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title"),this.mDescLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"description"),this.mClickHereLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"clickHere"),this.mCustomerSupportLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"customerSupport"),this.mNextLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"next")},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myVerificationView&&this.myVerificationView.init(0,0,e.width,e.height),this.myResetPasswordView&&this.myResetPasswordView.init(0,0,e.width,e.height)},onCustomerSupportClicked:function(){var e=this;n.default.playButtonClickSound(),this.closeForgotPasswordView(function(){e.closeLoginView(function(){e.openCustomerSupport()})})},closeForgotPasswordView:function(e){var t=this,n=this.mBackground.getChildByName("forgotpassword_bg");cc.tween(n).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){t.node.parent&&t.node.parent.removeChild(t.node),e&&e()}).start()},closeLoginView:function(e){if(this.mCallBack&&this.mCallBack.node&&"function"==typeof this.mCallBack.onForgotPasswordViewCloseButtonDidPressed&&this.mCallBack.node&&this.mCallBack.node.parent){var t=this.mCallBack.node,n=this.mCallBack.myLoginBG;return n&&cc.tween(n).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),void cc.tween(t).delay(1/6).to(1/6,{opacity:0}).call(function(){t.parent&&t.parent.removeChild(t),e&&e()}).start()}e&&e()},openCustomerSupport:function(){if(this.mCallBack){if("function"==typeof this.mCallBack.onCustomerSupportClicked)return void this.mCallBack.onCustomerSupportClicked();if("function"==typeof this.mCallBack.onSupportButtonDidPressed)return this.mCallBack.myBannerView&&this.mCallBack.myBannerView.node&&this.mCallBack.myBannerView.node.active&&this.mCallBack.myBannerView.hide(),void this.mCallBack.onSupportButtonDidPressed()}var e=this.findLobbyComponent();e?(e.myBannerView&&e.myBannerView.node&&e.myBannerView.node.active&&e.myBannerView.hide(),"function"==typeof e.onCustomerSupportClicked?e.onCustomerSupportClicked():"function"==typeof e.onSupportButtonDidPressed?e.onSupportButtonDidPressed():console.error("Lobby component found but does not have onCustomerSupportClicked or onSupportButtonDidPressed method")):console.error("Lobby component not found in scene and callback does not have required method")},findLobbyComponent:function(){var e=cc.director.getScene();return e?function t(n){if(n!==e){var a=n.getComponent("Lobby")||n.getComponent("lobby");if(a)return a}if(n.children&&n.children.length>0)for(var r=0;r<n.children.length;r++){var o=t(n.children[r]);if(o)return o}return null}(e):null}}),cc._RF.pop()},{"../Services/AuthServices":"AuthServices",SharedData:"SharedData",SharedFunction:"SharedFunction"}],GIFLoadInit:[function(e,t,n){"use strict";cc._RF.push(t,"0421d9/659B3LNCVV1HIMfm","GIFLoadInit"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GIFParser");cc.assetManager.factory.register(".gif",function(e,t,n,a){console.log("Factory",e,t);var r=new cc.Asset;r._nativeAsset=t,a&&a(null,r)}),cc.assetManager.downloader.register(".gif",function(e,t,n){console.log("downloader",e),cc.assetManager.downloader._downloaders[".bin"](e,t,function(a,r){a||"string"!=typeof r?n(a,r):cc.assetManager.parser.parse(e,r,".bin",t,n)})}),cc.assetManager.parser.register(".gif",function(e,t,n){console.log("parser",e),(new a.GIFParser).handle(e,n)}),cc._RF.pop()},{"./GIFParser":"GIFParser"}],GIFParser:[function(e,t,n){"use strict";cc._RF.push(t,"bd3830c22NCQZ/PWJA9WQRs","GIFParser"),Object.defineProperty(n,"__esModule",{value:!0}),n.GIFParser=n.FileHead=n.FileType=void 0;var a,r=e("./LZW");(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PNG=1]="PNG",e[e.JPG=2]="JPG",e[e.GIF=3]="GIF",e[e.WEBP=4]="WEBP"})(a=n.FileType||(n.FileType={}));var o=function(){function e(){}return e.IMAGE_PNG="89504e47",e.IMAGE_JPG="ffd8ff",e.IMAGE_GIF="474946",e.RIFF="52494646",e.WEBP_RIFF=e.RIFF,e.WEBP_WEBP="57454250",e}();n.FileHead=o;var i=function(){function e(){this._offset=0,this._info={header:"",frames:[],comment:""},this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null,this.id="GIF",this.async=!0}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(e){this.clear(),this._buffer=e,this._view=new Uint8Array(e)},enumerable:!1,configurable:!0}),e.prototype.handle=function(e,t){this.buffer=e,this.getHeader(),this.getScrDesc(),this.getTexture(),0==this._spriteFrames.length?t(new Error("gif\u52a0\u8f7d\u5931\u8d25,\u5e27\u957f\u5ea6\u4e3a0")):t(null,{delays:this._delays,spriteFrames:this._spriteFrames,length:this._info.frames.length})},e.detectFormat=function(e){return-1!=e.indexOf(o.IMAGE_GIF)?a.GIF:-1!=e.indexOf(o.IMAGE_PNG)?a.PNG:-1!=e.indexOf(o.IMAGE_JPG)?a.JPG:-1!=e.indexOf(o.WEBP_RIFF)&&-1!=e.indexOf(o.WEBP_WEBP)?a.WEBP:a.UNKNOWN},e.bytes2HexString=function(e){for(var t="",n=0;n<e.length;n++){var a,r=e[n];1==(a=r<0?(255+r+1).toString(16):r.toString(16)).length&&(a="0"+a),t+=a}return t},e.prototype.getTexture=function(){for(var e=0,t=0,n=this._info.frames;t<n.length;t++){var a=n[t];this.decodeFrame2Texture(a,e++)}},e.prototype.getSpriteFrame=function(e){return this._spriteFrames[e]?this._spriteFrames[e]:this.decodeFrame2Texture(this._info.frames[e],e)},e.prototype.decodeFrame=function(e){var t=this,n=this._context.getImageData(e.img.x,e.img.y,e.img.w,e.img.h);return e.img.m?this._tab=e.img.colorTab:this._tab=this._info.colorTab,r.default.decode(e.img.srcBuf,e.img.codeSize).forEach(function(a,r){n.data[4*r]=t._tab[3*a],n.data[4*r+1]=t._tab[3*a+1],n.data[4*r+2]=t._tab[3*a+2],n.data[4*r+3]=255,e.ctrl.t&&a==e.ctrl.tranIndex&&(n.data[4*r+3]=0)}),n},e.prototype.mergeFrames=function(e,t){var n=t;if(e)for(var a=0;a<n.data.length;a+=4)0==n.data[a+3]&&(n.data[a]=this._lastData.data[a],n.data[a+1]=this._lastData.data[a+1],n.data[a+2]=this._lastData.data[a+2],n.data[a+3]=this._lastData.data[a+3]);return n},e.prototype.dataUrl2SpriteFrame=function(e){var t=new cc.Texture2D,n=new cc.SpriteFrame,a=new Image;return a.src=e,t.initWithElement(a),n.setTexture(t),n},e.prototype.date2SpriteFrame=function(e,t,n){var a=new cc.RenderTexture,r=new cc.SpriteFrame;return a.initWithData(e.data,cc.Texture2D.PixelFormat.RGBA8888,t,n),r.setTexture(a),r},e.prototype.putImageDataJSB=function(e,t,n,a){var r=this,o=function(){for(var a=0;a<e.height;a++)for(var o=0;o<e.width;o++){var i=4*a*e.width+4*o,c=4*(a+n)*r._lastData.width+4*(o+t);0!=e.data[i+3]&&(r._lastData.data[c]=e.data[i],r._lastData.data[c+1]=e.data[i+1],r._lastData.data[c+2]=e.data[i+2],r._lastData.data[c+3]=e.data[i+3])}},i=function(){for(var a=0;a<r._lastData.height;a++)for(var o=0;o<r._lastData.width;o++){var i=4*a*r._lastData.width+4*o,c=4*(a-n)*e.width+4*(o-t),s=!1;(o<t||o>t+e.width)&&(s=!0),(a<n||a>n+e.height)&&(s=!0),s?(r._lastData.data[i+0]=0,r._lastData.data[i+1]=0,r._lastData.data[i+2]=0,r._lastData.data[i+3]=0):(r._lastData.data[i+0]=e.data[c+0],r._lastData.data[i+1]=e.data[c+1],r._lastData.data[i+2]=e.data[c+2],r._lastData.data[i+3]=e.data[c+3])}};4==e.data[0]&&0==e.data[1]&&0==e.data[2]&&0==e.data[3]||(1==a.ctrl.disp||0==a.ctrl.disp?o():2==a.ctrl.disp?i():function(){for(var t=0,n=0;n<e.height;n+=2){for(var a=0,r=0;r<e.width;r++){var o=4*n*e.width+4*r;0==e.data[o+3]&&a++}if(a/e.width>.1&&t++,t/(e.height/2)>.6)return!0}return!1}()?i():o())},e.prototype.putImageDataWeb=function(e,t){var n;if(1==t.ctrl.disp||0==t.ctrl.disp){this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h);var a=this._context.getImageData(0,0,this._canvas.width,this._canvas.height),r=this._lastData;n=this.mergeFrames(r,a)}else this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h),n=this._context.getImageData(0,0,this._canvas.width,this._canvas.height);return this._context.putImageData(n,0,0),this._lastData=n,this._canvas.toDataURL()},e.prototype.decodeFrame2Texture=function(e,t){this._context||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=e.img.w,this._canvas.height=e.img.h);var n=this.decodeFrame(e);this._delays[t]=e.ctrl.delay;var a=this.putImageDataWeb(n,e);return this._spriteFrames[t]=this.dataUrl2SpriteFrame(a),this._spriteFrames[t]},e.prototype.read=function(e){return this._view.slice(this._offset,this._offset+=e)},e.prototype.getHeader=function(){var e=this;this._info.header="",this.read(6).forEach(function(t){e._info.header+=String.fromCharCode(t)})},e.prototype.getScrDesc=function(){var e=this.read(7);this._info.w=e[0]+(e[1]<<8),this._info.h=e[2]+(e[3]<<8),this._info.m=1&e[4]>>7,this._info.cr=7&e[4]>>4,this._info.s=1&e[4]>>3,this._info.pixel=7&e[4],this._info.bgColor=e[5],this._info.radio=e[6],this._info.m&&(this._info.colorTab=this.read(3*(2<<this._info.pixel))),this.decode()},e.prototype.decode=function(){var e=[],t=this.read(1);switch(t[0]){case 33:this.extension();break;case 44:for(t=this.read(9),this._frame.img={x:t[0]+(t[1]<<8),y:t[2]+(t[3]<<8),w:t[4]+(t[5]<<8),h:t[6]+(t[7]<<8),colorTab:0},this._frame.img.m=1&t[8]>>7,this._frame.img.i=1&t[8]>>6,this._frame.img.s=1&t[8]>>5,this._frame.img.r=3&t[8]>>3,this._frame.img.pixel=7&t[8],this._frame.img.m&&(this._frame.img.colorTab=this.read(3*(2<<this._frame.img.pixel))),this._frame.img.codeSize=this.read(1)[0],e=[];;){if(!(t=this.read(1))[0]){this._frame.img.srcBuf=e,this.decode();break}this.read(t[0]).forEach(function(t){e.push(t)})}}},e.prototype.extension=function(){var e=this,t=this.read(1);switch(t[0]){case 255:if(11!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");for(this._info.appVersion="",this.read(11).forEach(function(t){e._info.appVersion+=String.fromCharCode(t)});;){if(!(t=this.read(1))[0]){this.decode();break}this.read(t[0])}break;case 249:if(4!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");if(t=this.read(4),this._frame={},this._frame.ctrl={disp:7&t[0]>>2,i:1&t[0]>>1,t:1&t[0],delay:t[1]+(t[2]<<8),tranIndex:t[3]},this._info.frames.push(this._frame),0!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");this.decode();break;case 254:(t=this.read(1))[0]&&(this.read(t[0]).forEach(function(t){e._info.comment+=String.fromCharCode(t)}),0==this.read(1)[0]&&this.decode())}},e.prototype.clear=function(){this._tab=null,this._view=null,this._frame=null,this._offset=0,this._info={header:"",frames:[],comment:""},this._lastData=null,this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null},e}();n.GIFParser=i,cc._RF.pop()},{"./LZW":"LZW"}],GameContainer:[function(e,t){"use strict";cc._RF.push(t,"2692f0fCG5BApiVju8pJ4Vx","GameContainer");var n=r(e("SharedFunction")),a=r(e("../Services/GameService"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}var c=e("SharedData");cc.Class({extends:cc.Component,properties:{myGameImg:{default:null,type:cc.Node},myGameLabel:{default:null,type:cc.Node},myGameWebView:null},onLoad:function(){},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.gameData=n,this.mCallBack=a;var r=this;if(this.myGameLabel.getComponent(cc.Label).string=this.gameData.name,this.gameData.thumbnailUrl){var o="https://api.codetabs.com/v1/proxy?quest="+encodeURIComponent(this.gameData.thumbnailUrl);cc.assetManager.loadRemote(o,function(e,t){if(e)console.error("Failed to load image:",e);else{var n=new cc.SpriteFrame(t),a=r.myGameImg.getComponent(cc.Sprite);a&&(a.type=cc.Sprite.Type.SIMPLE,r.myGameImg.getComponent(cc.Sprite).spriteFrame=n,r.fitImageToNode(t.width,t.height))}})}},fitImageToNode:function(e,t){var n=this.myGameImg,a=e,r=t;if(a>210||r>118){var o=210/a,i=118/r,c=Math.min(o,i);a*=c,r*=c}n.width=a,n.height=r},onclick:function(){if(console.log("GameContainer: onclick",this.gameData),n.default.playButtonClickSound(),n.default.showLoadingView("",this.mCallBack||this),!this.gameData||!this.gameData._id)return console.error("GameContainer: Game data or game ID is missing"),void n.default.hideLoadingView(this.mCallBack||this);var e=localStorage.getItem("token");if(!e)return console.error("GameContainer: User is not logged in"),n.default.hideLoadingView(this.mCallBack||this),void(this.mCallBack&&"function"==typeof this.mCallBack.onLoginButtonDidPressed&&this.mCallBack.onLoginButtonDidPressed());var t=n.default.isMobile()?"mobile":"desktop",a=c.getCurrentLanguage()||"en";this.launchGame(this.gameData._id,a,t,e)},launchGame:function(e,t,r,c){var s,l=this;return(s=o().mark(function i(){var s;return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,a.default.launchGame(e,{lang:t,deviceType:r},c);case 3:if(s=o.sent,!n.default.isSessionExpired(s)){o.next=7;break}return n.default.handleSessionExpiration(s,l.mCallBack||l),o.abrupt("return");case 7:if(!n.default.isServerError(s)){o.next=10;break}return n.default.handleServerError(s,l.mCallBack||l),o.abrupt("return");case 10:s.success&&s.launchUrl?(n.default.hideLoadingView(l.mCallBack||l),l.loadGameWebView(s.launchUrl)):(console.error("GameContainer: Failed to launch game",s.message),n.default.hideLoadingView(l.mCallBack||l)),o.next=22;break;case 13:if(o.prev=13,o.t0=o.catch(0),!n.default.handleSessionExpiration(o.t0,l.mCallBack||l)){o.next=17;break}return o.abrupt("return");case 17:if(!n.default.handleServerError(o.t0,l.mCallBack||l)){o.next=20;break}return n.default.hideLoadingView(l.mCallBack||l),o.abrupt("return");case 20:console.error("GameContainer: Error launching game",o.t0),n.default.hideLoadingView(l.mCallBack||l);case 22:case"end":return o.stop()}},i,null,[[0,13]])}),function(){var e=this,t=arguments;return new Promise(function(n,a){var r=s.apply(e,t);function o(e){i(r,n,a,o,c,"next",e)}function c(e){i(r,n,a,o,c,"throw",e)}o(void 0)})})()},loadGameWebView:function(e){var t=this;cc.resources.load("prefabs/game/GameWebView",cc.Prefab,function(n,a){if(n)console.error("GameContainer: Failed to load GameWebView prefab:",n);else{null==t.myGameWebView&&(t.myGameWebView=cc.instantiate(a).getComponent("GameWebView"),t.myGameWebView.updatePrefabSize()),t.myGameWebView.init(e,t.mCallBack||t);var r=t.mCallBack?t.mCallBack.node:t.node.parent;r?r.addChild(t.myGameWebView.node):cc.director.getScene().addChild(t.myGameWebView.node)}})}}),cc._RF.pop()},{"../Services/GameService":"GameService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],GameGroup:[function(e,t){"use strict";cc._RF.push(t,"1be052pJmBPFboIz0AnBBN2","GameGroup");var n=a(e("SharedFunction"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("SharedData")),cc.Class({extends:cc.Component,properties:{gameGroupIcon:{default:null,type:cc.Node},gameGroupLabel:{default:null,type:cc.Node},selectedBg:{default:null,type:cc.Node}},onLoad:function(){},init:function(e,t,n,a){var r=this;this.node.x=e,this.node.y=t,this.data=n,this.mCallBack=a,this.node.name=n.code,this.gameGroupLabel.getComponent(cc.Label).string=n.name,-43==t?(this.onClick(null,null,!0),this.gameGroupLabel.getComponent(cc.Label).fontSize=22):(this.selectedBg&&(this.selectedBg.active=!1),this.gameGroupLabel.getComponent(cc.Label).node.color=cc.Color.WHITE,cc.loader.loadRes("images/lobby/"+this.data.code+"Off.png",cc.SpriteFrame,function(e,t){r.gameGroupIcon.getComponent(cc.Sprite).spriteFrame=t}))},onClick:function(e,t,a){var r=this;a||n.default.playButtonClickSound(),this.mCallBack.onGameGroupButtonDidPressed(this.data),this.selectedBg&&(this.selectedBg.active=!0),this.gameGroupLabel.getComponent(cc.Label).node.color=cc.Color.BLACK,this.gameGroupLabel.getComponent(cc.Label).fontSize=22,cc.loader.loadRes("images/lobby/"+this.data.code+"On.png",cc.SpriteFrame,function(e,t){r.gameGroupIcon.getComponent(cc.Sprite).spriteFrame=t})},unClick:function(){var e=this;this.selectedBg&&(this.selectedBg.active=!1),this.gameGroupLabel.getComponent(cc.Label).node.color=cc.Color.WHITE,this.gameGroupLabel.getComponent(cc.Label).fontSize=18,cc.loader.loadRes("images/lobby/"+this.data.code+"Off.png",cc.SpriteFrame,function(t,n){e.gameGroupIcon.getComponent(cc.Sprite).spriteFrame=n})}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],GameList:[function(e,t){"use strict";cc._RF.push(t,"17f3bscjDxFbIO34OW2kqaB","GameList");var n=o(e("SharedFunction")),a=o(e("SharedData")),r=o(e("../Services/GameService"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}cc.Class({extends:cc.Component,properties:{mCallBack:null,mCurrentDeveloper:"",mLastSearch:"",mShowingGames:[],createdLogos:[],createdGames:[],mySearchInput:{default:null,type:cc.Node},myDeveloperLabel:{default:null,type:cc.Node},myTotalLabel:{default:null,type:cc.Node},myLogoScrollView:{default:null,type:cc.Node},myLogoScrollViewContent:{default:null,type:cc.Node},myGameScrollView:{default:null,type:cc.Node},myGameScrollViewContent:{default:null,type:cc.Node},mLogoTabPrefab:{default:null,type:cc.Prefab},mGamePrefab:{default:null,type:cc.Prefab},i18nJson:{default:null,type:cc.JsonAsset},mSearchGameNameLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a},updateView:function(e,t,n){this.localizeUI(),this.mCallBack=n,this.developerData=e,this.providerData=t,this.mCurrentDeveloper="",this.mLastSearch="",this.mShowingGames=[],this.mySearchInput.getComponent(cc.EditBox).string="",this.myDeveloperLabel.getComponent(cc.Label).string=this.developerData.name,this.node.active=!0,this.drawDeveloperLogo();var a=this.node.getComponent(cc.Widget);a.left=this.node.width,a.right=-1*this.node.width,cc.tween(a).to(1/6,{left:0,right:0}).start()},setCallBack:function(e){this.mCallBack=e},drawDeveloperLogo:function(){var e=a.default.getGameCategories();for(var t in e){var n=e[t];if(n.code==this.providerData.code){var r=n.developers;for(var o in r){var i=r[o],c=new cc.instantiate(this.mLogoTabPrefab).getComponent("DeveloperLogo");c.init(0,-34-84*parseInt(o),i,this),this.myLogoScrollViewContent.addChild(c.node),this.createdLogos.push(c)}this.myLogoScrollViewContent.height=68+84*(r.length-1);break}}},myBackButtonDidPressed:function(e,t,a){var r=this;a||n.default.playButtonClickSound();var o=this.node.getComponent(cc.Widget);cc.tween(o).to(1/6,{left:this.node.width,right:-1*this.node.width}).call(function(){r.createdLogos.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),r.createdLogos=[]}).start(),this.mCallBack&&this.mCallBack.onGameListBackButtonDidPressed()},onDeveloperLogoButtonDidPressed:function(e,t,a,r){a||n.default.playButtonClickSound(),this.createdLogos.forEach(function(e){e&&e.isValid&&e.unClick()}),this.callCategoriesWithGamesApi({status:"active",categoryId:this.providerData._id,developerId:r._id}),this.mCurrentDeveloper=t},onSearchButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this.mySearchInput.getComponent(cc.EditBox).string;if(r!=this.mLastSearch){this.createdGames.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),this.createdGames=[];var o=this.mShowingGames.filter(function(e){return e.name.includes(r)});this.myTotalLabel.getComponent(cc.Label).string=n.default.formatString(n.default.getLocalizedString(this.i18nJson,"totalGame"),o.length);var i=-89;for(var c in o){var s=o[c],l=226*(((parseInt(c)+1)%4==0?4:(parseInt(c)+1)%4)-1)-341,u=-89-160*(Math.ceil((parseInt(c)+1)/4)-1),d=new cc.instantiate(this.mGamePrefab).getComponent("GameContainer");d.init(l,u,s,this),i=u,this.myGameScrollViewContent.addChild(d.node),this.createdGames.push(d)}this.myGameScrollViewContent.height=-1*i+80,this.myGameScrollView.getComponent(cc.ScrollView).scrollToTop(0),this.mLastSearch=r}},callCategoriesWithGamesApi:function(e){var t,a=this;return(t=i().mark(function t(){var o,c,s,l,u,d,h,m,f,p,g;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.default.getCategoriesWithGames(e);case 3:if(200==(o=t.sent).status&&0!=(c=o.data).length){for(h in a.createdGames.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),a.createdGames=[],s=c[0],l=s.pagination,u=s.games,d=-89,a.myTotalLabel.getComponent(cc.Label).string=n.default.formatString(n.default.getLocalizedString(a.i18nJson,"totalGame"),l.total),a.mShowingGames=u,u)m=u[h],f=226*(((parseInt(h)+1)%4==0?4:(parseInt(h)+1)%4)-1)-341,p=-89-160*(Math.ceil((parseInt(h)+1)/4)-1),(g=new cc.instantiate(a.mGamePrefab).getComponent("GameContainer")).init(f,p,m,a),d=p,a.myGameScrollViewContent.addChild(g.node),a.createdGames.push(g);a.myGameScrollViewContent.height=-1*d+80,a.myGameScrollView.getComponent(cc.ScrollView).scrollToTop(0)}t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}),function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function i(e){c(o,a,r,i,s,"next",e)}function s(e){c(o,a,r,i,s,"throw",e)}i(void 0)})})()},localizeUI:function(){this.myTotalLabel.getComponent(cc.Label).string=n.default.formatString(n.default.getLocalizedString(this.i18nJson,"totalGame"),0),this.mSearchGameNameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"searchGameName")},updatePrefabSize:function(){cc.view.getVisibleSize()}}),cc._RF.pop()},{"../Services/GameService":"GameService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],GameService:[function(e,t,n){"use strict";cc._RF.push(t,"362ecusv1tJiI5WAo6n6T/5","GameService");var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(c){o=[6,c],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GameService=void 0;var o=e("./NetworkService"),i=function(){function e(){}return e.getDashboard=function(){var e,t,n;return a(this,void 0,Promise,function(){var a,i,c;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.get(this.DASHBOARD_ENDPOINT,void 0,{headers:{"Content-Type":"application/json"}})];case 1:return a=r.sent(),i=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data,[2,{status:a.status,success:null===(t=a.data)||void 0===t?void 0:t.success,message:(null===(n=a.data)||void 0===n?void 0:n.message)||a.message,data:i,tenantId:null==i?void 0:i.tenantId,tenantName:null==i?void 0:i.tenantName,settlementMode:null==i?void 0:i.settlementMode,settings:null==i?void 0:i.settings}];case 2:throw c=r.sent(),console.error("GameService.getDashboard error:",c),{status:c.status||500,data:c.data||null,message:c.message||"Failed to fetch dashboard settings",error:c};case 3:return[2]}})})},e.getDevelopers=function(e){var t,n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},(null==e?void 0:e.status)&&(a.status=e.status),[4,o.NetworkService.get(this.DEVELOPERS_ENDPOINT,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(t=s.data)||void 0===t?void 0:t.data)||[],[2,{status:s.status,success:null===(n=s.data)||void 0===n?void 0:n.success,message:(null===(i=s.data)||void 0===i?void 0:i.message)||s.message,data:l,developers:l,count:null===(c=s.data)||void 0===c?void 0:c.count}];case 2:throw u=r.sent(),console.error("GameService.getDevelopers error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch developers",error:u};case 3:return[2]}})})},e.getDeveloperById=function(e){var t,n,i;return a(this,void 0,Promise,function(){var a,c,s,l;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=this.DEVELOPERS_ENDPOINT+"/"+e,[4,o.NetworkService.get(a,void 0,{headers:{"Content-Type":"application/json"}})];case 1:return c=r.sent(),s=null===(t=c.data)||void 0===t?void 0:t.data,[2,{status:c.status,success:null===(n=c.data)||void 0===n?void 0:n.success,message:(null===(i=c.data)||void 0===i?void 0:i.message)||c.message,data:s,developer:s}];case 2:throw l=r.sent(),console.error("GameService.getDeveloperById error:",l),{status:l.status||500,data:l.data||null,message:l.message||"Failed to fetch developer",error:l};case 3:return[2]}})})},e.getCategories=function(e){var t,n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==(null==e?void 0:e.topLevel)&&(a.topLevel=e.topLevel),(null==e?void 0:e.status)&&(a.status=e.status),[4,o.NetworkService.get(this.CATEGORIES_ENDPOINT,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(t=s.data)||void 0===t?void 0:t.data)||[],[2,{status:s.status,success:null===(n=s.data)||void 0===n?void 0:n.success,message:(null===(i=s.data)||void 0===i?void 0:i.message)||s.message,data:l,categories:l,count:null===(c=s.data)||void 0===c?void 0:c.count}];case 2:throw u=r.sent(),console.error("GameService.getCategories error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch categories",error:u};case 3:return[2]}})})},e.getCategoriesWithProviders=function(e){var t,n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},(null==e?void 0:e.status)&&(a.status=e.status),(null==e?void 0:e.environment)&&(a.environment=e.environment),[4,o.NetworkService.get(this.CATEGORIES_WITH_PROVIDERS_ENDPOINT,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(t=s.data)||void 0===t?void 0:t.data)||[],[2,{status:s.status,success:null===(n=s.data)||void 0===n?void 0:n.success,message:(null===(i=s.data)||void 0===i?void 0:i.message)||s.message,data:l,categories:l,count:null===(c=s.data)||void 0===c?void 0:c.count}];case 2:throw u=r.sent(),console.error("GameService.getCategoriesWithProviders error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch categories with providers",error:u};case 3:return[2]}})})},e.getCategoriesWithGames=function(e){var t,n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},(null==e?void 0:e.status)&&(a.status=e.status),(null==e?void 0:e.environment)&&(a.environment=e.environment),(null==e?void 0:e.developerId)&&(a.developerId=e.developerId),(null==e?void 0:e.categoryId)&&(a.categoryId=e.categoryId),[4,o.NetworkService.get(this.CATEGORIES_WITH_GAMES_ENDPOINT,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(t=s.data)||void 0===t?void 0:t.data)||[],[2,{status:s.status,success:null===(n=s.data)||void 0===n?void 0:n.success,message:(null===(i=s.data)||void 0===i?void 0:i.message)||s.message,data:l,categories:l,count:null===(c=s.data)||void 0===c?void 0:c.count}];case 2:throw u=r.sent(),console.error("GameService.getCategoriesWithGames error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch categories with games",error:u};case 3:return[2]}})})},e.getCategoryById=function(e){var t,n,i;return a(this,void 0,Promise,function(){var a,c,s,l;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=this.CATEGORIES_ENDPOINT+"/"+e,[4,o.NetworkService.get(a,void 0,{headers:{"Content-Type":"application/json"}})];case 1:return c=r.sent(),s=null===(t=c.data)||void 0===t?void 0:t.data,[2,{status:c.status,success:null===(n=c.data)||void 0===n?void 0:n.success,message:(null===(i=c.data)||void 0===i?void 0:i.message)||c.message,data:s,category:s}];case 2:throw l=r.sent(),console.error("GameService.getCategoryById error:",l),{status:l.status||500,data:l.data||null,message:l.message||"Failed to fetch category",error:l};case 3:return[2]}})})},e.getTags=function(e){var t,n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==(null==e?void 0:e.code)&&(a.code=e.code),(null==e?void 0:e.status)&&(a.status=e.status),[4,o.NetworkService.get(this.TAGS_ENDPOINT,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(t=s.data)||void 0===t?void 0:t.data)||[],[2,{status:s.status,success:null===(n=s.data)||void 0===n?void 0:n.success,message:(null===(i=s.data)||void 0===i?void 0:i.message)||s.message,data:l,tags:l,count:null===(c=s.data)||void 0===c?void 0:c.count}];case 2:throw u=r.sent(),console.error("GameService.getTags error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch tags",error:u};case 3:return[2]}})})},e.getTagById=function(e){var t,n,i;return a(this,void 0,Promise,function(){var a,c,s,l;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=this.TAGS_ENDPOINT+"/"+e,[4,o.NetworkService.get(a,void 0,{headers:{"Content-Type":"application/json"}})];case 1:return c=r.sent(),s=null===(t=c.data)||void 0===t?void 0:t.data,[2,{status:c.status,success:null===(n=c.data)||void 0===n?void 0:n.success,message:(null===(i=c.data)||void 0===i?void 0:i.message)||c.message,data:s,tag:s}];case 2:throw l=r.sent(),console.error("GameService.getTagById error:",l),{status:l.status||500,data:l.data||null,message:l.message||"Failed to fetch tag",error:l};case 3:return[2]}})})},e.getGames=function(e){var t,n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==(null==e?void 0:e.status)&&(a.status=e.status),void 0!==(null==e?void 0:e.providerId)&&(a.providerId=e.providerId),void 0!==(null==e?void 0:e.categoryId)&&(a.categoryId=e.categoryId),void 0!==(null==e?void 0:e.developerId)&&(a.developerId=e.developerId),void 0!==(null==e?void 0:e.search)&&(a.search=e.search),void 0!==(null==e?void 0:e.page)&&(a.page=e.page),void 0!==(null==e?void 0:e.limit)&&(a.limit=e.limit),void 0!==(null==e?void 0:e.sort)&&(a.sort=e.sort),void 0!==(null==e?void 0:e.order)&&(a.order=e.order),[4,o.NetworkService.get(this.GAMES_ENDPOINT,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(t=s.data)||void 0===t?void 0:t.data)||[],[2,{status:s.status,success:null===(n=s.data)||void 0===n?void 0:n.success,message:(null===(i=s.data)||void 0===i?void 0:i.message)||s.message,data:l,games:l,pagination:null===(c=s.data)||void 0===c?void 0:c.pagination}];case 2:throw u=r.sent(),console.error("GameService.getGames error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch games",error:u};case 3:return[2]}})})},e.getGamesByCategory=function(e,t){var n,i,c,s,l;return a(this,void 0,Promise,function(){var a,u,d,h,m;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==(null==t?void 0:t.status)&&(a.status=t.status),void 0!==(null==t?void 0:t.page)&&(a.page=t.page),void 0!==(null==t?void 0:t.limit)&&(a.limit=t.limit),u=this.GAMES_ENDPOINT+"/category/"+e,[4,o.NetworkService.get(u,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return d=r.sent(),h=(null===(n=d.data)||void 0===n?void 0:n.data)||[],[2,{status:d.status,success:null===(i=d.data)||void 0===i?void 0:i.success,message:(null===(c=d.data)||void 0===c?void 0:c.message)||d.message,data:h,games:h,category:null===(s=d.data)||void 0===s?void 0:s.category,pagination:null===(l=d.data)||void 0===l?void 0:l.pagination}];case 2:throw m=r.sent(),console.error("GameService.getGamesByCategory error:",m),{status:m.status||500,data:m.data||null,message:m.message||"Failed to fetch games by category",error:m};case 3:return[2]}})})},e.getGamesByDeveloper=function(e,t){var n,i,c,s,l;return a(this,void 0,Promise,function(){var a,u,d,h,m;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==(null==t?void 0:t.status)&&(a.status=t.status),void 0!==(null==t?void 0:t.page)&&(a.page=t.page),void 0!==(null==t?void 0:t.limit)&&(a.limit=t.limit),u=this.GAMES_ENDPOINT+"/developer/"+e,[4,o.NetworkService.get(u,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return d=r.sent(),h=(null===(n=d.data)||void 0===n?void 0:n.data)||[],[2,{status:d.status,success:null===(i=d.data)||void 0===i?void 0:i.success,message:(null===(c=d.data)||void 0===c?void 0:c.message)||d.message,data:h,games:h,developer:null===(s=d.data)||void 0===s?void 0:s.developer,pagination:null===(l=d.data)||void 0===l?void 0:l.pagination}];case 2:throw m=r.sent(),console.error("GameService.getGamesByDeveloper error:",m),{status:m.status||500,data:m.data||null,message:m.message||"Failed to fetch games by developer",error:m};case 3:return[2]}})})},e.getGameById=function(e){var t,n,i;return a(this,void 0,Promise,function(){var a,c,s,l;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=this.GAMES_ENDPOINT+"/"+e,[4,o.NetworkService.get(a,void 0,{headers:{"Content-Type":"application/json"}})];case 1:return c=r.sent(),s=null===(t=c.data)||void 0===t?void 0:t.data,[2,{status:c.status,success:null===(n=c.data)||void 0===n?void 0:n.success,message:(null===(i=c.data)||void 0===i?void 0:i.message)||c.message,data:s,game:s}];case 2:throw l=r.sent(),console.error("GameService.getGameById error:",l),{status:l.status||500,data:l.data||null,message:l.message||"Failed to fetch game",error:l};case 3:return[2]}})})},e.getHomepageData=function(){var e,t,n;return a(this,void 0,Promise,function(){var a,i,c;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.get(this.HOMEPAGE_DATA_ENDPOINT,void 0,{headers:{"Content-Type":"application/json"}})];case 1:return a=r.sent(),i=null===(e=a.data)||void 0===e?void 0:e.data,[2,{status:a.status,success:null===(t=a.data)||void 0===t?void 0:t.success,message:(null===(n=a.data)||void 0===n?void 0:n.message)||a.message,data:i,categories:null==i?void 0:i.categories,hotGames:null==i?void 0:i.hotGames}];case 2:throw c=r.sent(),console.error("GameService.getHomepageData error:",c),{status:c.status||500,data:c.data||null,message:c.message||"Failed to fetch homepage data",error:c};case 3:return[2]}})})},e.getGamesByTag=function(e,t){var n,i,c,s,l;return a(this,void 0,Promise,function(){var a,u,d,h,m;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==(null==t?void 0:t.status)&&(a.status=t.status),void 0!==(null==t?void 0:t.page)&&(a.page=t.page),void 0!==(null==t?void 0:t.limit)&&(a.limit=t.limit),u=this.GAMES_ENDPOINT+"/tags/"+e,[4,o.NetworkService.get(u,Object.keys(a).length>0?a:void 0,{headers:{"Content-Type":"application/json"}})];case 1:return d=r.sent(),h=(null===(n=d.data)||void 0===n?void 0:n.data)||[],[2,{status:d.status,success:null===(i=d.data)||void 0===i?void 0:i.success,message:(null===(c=d.data)||void 0===c?void 0:c.message)||d.message,data:h,games:h,tag:null===(s=d.data)||void 0===s?void 0:s.tag,pagination:null===(l=d.data)||void 0===l?void 0:l.pagination}];case 2:throw m=r.sent(),console.error("GameService.getGamesByTag error:",m),{status:m.status||500,data:m.data||null,message:m.message||"Failed to fetch games by tag",error:m};case 3:return[2]}})})},e.launchGame=function(e,t,n){var i,c,s;return a(this,void 0,Promise,function(){var a,l,u,d;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=this.GAMES_ENDPOINT+"/"+e+"/launch",[4,o.NetworkService.post(a,{lang:t.lang,deviceType:t.deviceType},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}})];case 1:return l=r.sent(),u=null===(i=l.data)||void 0===i?void 0:i.data,[2,{status:l.status,success:null===(c=l.data)||void 0===c?void 0:c.success,message:(null===(s=l.data)||void 0===s?void 0:s.message)||l.message,data:u,launchUrl:null==u?void 0:u.launchUrl,sessionId:null==u?void 0:u.sessionId,gameId:null==u?void 0:u.gameId,gameCode:null==u?void 0:u.gameCode,gameName:null==u?void 0:u.gameName,isDemo:null==u?void 0:u.isDemo,currency:null==u?void 0:u.currency}];case 2:throw d=r.sent(),console.error("GameService.launchGame error:",d),{status:d.status||500,data:d.data||null,message:d.message||"Failed to launch game",error:d};case 3:return[2]}})})},e.DASHBOARD_ENDPOINT="/api/public/v1/players/dashboard",e.DEVELOPERS_ENDPOINT="/api/public/v1/developers",e.CATEGORIES_ENDPOINT="/api/public/v1/categories",e.CATEGORIES_WITH_PROVIDERS_ENDPOINT="/api/public/v1/categories/main-with-providers",e.CATEGORIES_WITH_GAMES_ENDPOINT="/api/public/v1/categories/main-with-games",e.TAGS_ENDPOINT="/api/public/v1/tags",e.GAMES_ENDPOINT="/api/public/v1/games",e.HOMEPAGE_DATA_ENDPOINT="/api/public/v1/games/homepage-data",e}();n.GameService=i,n.default=i,cc._RF.pop()},{"./NetworkService":"NetworkService"}],GameType:[function(e,t){"use strict";cc._RF.push(t,"0c1cd/Sjj1Jf4tqOzg8SFtj","GameType");var n=r(e("SharedFunction")),a=r(e("../Services/GameService"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}var c=e("SharedData");cc.Class({extends:cc.Component,properties:{gameTypeAnimation:cc.Animation,gameTypeBG:{default:null,type:cc.Node},gameRect:{default:null,type:cc.Node},mBetNowLabel:{default:null,type:cc.Node},myGameWebView:null},onLoad:function(){},init:function(e,t,n,a,r,o){var i=this;if(this.node.x=e+10,this.node.y=t,this.node.opacity=0,this.data=n,this.isProvider=r,this.providerData=a,this.mCallBack=o,cc.tween(this.node).to(.5,{position:cc.v2(e,t)}).start(),cc.tween(this.node).to(.5,{opacity:255}).start(),this.playAnimation(),this.gameTypeBG&&this.data)if(this.isProvider&&this.data.logoUrl){var c="https://api.codetabs.com/v1/proxy?quest="+encodeURIComponent(this.data.logoUrl);cc.assetManager.loadRemote(c,function(e,t){if(e)console.error("Failed to load image:",e);else{var n=new cc.SpriteFrame(t),a=i.gameTypeBG.getComponent(cc.Sprite);a&&(a.type=cc.Sprite.Type.SIMPLE,i.gameTypeBG.getComponent(cc.Sprite).spriteFrame=n,i.fitImageToNode(t.width,t.height),i.gameRect.active=!0)}})}else if(this.data.thumbnailUrl){var s="https://api.codetabs.com/v1/proxy?quest="+encodeURIComponent(this.data.thumbnailUrl);cc.assetManager.loadRemote(s,function(e,t){if(e)console.error("Failed to load image:",e);else{var n=new cc.SpriteFrame(t),a=i.gameTypeBG.getComponent(cc.Sprite);a&&(a.type=cc.Sprite.Type.SIMPLE,i.gameTypeBG.getComponent(cc.Sprite).spriteFrame=n,i.fitImageToNode(t.width,t.height))}})}},playAnimation:function(){var e=this;if(!this.isProvider){var t=this,n=this.data.game_code;cc.resources.load("animations/gametype/"+n,cc.AnimationClip,function(a,r){if(!a){var o=t.gameTypeAnimation.getComponent(cc.Animation);o.addClip(r,n),o.play(n),t.gameTypeAnimation.on("stop",function(){t.gameTypeAnimation&&t.gameTypeAnimation.play(n)},e)}})}},fitImageToNode:function(e,t){var n=this.gameTypeBG,a=e,r=t;if(a>192||r>192){var o=192/a,i=192/r,c=Math.min(o,i);a*=c,r*=c}n.width=a,n.height=r},onClick:function(){if(n.default.playButtonClickSound(),this.isProvider)this.mCallBack.onDeveloperButtonDidPressed(this.data,this.providerData);else{if(n.default.showLoadingView("",this.mCallBack||this),!this.data)return console.error("GameType: Game data is missing",this.data),void n.default.hideLoadingView(this.mCallBack||this);var e=this.data.id||this.data._id;if(!e)return console.error("GameType: Game ID is missing. Data:",this.data),void n.default.hideLoadingView(this.mCallBack||this);var t=localStorage.getItem("token");if(!t)return n.default.hideLoadingView(this.mCallBack||this),void(this.mCallBack&&"function"==typeof this.mCallBack.onLoginButtonDidPressed&&this.mCallBack.onLoginButtonDidPressed());var a=n.default.isMobile()?"mobile":"desktop",r=c.getCurrentLanguage()||"en";this.launchGame(e,r,a,t)}},launchGame:function(e,t,r,c){var s,l=this;return(s=o().mark(function i(){var s;return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,a.default.launchGame(e,{lang:t,deviceType:r},c);case 3:if(s=o.sent,!n.default.isSessionExpired(s)){o.next=7;break}return n.default.handleSessionExpiration(s,l.mCallBack||l),o.abrupt("return");case 7:if(!n.default.isServerError(s)){o.next=10;break}return n.default.handleServerError(s,l.mCallBack||l),o.abrupt("return");case 10:s.success&&s.launchUrl?(n.default.hideLoadingView(l.mCallBack||l),l.loadGameWebView(s.launchUrl)):(console.error("GameType: Failed to launch game",s.message),n.default.hideLoadingView(l.mCallBack||l)),o.next=22;break;case 13:if(o.prev=13,o.t0=o.catch(0),!n.default.handleSessionExpiration(o.t0,l.mCallBack||l)){o.next=17;break}return o.abrupt("return");case 17:if(!n.default.handleServerError(o.t0,l.mCallBack||l)){o.next=20;break}return n.default.hideLoadingView(l.mCallBack||l),o.abrupt("return");case 20:console.error("GameType: Error launching game",o.t0),n.default.hideLoadingView(l.mCallBack||l);case 22:case"end":return o.stop()}},i,null,[[0,13]])}),function(){var e=this,t=arguments;return new Promise(function(n,a){var r=s.apply(e,t);function o(e){i(r,n,a,o,c,"next",e)}function c(e){i(r,n,a,o,c,"throw",e)}o(void 0)})})()},loadGameWebView:function(e){var t=this;cc.resources.load("prefabs/game/GameWebView",cc.Prefab,function(n,a){if(n)console.error("GameType: Failed to load GameWebView prefab:",n);else{null==t.myGameWebView&&(t.myGameWebView=cc.instantiate(a).getComponent("GameWebView"),t.myGameWebView.updatePrefabSize()),t.myGameWebView.init(e,t.mCallBack||t);var r=t.mCallBack?t.mCallBack.node:t.node.parent;r?r.addChild(t.myGameWebView.node):cc.director.getScene().addChild(t.myGameWebView.node)}})}}),cc._RF.pop()},{"../Services/GameService":"GameService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],GameWebView:[function(e,t){"use strict";cc._RF.push(t,"bdb564BZDxHdZDb7k8PqzHp","GameWebView");var n=r(e("SharedFunction")),a=r(e("../Services/UserService"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function c(e){i(o,a,r,c,s,"next",e)}function s(e){i(o,a,r,c,s,"throw",e)}c(void 0)})}}var s=e("SharedData");cc.Class({extends:cc.Component,properties:{mCallBack:null,mJs:null,mIsLoadUrl:!1,mIsInjected:!1,mWebView:{default:null,type:cc.Node},mProgressBar:{default:null,type:cc.ProgressBar},mPercentageLabel:{default:null,type:cc.Label},i18nJson:{default:null,type:cc.JsonAsset},mStatusLabel:{default:null,type:cc.Node},progress:0,isLobbyPreloaded:!1,closeGameTriggered:!1,gameUrl:""},onLoad:function(){cc.audioEngine.setVolume(0),this.mProgressBar.node.active=!1,n.default.stopLobbyBackgroundMusic();for(var e=s.getCachedGameList(),t=0;t<e.length;t++){var a=e[t];cc.resources.release(a,cc.SpriteFrame)}s.clearCachedGameList(),s.getIsApp()||(window.closeGameView=this.windowCloseGameView.bind(this)),cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this)},onDestroy:function(){this.stopDotAnimation(),cc.audioEngine.setVolume(1),cc.game.off(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.off(cc.game.EVENT_SHOW,this.onGameShow,this)},start:function(){var e=this;if(this.mWebView&&this.mWebView.isValid){var t=this.mWebView.getComponent(cc.WebView);t&&(t.setJavascriptInterfaceScheme("mygame"),t.setOnJSCallback(function(t,n){n.includes("button_clicked")&&e.windowCloseGameView()}))}},update:function(e){this.mProgressBar.node.active&&(this.progress+=.1*e,this.progress=this.progress>.99?.99:this.progress,this.mProgressBar.progress=this.progress,this.mPercentageLabel.getComponent(cc.Label).string=Math.floor(100*this.progress)+"%",this.isLobbyPreloaded&&(this.progress=1,this.mProgressBar.progress=this.progress,this.mPercentageLabel.getComponent(cc.Label).string=Math.floor(100*this.progress)+"%",cc.director.loadScene("Lobby",function(){return n.default.playLobbyBackgroundMusicForExitsGame()})))},loadUrl:function(e){if(console.log("loadUrl",e),this.mIsLoadUrl=!0,this.mIsInjected=!1,this.mWebView&&this.mWebView.isValid){var t=this.mWebView.getComponent(cc.WebView);t&&(t.url=e,t.node.on("loaded",this.onWebViewLoaded,this))}var n=document.getElementById("Cocos2dGameContainer"),a=document.getElementById("overlay");n.appendChild(a),a.style.display="block"},onWebViewMessage:function(e){console.log("GameWebView: WebView message:",e),e.type===cc.WebView.EventType.MESSAGE&&console.log("GameWebView: WebView message:",e.message)},onWebViewURLChanged:function(e){console.log("GameWebView: WebView URL changed:",e.url)},init:function(e,t){this.mCallBack=t,this.gameUrl=e,this.loadUrl(this.gameUrl)},updatePrefabSize:function(){var e=cc.Canvas.instance.node;e&&(this.node.width=e.width,this.node.height=e.height)},stopLoading:function(){if(this.mWebView&&this.mWebView.isValid){var e=this.mWebView.getComponent(cc.WebView);e&&(e.url="about:blank")}},onWebViewLoaded:function(){var e=this;if(console.log("GameWebView: WebView loaded"),this.mIsLoadUrl)this.mWebView&&this.mWebView.isValid&&(this.mWebView.opacity=255),setTimeout(function(){if(e.mWebView&&e.mWebView.isValid){var t=e.mWebView.getComponent(cc.WebView);t?t.evaluateJS("\n                (function() {\n                    if (document.getElementById('injected-close-btn')) return;\n\n                    var btn = document.createElement('button');\n                    btn.id = 'injected-close-btn';\n                    btn.innerHTML = 'CLOSE X';\n                    btn.style.cssText = \"position:fixed; bottom:10px; right:10px; z-index:2147483647; background:red; color:white; padding:12px; border:none; font-weight:bold;\";\n\n                    btn.onclick = function() {\n                        window.location.href = 'mygame://button_clicked';\n                    };\n\n                    document.body.appendChild(btn);\n                })();\n            "):console.error("WebView component not found on this node!")}},1e3);else if(0==this.mIsInjected&&(this.mIsInjected=!0,this.mWebView&&this.mWebView.isValid)){var t=this.mWebView.getComponent(cc.WebView);t&&t.evaluateJS(this.mJs)}},windowCloseGameView:function(){var e=this;return c(o().mark(function t(){var a;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.closeGameTriggered){t.next=2;break}return t.abrupt("return");case 2:return e.closeGameTriggered=!0,n.default.playButtonClickSound(),localStorage.setItem("returningFromGame","true"),t.next=7,e.refreshBalance();case 7:cc.director.preloadScene("Lobby",function(){e.isLobbyPreloaded=!0}),(a=document.getElementById("overlay"))&&(a.style.display="none"),e.stopLoading(),e.mProgressBar.node.active=!0,e.startDotAnimation();case 13:case"end":return t.stop()}},t)}))()},refreshBalance:function(){var e=this;return c(o().mark(function t(){var r,i,c;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=localStorage.getItem("token")){t.next=5;break}return console.log("No token found, skipping balance refresh"),t.abrupt("return");case 5:return t.next=7,a.default.getBalance(r);case 7:if(i=t.sent,!n.default.isSessionExpired(i)){t.next=11;break}return n.default.handleSessionExpiration(i,e),t.abrupt("return");case 11:if(!n.default.isServerError(i)){t.next=14;break}return n.default.handleServerError(i,e),t.abrupt("return");case 14:200==i.status&&(console.log("Balance refreshed on game close:",i),(c=s.getUserObject())&&(c.balance=i.data.balance,s.setUserObject(c))),t.next=24;break;case 17:if(t.prev=17,t.t0=t.catch(0),!n.default.handleSessionExpiration(t.t0,e)){t.next=21;break}return t.abrupt("return");case 21:if(!n.default.handleServerError(t.t0,e)){t.next=23;break}return t.abrupt("return");case 23:console.error("Error refreshing balance on game close:",t.t0);case 24:case"end":return t.stop()}},t,null,[[0,17]])}))()},startDotAnimation:function(){var e=this,t=0;this.dotInterval=setInterval(function(){var a=".".repeat(t=(t+1)%4);e.mStatusLabel.getComponent(cc.Label).string=""+n.default.getLocalizedString(e.i18nJson,"enter")+a},500)},stopDotAnimation:function(){clearInterval(this.dotInterval)},onGameHide:function(){setTimeout(function(){console.log("Game is hidden"),window.closeGameView=null,cc.audioEngine.setVolume(0),n.default.stopLobbyBackgroundMusic()},1)},onGameShow:function(){var e=this;setTimeout(function(){console.log("Game is shown"),window.closeGameView=e.windowCloseGameView.bind(e),cc.audioEngine.setVolume(0),n.default.stopLobbyBackgroundMusic()},1)}}),cc._RF.pop()},{"../Services/UserService":"UserService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],LZW:[function(e,t,n){"use strict";cc._RF.push(t,"2fc19S4+zlLIKvyuwfxi0/T","LZW"),Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){}return e.decode=function(e,t){var n=1<<t,a=n+1,r=t+1,o=[],i=0;function c(){var e;for(o=[],r=t+1,e=0;e<n;e++)o[e]=[e];o[n]=[],o[a]=null}function s(t){var n,a=0;for(n=0;n<t;n++)e[i>>3]&1<<(7&i)&&(a|=1<<n),i++;return a}return function(){for(var e,t,i=[];;)if(t=e,(e=s(r))!=n){if(e==a)break;if(e<o.length)t!==n&&o.push(o[t].concat(o[e][0]));else{if(e!==o.length)throw new Error("LZW\u89e3\u6790\u51fa\u9519");o.push(o[t].concat(o[t][0]))}i.push.apply(i,o[e]),o.length===1<<r&&r<12&&r++}else c();return i}()},e}();n.default=a,cc._RF.pop()},{}],Landing:[function(e,t){"use strict";cc._RF.push(t,"e378flsQLpOjbzAZ+r2CbnB","Landing");var n=r(e("SharedFunction")),a=r(e("SharedData"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function c(e){i(o,a,r,c,s,"next",e)}function s(e){i(o,a,r,c,s,"throw",e)}c(void 0)})}}cc.Class({extends:cc.Component,properties:{mTickImage:{default:null,type:cc.Node},myLoginView:null,myRegisterView:null,mGuestLoginButton:{default:null,type:cc.Node},mLoginButton:{default:null,type:cc.Node},mTncLabel:{default:null,type:cc.Node},mVerifyPromoLabel:{default:null,type:cc.Node},mAgreementNode:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset}},onLoad:function(){var e=this;cc.view.setResizeCallback(function(){e.updatePrefabSize()}),cc.sys.capabilities.opengl||(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc.game.CONFIG_KEY.renderMode=0),setTimeout(function(){""!=a.default.getLandingAlertMessage()&&(n.default.showAlertView(a.default.getLandingAlertMessage(),e),a.default.setLandingAlertMessage(""))},1)},onAgreementCheckBoxDidPressed:function(){n.default.playButtonClickSound(),this.mTickImage.active=!this.mTickImage.active},onGuestLoginButtonDidPressed:function(){if(n.default.playButtonClickSound(),this.mTickImage.active){n.default.showLoadingView("",this);var e=localStorage.getItem("username"),t=localStorage.getItem("password");e&&t?this.callLoginApi("",e,t,""):this.callRegisterApi(a.default.getReferral(),a.default.getAgentCode())}},callGetSplashDataApi:function(){var e=this;return c(o().mark(function t(){var r,i,c,s;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,i=new SplashScript,t.next=4,i.getSplashData();case 4:if(403!=(c=t.sent).status){t.next=9;break}e.callRegisterApi(a.default.getReferral(),a.default.getAgentCode()),t.next=17;break;case 9:if(200!=c.status){t.next=17;break}return localStorage.setItem("from_index",JSON.stringify(c)),s=a.default.getCurrentLanguage(),t.next=14,i.setLocale(s);case 14:cc.director.loadScene("Lobby",function(){n.default.hideLoadingView(r)}),t.next=17;break;case 17:case"end":return t.stop()}},t)}))()},callRegisterApi:function(e,t){var a=this;return c(o().mark(function r(){var i;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,register(e,t);case 3:if(!(i=r.sent).status){r.next=11;break}return window.fbq&&window.fbq("track","CompleteRegistration",{customerId:i.account,currency:"php"}),localStorage.setItem("username",i.account),localStorage.setItem("password",i.password),r.next=10,a.callLoginApi("",i.account,i.password,"");case 10:return r.abrupt("return");case 11:if(!e&&!t){r.next=14;break}return a.callRegisterApi("",""),r.abrupt("return");case 14:if(!i.account||!i.message){r.next=17;break}return a.callLoginApi("",i.account,i.password,""),r.abrupt("return");case 17:n.default.showAlertView(i.message?i.message:"Gagal Masuk",a),r.next=23;break;case 20:r.prev=20,r.t0=r.catch(0),console.error("Landing","callRegisterApi Error:",r.t0);case 23:case"end":return r.stop()}},r,null,[[0,20]])}))()},callLoginApi:function(e,t,a,r){var i=this;return c(o().mark(function c(){return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,login(e,t,a,r);case 3:200==o.sent.status?(localStorage.setItem("username",t),localStorage.setItem("password",a),window.fbq&&window.fbq("trackCustom","login",{customerId:t+r}),i.callGetSplashDataApi()):(n.default.showAlertView(n.default.getLocalizedString(i.i18nJson,"invalidAccount"),i),n.default.hideLoadingView(i)),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),console.error("Landing","callLoginApi Error:",o.t0);case 10:case"end":return o.stop()}},c,null,[[0,7]])}))()},callRegisterApi2:function(e,t){var a=this;return c(o().mark(function r(){var i;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,register(e,t);case 3:if(!(i=r.sent).status){r.next=8;break}return window.fbq&&window.fbq("track","CompleteRegistration",{customerId:i.account,currency:"php"}),a.callLoginApi2("",i.account,i.password,""),r.abrupt("return");case 8:if(!e&&!t){r.next=11;break}return a.callRegisterApi2("",""),r.abrupt("return");case 11:if(!i.account||!i.message){r.next=14;break}return a.callLoginApi2("",i.account,i.password,""),r.abrupt("return");case 14:n.default.showAlertView(i.message?i.message:"Gagal Masuk",a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(0),console.error("Landing","callRegisterApi Error:",r.t0);case 20:case"end":return r.stop()}},r,null,[[0,17]])}))()},callLoginApi2:function(e,t,r,i){var s=this;return c(o().mark(function c(){var l,u,d,h;return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,login(e,t,r,i);case 3:if(200!=o.sent.status){o.next=12;break}return l=new LobbyScript,o.next=8,l.getProfile();case 8:200==(u=o.sent).status&&(localStorage.setItem("username",t),localStorage.setItem("password",r),window.fbq&&window.fbq("trackCustom","login",{customerId:t+i}),d=u.result,(h=d.getUserProfile).mainWallet=d.mainWallet,a.default.setUserObject(h)),o.next=13;break;case 12:n.default.showAlertView(n.default.getLocalizedString(s.i18nJson,"invalidAccount"),s);case 13:o.next=18;break;case 15:o.prev=15,o.t0=o.catch(0),console.error("Landing","callLoginApi Error:",o.t0);case 18:case"end":return o.stop()}},c,null,[[0,15]])}))()},onRegisterViewButtonDidPressed:function(){var e=this;return c(o().mark(function t(){var r,i,c,s;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((r=e).node.removeChild(r.myLoginView.node),n.default.showLoadingView("",r),i=localStorage.getItem("username"),c=localStorage.getItem("password"),!i||!c){t.next=10;break}return t.next=8,r.callLoginApi2("",i,c,"");case 8:t.next=12;break;case 10:return t.next=12,r.callRegisterApi2(a.default.getReferral(),a.default.getAgentCode());case 12:if(s=a.default.getUserObject(),n.default.hideLoadingView(r),s.username){t.next=17;break}return n.default.hideLoadingView(r),t.abrupt("return");case 17:cc.resources.load("prefabs/register/register",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(r);null==r.myRegisterView&&(r.myRegisterView=cc.instantiate(t).getComponent("Register"),r.updatePrefabSize(),r.myRegisterView.setCallBack(r)),r.myRegisterView.updateView(),r.node.addChild(r.myRegisterView.node)}),n.default.hideLoadingView(r);case 19:case"end":return t.stop()}},t)}))()},onRegisterViewDidClosed:function(){this.node.removeChild(this.myRegisterView.node),a.default.getVerificationStatus()&&(n.default.showLoadingView("",this),this.callGetSplashDataApi())},update:function(){},localizeUI:function(){this.mGuestLoginButton.getChildByName("container").getChildByName("label").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"visitor"),this.mLoginButton.getChildByName("container").getChildByName("label").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"account");var e=n.default.getLocalizedString(this.i18nJson,"tnc1"),t=n.default.getLocalizedString(this.i18nJson,"tnc2"),a=n.default.getLocalizedString(this.i18nJson,"tnc3");this.mTncLabel.getComponent(cc.RichText).string="<color=#ffffff>"+e+" </color><color=#196100>"+t+"</color><color=#ffffff> & </color><color=#196100>"+a+"</color>",this.mAgreementNode.getComponent(cc.Layout).updateLayout()},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myLoginView&&this.myLoginView.init(0,0,e.width,e.height)},onCsButtonClicked:function(){window.open(a.default.getLiveChat(),"_blank").focus()}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],Language:[function(e,t){"use strict";cc._RF.push(t,"b17a6TzAq9JSLssp76FomcR","Language");var n=r(e("SharedFunction")),a=r(e("SharedData"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{mCallBack:null,defaultLanaguage:"en",createdButtons:[],mBackground:{default:null,type:cc.Node},myConfirmBtn:{default:null,type:cc.Node},myLanguageBorder:{default:null,type:cc.Node},myScrollView:{default:null,type:cc.Node},myScrollViewContent:{default:null,type:cc.Node},mLanguageLabelPrefab:{default:null,type:cc.Prefab},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mCountryLabel:{default:null,type:cc.Node},mLanguageLabel:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},updateView:function(e){this.mCallBack=e,this.mBackground.active=!0,this.node.opacity=255,this.defaultLanaguage=a.default.getCurrentLanguage(),this.drawAvailableLanguage(),this.myScrollView.getComponent(cc.ScrollView).scrollToTop(0);var t=this.mBackground.getChildByName("language_bg");t.setScale(0),cc.tween(t).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setCallBack:function(e){this.mCallBack=e},drawAvailableLanguage:function(){var e=JSON.parse(localStorage.getItem("from_index"));console.log(e);var t=e.settings.languages,n=-234;for(var a in t.supportedLanguages){var r=t.supportedLanguages[a];n=this.defaultLanaguage==r.code?-76*parseInt(a)-234:n;var o=new cc.instantiate(this.mLanguageLabelPrefab);o.name=r.code,o.setPosition(cc.v2(0,-76*parseInt(a)-234)),o.getComponent(cc.Label).string=r.nativeName,this.myScrollViewContent.addChild(o);var i=o.getComponent(cc.Button);this.rebindButtonClick(i,"onLanguageDidPressed",r.code),this.createdButtons.push(o)}this.myLanguageBorder.setPosition(cc.v2(0,n)),this.myConfirmBtn.y=-76*(t.supportedLanguages.length-1)-332,this.myScrollViewContent.height=384+76*(t.supportedLanguages.length-1)},rebindButtonClick:function(e,t,n){if(e){e.clickEvents=[];var a=new cc.Component.EventHandler;a.target=this.node,a.component="Language",a.handler=t,a.customEventData=n,e.clickEvents.push(a)}},myCloseButtonDidPressed:function(e,t,r){var o=this;r||n.default.playButtonClickSound(),"confirm"==t&&(a.default.setCurrentLanguage(this.defaultLanaguage),this.localizeUI(),this.mCallBack.localizeUI());var i=this.mBackground.getChildByName("language_bg");cc.tween(i).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){o.createdButtons.forEach(function(e){e&&e.isValid&&(e.node?e.node.removeFromParent():e.removeFromParent())}),o.createdButtons=[],o.mCallBack&&o.mCallBack.onLanguageCloseButtonDidPressed()}).start()},onLanguageDidPressed:function(e,t){n.default.playButtonClickSound(),cc.tween(this.myLanguageBorder).to(.1,{position:cc.v2(0,e.target.y)}).start(),this.defaultLanaguage=t},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title"),this.mCountryLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"country"),this.mLanguageLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"language"),this.mConfirmLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirm")},updatePrefabSize:function(){cc.view.getVisibleSize()}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],LevelInfo:[function(e,t){"use strict";cc._RF.push(t,"fd94d9uD5hCN7bsURm8jXsD","LevelInfo");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n};e("SharedData"),cc.Class({extends:cc.Component,properties:{myBorder:{default:null,type:cc.Node},myLevelImg:{default:null,type:cc.Node},myLevelLabel:{default:null,type:cc.Node},myDataLabel1:{default:null,type:cc.Node},myDataLabel2:{default:null,type:cc.Node},myDataLabel3:{default:null,type:cc.Node},myDataLabel4:{default:null,type:cc.Node},myDataLabel5:{default:null,type:cc.Node},myDataLabel6:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mLabel1:{default:null,type:cc.Node},mLabel2:{default:null,type:cc.Node},mLabel3:{default:null,type:cc.Node},mLabel4:{default:null,type:cc.Node},mLabel5:{default:null,type:cc.Node},mLabel6:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,r){this.node.x=e,this.node.y=t,this.data=n,this.mCallBack=r;var o=this;cc.loader.loadRes("images/profile/VIP"+n.level+".png",cc.SpriteFrame,function(e,t){o.myLevelImg.getComponent(cc.Sprite).spriteFrame=t}),1==n.level&&(this.myBorder.active=!0),this.myLevelLabel.getComponent(cc.Label).string=n.name,this.myDataLabel1.getComponent(cc.Label).string=a.default.showNumberWithDecimalAndComma(n.dailyLimit,2),this.myDataLabel2.getComponent(cc.Label).string=a.default.showNumberWithDecimalAndComma(n.dailyTransaction,2),this.myDataLabel3.getComponent(cc.Label).string=a.default.showNumberWithDecimalAndComma(n.upgradeBonus,2),this.myDataLabel4.getComponent(cc.Label).string=a.default.showNumberWithDecimalAndComma(n.rescueBonus,2)+"%",this.myDataLabel5.getComponent(cc.Label).string=a.default.showNumberWithDecimalAndComma(n.birthdayBonus,2),this.myDataLabel6.getComponent(cc.Label).string=n.present},onInfoButtonDidPressed:function(){a.default.playButtonClickSound(),this.mCallBack.onShowHideLevelDetail(!0,this.data.level,this.data.name)},localizeUI:function(){this.mLabel1.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"label1"),this.mLabel2.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"label2"),this.mLabel3.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"label3"),this.mLabel4.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"label4"),this.mLabel5.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"label5"),this.mLabel6.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"label6")}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],LoadingView:[function(e,t){"use strict";cc._RF.push(t,"e594cUF5ElNjrTjSJxUI7jX","LoadingView"),cc.Class({extends:cc.Component,properties:{mCallBack:null,myLabel:{default:null,type:cc.Label},loadingAnimation:cc.Animation,mStatusMessage:""},onLoad:function(){},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a;var r=this.node.getComponent(cc.BlockInputEvents);r||(r=this.node.addComponent(cc.BlockInputEvents)),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEvent,this),this.loadingAnimation.play("loading_view"),this.loadingAnimation.on("stop",function(){this.loadingAnimation&&this.loadingAnimation.play("loading_view")},this)},onTouchEvent:function(e){e.stopPropagation()},setText:function(e){void 0===e&&(e=""),this.mStatusMessage=e,""==this.mStatusMessage||this.dotInterval||this.startDotAnimation()},startDotAnimation:function(){var e=this,t=0;this.dotInterval=setInterval(function(){var n=".".repeat(t=(t+1)%4);e.myLabel.string=""+e.mStatusMessage+n},500)},stopDotAnimation:function(){clearInterval(this.dotInterval)},onDestroy:function(){this.stopDotAnimation(),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchEvent,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEvent,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchEvent,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEvent,this)}}),cc._RF.pop()},{}],Lobby:[function(e,t){"use strict";cc._RF.push(t,"b8c13I+EnNHQb/qh+U39rfM","Lobby");var n=c(e("SharedFunction")),a=c(e("SharedData")),r=c(e("../Services/AuthServices")),o=c(e("../Services/UserService")),i=c(e("../Services/GameService"));function c(e){return e&&e.__esModule?e:{default:e}}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};c(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,c(v,"constructor",f),c(f,"constructor",m),m.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),c(v,i,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function l(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){l(o,a,r,i,c,"next",e)}function c(e){l(o,a,r,i,c,"throw",e)}i(void 0)})}}cc.Class({extends:cc.Component,properties:{myLoginView:null,myRegistrationView:null,myLanguageView:null,mySettingsView:null,myDepositView:null,myPersonalView:null,myGameListView:null,myCustomerServiceView:null,myRebateView:null,myAnnouncement:null,mCurrentGameGroup:"",banners:[],mGameGroupList:[],createdGameGroup:[],createdGameType:[],isDrawerOpen:!1,mBackground:{default:null,type:cc.Node},myLoginBtn:{default:null,type:cc.Node},myRegisterBtn:{default:null,type:cc.Node},myPlayerNameLabel:{default:null,type:cc.Node},myCopyIDBG:{default:null,type:cc.Node},myPlayIdLabel:{default:null,type:cc.Node},myDepositBtn:{default:null,type:cc.Node},myWithdrawBtn:{default:null,type:cc.Node},myReferBtn:{default:null,type:cc.Node},myRebateBtn:{default:null,type:cc.Node},myMessageBtn:{default:null,type:cc.Node},mySupportBtn:{default:null,type:cc.Node},myMoreBtn:{default:null,type:cc.Node},myBalanceBG:{default:null,type:cc.Node},myDrawerBG:{default:null,type:cc.Node},myDrawerBGContent:{default:null,type:cc.Node},drawerCsItemPrefab:{default:null,type:cc.Prefab},createdDrawerCsItems:[],myGameScrollView:{default:null,type:cc.Node},myGameScrollContent:{default:null,type:cc.Node},myGameGroupScrollViewView:{default:null,type:cc.Node},myGameGroupScrollContent:{default:null,type:cc.Node},myLobbyFooter:{default:null,type:cc.Node},myHeaderProfileImg:{default:null,type:cc.Sprite},myNotificationBG:{default:null,type:cc.Node},myLobbyContainer:{default:null,type:cc.Node},myAnnouncementPrefab:{default:null,type:cc.Prefab},myGameGroupPrefab:{default:null,type:cc.Prefab},myBannerPrefab:{default:null,type:cc.Prefab},myBannerView:null,mSelectedTabbarIndex:0,myBannerContainer:{default:null,type:cc.Sprite},myBannerMoveTimer:{default:6,type:cc.Float},myBannerItemPrefabs:{default:null,type:cc.Prefab},myBannerCanMove:!1,myUserName:{default:null,type:cc.Node},myUserBalance:{default:null,type:cc.Node},myUserProfileImage:{default:null,type:cc.Node},myGridView:null,myGridScrollView:cc.ScrollView,myTopupView:null,myWithdrawView:null,myProfileView:null,myEventView:null,mEventPrefab:{default:null,type:cc.Prefab},myFollowUsView:null,mFollowUsPrefab:{default:null,type:cc.Prefab},myRegisterView:null,mDailyBonusView:null,mDailyBonusPrefab:{default:null,type:cc.Prefab},mWelcomeBonusView:null,mWelcomeBonusPrefab:{default:null,type:cc.Prefab},mGameView:null,mMailboxView:null,mReferralView:null,myTabbar:{default:null,type:cc.Sprite},myTabbarButtonPrefabs:{default:null,type:cc.Prefab},mVipImage:{default:null,type:cc.Node},mVipLabel:{default:null,type:cc.Node},mVipView:null,mRebateView:null,mPwaAndroidView:null,mPwaiOSView:null,mPwaButton:{default:null,type:cc.Node},mCarnivalView:null,mCarnivalPrefab:{default:null,type:cc.Prefab},mRedeemCodeView:null,mStartLabel:{default:null,type:cc.Node},mWinnerInfoView:{default:null,type:cc.Node},mWinnerInfoAvatar:{default:null,type:cc.Node},mWinnerInfoMultiplier:{default:null,type:cc.Node},mWinnerInfoName:{default:null,type:cc.Node},mWinnerInfoAmount:{default:null,type:cc.Node},mWinnerInfoGameImage:{default:null,type:cc.Node},mWinnerInfoNextShowTimer:5,mMailRedDot:{default:null,type:cc.Node},mDepositButton:{default:null,type:cc.Node},mWithdrawButton:{default:null,type:cc.Node},mVipButton:{default:null,type:cc.Node},mCsButton:{default:null,type:cc.Node},mMailButton:{default:null,type:cc.Node},mRebateButton:{default:null,type:cc.Node},mReferralButton:{default:null,type:cc.Node},mStartImage:{default:null,type:cc.Node},mMailBubble:{default:null,type:cc.Node},mEnStart:{default:null,type:cc.SpriteFrame},mIdStart:{default:null,type:cc.SpriteFrame},mTlStart:{default:null,type:cc.SpriteFrame},mLayout:{default:null,type:cc.Node},mEventButtonView:null,mEventButtonPrefab:{default:null,type:cc.Prefab},mCarnivalButtonView:null,mCarnivalButtonPrefab:{default:null,type:cc.Prefab},mFollowUsButtonView:null,mFollowUsButtonPrefab:{default:null,type:cc.Prefab},mAccumDepositButtonView:null,mAccumDepositButtonPrefab:{default:null,type:cc.Prefab},mWelcomeBonusButtonView:null,mWelcomeBonusButtonPrefab:{default:null,type:cc.Prefab},mVerifyButtonView:null,mVerifyButtonPrefab:{default:null,type:cc.Prefab},isVerifyOpen:!1,isWelcomeBonusOpen:!1,isDailyBonusOpen:!1,isFollowUsOpen:!1,isCarnivalOpen:!1,isEventOpen:!1,isDepositOpen:!1,isWithdrawOpen:!1,isVipOpen:!1,isMailboxOpen:!1,isRebateOpen:!1,isReferralOpen:!1,mNewPrizeAmount:0,mShowNewPrizeNotification:!1,i18nJson:{default:null,type:cc.JsonAsset},mLoginLabel:{default:null,type:cc.Node},mRegisterLabel:{default:null,type:cc.Node},mSettingLabel:{default:null,type:cc.Node},mDepositLabel:{default:null,type:cc.Node},mWithdrawLabel:{default:null,type:cc.Node},mReferLabel:{default:null,type:cc.Node},mRebateLabel:{default:null,type:cc.Node},mMessageLabel:{default:null,type:cc.Node},mSupportLabel:{default:null,type:cc.Node},mMoreLabel:{default:null,type:cc.Node},mNotificationLabel:{default:null,type:cc.Node}},onLoad:function(){var e=this;cc.resources.load("prefabs/LoadingView/LoadingView",cc.Prefab,function(e,t){n.default.setLoadingViewPrefabs(t)});var t=this;this.localizeUI(),document.getElementById("overlay")||cc.resources.load("images/login/close_btn",cc.SpriteFrame,function(e,t){if(!e&&t){var n=document.getElementById("Cocos2dGameContainer");(a=document.createElement("button")).id="overlay",a.style.backgroundImage="url('"+t.getTexture().nativeUrl+"')",a.style.backgroundSize="contain",a.style.backgroundRepeat="no-repeat",a.style.backgroundColor="transparent",a.style.border="none",a.style.width="50px",a.style.height="50px",a.style.position="fixed",a.style.bottom="10px",a.style.right="10px",a.style.zIndex="9999",a.style.display="none",a.onclick=function(){"function"==typeof window.closeGameView&&window.closeGameView()},n.appendChild(a)}else{var a,r=document.getElementById("Cocos2dGameContainer");(a=document.createElement("button")).id="overlay",a.innerHTML="Close Game",a.style.position="fixed",a.style.bottom="10px",a.style.right="10px",a.style.zIndex="9999",a.style.display="none",a.onclick=function(){"function"==typeof window.closeGameView&&window.closeGameView()},r.appendChild(a)}}),cc.view.setResizeCallback(function(){e.updatePrefabSize()}),this.handleSplashResponse(),this.setupRoundedMask(this.myGameGroupScrollViewView,20),a.default.getSelectedAvatar()==localStorage.getItem("selected_avatar")&&cc.loader.loadRes("images/profile/Avatar"+a.default.getSelectedAvatar()+".png",cc.SpriteFrame,function(e,n){t.myHeaderProfileImg.getComponent(cc.Sprite).spriteFrame=n}),this.createdDrawerCsItems=[],this.mGameGroupList=[{code:"hot",name:"Hot Game",iconName:"hot"},{code:"live",name:"Live Casino",iconName:"live"},{code:"slots",name:"Slots",iconName:"slots"},{code:"fishing",name:"Fishing",iconName:"hot"},{code:"sport",name:"Sports",iconName:"hot"},{code:"crash",name:"Crash",iconName:"hot"},{code:"others",name:"Others",iconName:"hot"},{code:"fast",name:"Fast Game",iconName:"hot"}],this.configureGameGroup(),this.playBtnAnimation(),n.default.playLobbyBackgroundMusic(),n.default.isLoggedIn()&&(this.callGetProfileApi(),this.updateBalanceLabelFromSharedData())},setupRoundedMask:function(e,t){if(e){var n=e.getContentSize(),a=Math.max(n.width,1),r=Math.max(n.height,1),o=document.createElement("canvas");o.width=a,o.height=r;var i=o.getContext("2d");i.clearRect(0,0,a,r),i.fillStyle="#FFFFFF",i.beginPath(),i.moveTo(t,0),i.lineTo(a-t,0),i.quadraticCurveTo(a,0,a,t),i.lineTo(a,r-t),i.quadraticCurveTo(a,r,a-t,r),i.lineTo(t,r),i.quadraticCurveTo(0,r,0,r-t),i.lineTo(0,t),i.quadraticCurveTo(0,0,t,0),i.closePath(),i.fill();var c=new cc.Texture2D;c.initWithElement(o),c.handleLoadedTexture();var s=new cc.SpriteFrame;s.setTexture(c),s.setRect(cc.rect(0,0,a,r));var l=e.getComponent(cc.Mask);l||(l=e.addComponent(cc.Mask)),l.type=2,l.spriteFrame=s,l.segments=64}},updateHeaderIcon:function(){var e=a.default.getPopoutItem();if(null!=e&&null!=this.mLayout){this.mLayout.removeAllChildren();for(var t=0;t<e.headerList.length;t++)switch(e.headerList[t]){case"promotions":var n=cc.instantiate(this.mEventButtonPrefab);this.mLayout.addChild(n),this.mEventButtonView=n.getComponent("LobbyEventButton"),this.mEventButtonView.setCallBack(this);break;case"mission":var r=a.default.getMissionDataObject();if(1==r.status&&null!=r.data){var o=cc.instantiate(this.mCarnivalButtonPrefab);this.mLayout.addChild(o),this.mCarnivalButtonView=o.getComponent("LobbyCarnivalButton"),this.mCarnivalButtonView.setCallBack(this)}break;case"follow_us":var i=cc.instantiate(this.mFollowUsButtonPrefab);this.mLayout.addChild(i),this.mFollowUsButtonView=i.getComponent("LobbyFollowUsButton"),this.mFollowUsButtonView.setCallBack(this);break;case"accum_depo":if(null!=a.default.getAccumulateDepositObject()){var c=cc.instantiate(this.mAccumDepositButtonPrefab);this.mLayout.addChild(c),this.mAccumDepositButtonView=c.getComponent("LobbyAccumDepositButton"),this.mAccumDepositButtonView.setCallBack(this)}break;case"welcome_bonus":if(null!=a.default.getWelcomeBonusObject()){var s=cc.instantiate(this.mWelcomeBonusButtonPrefab);this.mLayout.addChild(s),this.mWelcomeBonusButtonView=s.getComponent("LobbyWelcomeBonusButton"),this.mWelcomeBonusButtonView.setCallBack(this)}break;case"official_acc":if(!a.default.getVerificationStatus()){var l=cc.instantiate(this.mVerifyButtonPrefab);this.mLayout.addChild(l),this.mVerifyButtonView=l.getComponent("LobbyVerifyButton"),this.mVerifyButtonView.setCallBack(this)}}this.mLayout.getComponent(cc.Layout).updateLayout()}},autoShowDialog:function(){if(!n.default.getQueryParam("skip")){var e=a.default.getPopoutItem();if(null!=e&&0!=e.popoutList.length){var t=e.popoutList[0];switch(t.code){case"promotions":var r=n.default.getTodayData("openPromotionCount",0);if(r>=t.times)return e.popoutList.shift(),void this.autoShowDialog();n.default.setTodayData("openPromotionCount",r+1),this.onEventButtonDidPressed(),e.popoutList.shift();break;case"mission":var o=a.default.getMissionDataObject();if(0==o.status||null==o.data)return e.popoutList.shift(),void this.autoShowDialog();var i=n.default.getTodayData("openCarnivalCount",0);if(i>=t.times)return e.popoutList.shift(),void this.autoShowDialog();n.default.setTodayData("openCarnivalCount",i+1),this.onCarnivalButtonDidPressed(),e.popoutList.shift();break;case"follow_us":var c=n.default.getTodayData("openFollowUsCount",0);if(c>=t.times)return e.popoutList.shift(),void this.autoShowDialog();n.default.setTodayData("openFollowUsCount",c+1),this.onFollowUsButtonDidPressed(),e.popoutList.shift();break;case"accum_depo":if(null==a.default.getAccumulateDepositObject())return e.popoutList.shift(),void this.autoShowDialog();var s=n.default.getTodayData("openDailyBonusCount",0);if(s>=t.times)return e.popoutList.shift(),void this.autoShowDialog();n.default.setTodayData("openDailyBonusCount",s+1),this.onDailyBonusButtonDidPressed(),e.popoutList.shift();break;case"welcome_bonus":if(null==a.default.getWelcomeBonusObject())return e.popoutList.shift(),void this.autoShowDialog();var l=n.default.getTodayData("openWelcomeBonusCount",0);if(l>=t.times)return e.popoutList.shift(),void this.autoShowDialog();n.default.setTodayData("openWelcomeBonusCount",l+1),this.onWelcomeBonusButtonDidPressed(),e.popoutList.shift();break;case"official_acc":if(a.default.getVerificationStatus())return e.popoutList.shift(),void this.autoShowDialog();var u=n.default.getTodayData("openVerifyCount",0);if(u>=t.times)return e.popoutList.shift(),void this.autoShowDialog();n.default.setTodayData("openVerifyCount",u+1),this.onRegisterViewButtonDidPressed(),e.popoutList.shift()}}}},callback:function(e,t,n){console.log(t,n)},closeGameWebView:function(e){var t=this;return u(s().mark(function a(){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return void 0===e&&(e=!1),console.log("closeGameWebView: "+e),n.default.playLobbyBackgroundMusicForExitsGame(),a.next=5,t.getWallet();case 5:return a.next=7,t.refreshBalanceAndUpdateLabel();case 7:e&&t.goToTopUpView();case 8:case"end":return a.stop()}},a)}))()},refreshBalanceAndUpdateLabel:function(){var e=this;return u(s().mark(function t(){var r,i,c;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=localStorage.getItem("token")){t.next=5;break}return console.log("No token found, skipping balance refresh"),t.abrupt("return");case 5:return t.next=7,o.default.getBalance(r);case 7:if(i=t.sent,!n.default.isSessionExpired(i)){t.next=11;break}return n.default.handleSessionExpiration(i,e),t.abrupt("return");case 11:if(!n.default.isServerError(i)){t.next=14;break}return n.default.handleServerError(i,e),t.abrupt("return");case 14:200==i.status&&(console.log("Balance refreshed on game close:",i),(c=a.default.getUserObject())&&(c.balance=i.data.balance,a.default.setUserObject(c),e.updateBalanceLabelFromSharedData())),t.next=24;break;case 17:if(t.prev=17,t.t0=t.catch(0),!n.default.handleSessionExpiration(t.t0,e)){t.next=21;break}return t.abrupt("return");case 21:if(!n.default.handleServerError(t.t0,e)){t.next=23;break}return t.abrupt("return");case 23:console.error("Error refreshing balance on game close:",t.t0);case 24:case"end":return t.stop()}},t,null,[[0,17]])}))()},updateBalanceLabelFromSharedData:function(){if(this.myBalanceBG&&this.myBalanceBG.isValid){var e=this.myBalanceBG.getChildByName("lblBalance");if(e&&e.isValid){var t=a.default.getUserObject();t&&void 0!==t.balance&&(e.getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(t.balance,2))}}},updateDeviceToken:function(e){return u(s().mark(function t(){var n,a;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new LobbyScript,t.next=3,n.updateDeviceToken(e);case 3:a=t.sent,console.log("updateDeviceToken",a);case 5:case"end":return t.stop()}},t)}))()},handleSplashResponse:function(){var e=JSON.parse(localStorage.getItem("from_index"));if(null!=e.settings.banners){if(e.settings.banners.Home)for(var t in e.settings.banners.Home.mobile)this.banners.push(e.settings.banners.Home.mobile[t]);if(e.settings.banners.Register)for(var t in e.settings.banners.Register.mobile)this.banners.push(e.settings.banners.Register.mobile[t])}e.settings&&e.settings.announcements&&a.default.setAnnouncement(e.settings.announcements),this.configureAnnouncement(),n.default.hideLoadingView(this);var r=localStorage.getItem("returningFromGame");r&&"true"===r?localStorage.removeItem("returningFromGame"):this.showBannerPopup(),this.loadDrawerCsItems()},showBannerPopup:function(){var e=a.default.getAnnouncement();if(!e||0===e.length)try{var t=JSON.parse(localStorage.getItem("from_index"));t&&t.settings&&t.settings.announcements&&(e=t.settings.announcements,a.default.setAnnouncement(e))}catch(r){console.error("Error reading announcements from localStorage:",r)}if(e&&0!==e.length){var n=this;this.myBannerPrefab?this.instantiateAndShowBanner(e):cc.resources.load("prefabs/lobby/banner",cc.Prefab,function(t,a){t?console.error("Failed to load banner prefab:",t):(n.myBannerPrefab=a,n.instantiateAndShowBanner(e))})}},instantiateAndShowBanner:function(e){if(this.myBannerPrefab){if(!this.myBannerView){var t=cc.instantiate(this.myBannerPrefab);if(this.myBannerView=t.getComponent("banner")||t.getComponent("Banner"),!this.myBannerView)return console.error("Banner component not found. Make sure banner.js is attached to the prefab root node."),void console.error("Available components:",t.getComponents(cc.Component).map(function(e){return e.constructor.name}));this.updatePrefabSize(),this.myBannerView.setCallBack(this),this.node.addChild(t)}this.myBannerView&&(e&&e.length>0&&this.myBannerView.init(e),this.myBannerView.show())}},onBannerCloseButtonDidPressed:function(){this.myBannerView&&this.myBannerView.hide()},onAnnouncementClicked:function(){this.showBannerPopup()},configureVip:function(){var e,t=this,n=a.default.getVipList(),r=Math.min(null!=(e=n.list.findIndex(function(e){return e.isCurrentLevel}))?e:0,10),o=n.list.find(function(e){return e.isCurrentLevel});-1==r||null==o?(cc.loader.loadRes("images/lobby/vip_1.png",cc.SpriteFrame,function(e,n){t.mVipImage.getComponent(cc.Sprite).spriteFrame=n,t.mVipImage.active=!0}),this.mVipLabel.getComponent(cc.Label).string="VIP0"):(cc.loader.loadRes("images/lobby/vip_"+r+".png",cc.SpriteFrame,function(e,n){t.mVipImage.getComponent(cc.Sprite).spriteFrame=n,t.mVipImage.active=!0}),this.mVipLabel.getComponent(cc.Label).string=o.name||"VIP0")},configureUserProfile:function(){var e=this,t=a.default.getUserObject(),n=t.profilePic||"av1",r=t.username;this.myUserName.getComponent(cc.Label).string=t.fullName||r,cc.loader.loadRes("images/lobby/"+n+".png",cc.SpriteFrame,function(t,n){e.myUserProfileImage.getComponent(cc.Sprite).spriteFrame=n,e.myUserProfileImage.active=!0})},configureBanner:function(){var e=this,t=a.default.getBanner(),n=this.myBannerContainer.getComponent(cc.PageView);n.removeAllPages();for(var r=0;r<t.length;r++){var o=t[r],i=cc.instantiate(this.myBannerItemPrefabs).getComponent("LobbyBannerItem");i.setItem(o),i.setCallBack(this),n.addPage(i.node)}this.myBannerContainer.node.active=!0,this.myBannerMoveTimer=0,setTimeout(function(){e.myBannerCanMove=!0},1)},configureTabbar:function(){var e=a.default.getGameList();this.myTabbar.node.width=160*e.length-10;for(var t=0;t<e.length;t++){var n=cc.instantiate(this.myTabbarButtonPrefabs).getComponent("LobbyTabbutton");n.init(160*t-5,0,160,44),n.setCallBack(this),n.setData(t,e[t]),0==t?n.setBackground("tab_background_left"):t==e.length-1?n.setBackground("tab_background_right"):n.setBackground("tab_background_middle"),this.myTabbar.node.addChild(n.node)}this.myTabbar.node.active=!0,this.mSelectedTabbarIndex=0;var r=this;setTimeout(function(){r.onTabbarButtonDidPressed(r.mSelectedTabbarIndex,e[r.mSelectedTabbarIndex])},0)},onTabbarButtonDidPressed:function(e){this.mSelectedTabbarIndex=e;var t=this.myTabbar.node._children;if(0!=t.length){for(var n=0;n<t.length;n++){var a=t[n].getChildByName("tab_button"),r=t[n].getChildByName("image"),o=t[n].getChildByName("label");a.getComponent(cc.Sprite).spriteFrame=null,r.color=cc.color("#FBF5DA"),o.color=cc.color("#FBF5DA"),a.getComponent(cc.Button).interactable=!0}var i=t[e],c=i.getChildByName("tab_button");c.getComponent(cc.Button).interactable=!1,cc.loader.loadRes("images/lobby/tab_button.png",cc.SpriteFrame,function(e,t){c.getComponent(cc.Sprite).spriteFrame=t;var n=i.getChildByName("image"),a=i.getChildByName("label");n.color=cc.color("#FFFFFF"),a.color=cc.color("#FFFFFF")}),this.configureGridView()}},onBannerNextItem:function(){var e=this.myBannerContainer.getComponent(cc.PageView);null!=e&&e.setCurrentPageIndex((e.getCurrentPageIndex()+1)%e.getPages().length),this.myBannerMoveTimer=6},onBannerPrevItem:function(){var e=this.myBannerContainer.getComponent(cc.PageView);null!=e&&e.setCurrentPageIndex((e.getPages().length+e.getCurrentPageIndex()-1)%e.getPages().length),this.myBannerMoveTimer=6},configureGridView:function(){this.myGridView||(this.myGridView=this.myGridScrollView.getComponent("GridView"),this.myGridView.setCallBack(this),this.myGridView.init(this.mSelectedTabbarIndex)),this.myGridView.updateView(this.mSelectedTabbarIndex)},onBalanceButtonDidPressed:function(){n.default.playButtonClickSound(),this.goToTopUpView()},goToTopUpView:function(e){var t=this;return u(s().mark(function r(){var o,i,c;return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e&&(e=0),!t.isDepositOpen){r.next=3;break}return r.abrupt("return");case 3:if(t.isDepositOpen=!0,n.default.showLoadingView("",t),window.fbq&&window.fbq("trackCustom","deposit",{currency:"PHP",customerId:a.default.getUserObject().username}),0!=a.default.getPaymentsProviderObject().length){r.next=18;break}return o=new LobbyScript,r.next=10,o.getDeposit();case 10:if(i=r.sent,!n.default.isSessionExpired(i)){r.next=14;break}return n.default.handleSessionExpiration(i,t),r.abrupt("return");case 14:if(200==i.status&&null!=i.result.paymentsProvider){r.next=17;break}return n.default.showAlertView(i.message,t),r.abrupt("return");case 17:a.default.setPaymentsProviderObject(i.result.paymentsProvider);case 18:if(0!=a.default.getPaymentsProviderObject().length){r.next=22;break}return n.default.showAlertView(n.default.getLocalizedString(t.i18nJson,"tryAgain"),t),n.default.hideLoadingView(t),r.abrupt("return");case 22:c=t,cc.resources.load("prefabs/topup/topup",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(c);null==c.myTopupView&&(c.myTopupView=cc.instantiate(a).getComponent("TopupView"),c.updatePrefabSize(),c.myTopupView.setCallBack(c)),c.myTopupView.updateView(e),c.node.addChild(c.myTopupView.node)}),n.default.hideLoadingView(t);case 25:case"end":return r.stop()}},r)}))()},onTopupViewDidClosed:function(){this.isDepositOpen=!1,this.mPwaButton.active=a.default.getAab()?"download"==a.default.guard():!a.default.getIsApp(),this.node.removeChild(this.myTopupView.node)},onWithdrawalButtonDidPressed:function(){if(!this.isWithdrawOpen)switch(this.isWithdrawOpen=!0,n.default.playButtonClickSound(),a.default.guard()){case"verification":this.onRegisterViewButtonDidPressed();break;case"proceed":window.fbq&&window.fbq("trackCustom","withdraw",{currency:"PHP",customerId:a.default.getUserObject().username}),this.getWithdrawalApi();break;case"alert":n.default.showAlertView(n.default.getLocalizedString(this.i18nJson,"topupToUnlock"),this);break;case"download":this.onPwaButtonDidPressed()}},getWallet:function(){var e=this;return u(s().mark(function t(){var a,r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new LobbyScript,t.next=3,a.getWallet();case 3:if(r=t.sent,!n.default.isSessionExpired(r)){t.next=7;break}return n.default.handleSessionExpiration(r,e),t.abrupt("return");case 7:e.updateWallet(r.result.mainWallet);case 8:case"end":return t.stop()}},t)}))()},getWithdrawalApi:function(){var e=this;return u(s().mark(function t(){var r,o;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.default.showLoadingView("",e),r=new LobbyScript,t.next=4,r.getWithdraw();case 4:if(o=t.sent,n.default.hideLoadingView(e),!n.default.isSessionExpired(o)){t.next=9;break}return n.default.handleSessionExpiration(o,e),t.abrupt("return");case 9:200==o.status?(a.default.setWithdrawObject(o.result),e.updateWallet(o.result.mainWallet),e.gotoWithdrawView()):n.default.showAlertView(o.message,e),n.default.hideLoadingView(e);case 11:case"end":return t.stop()}},t)}))()},gotoWithdrawView:function(){var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/withdraw/withdraw",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);e.myWithdrawView=cc.instantiate(a).getComponent("WithdrawView"),e.updatePrefabSize(),e.myWithdrawView.setCallBack(e),e.myWithdrawView.updateView(),e.node.addChild(e.myWithdrawView.node),n.default.hideLoadingView(e)})},onWithdrawCloseButtonDidPressed:function(){this.isWithdrawOpen=!1,this.node.removeChild(this.myWithdrawView.node),this.myWithdrawView.node.destroy(),this.myWithdrawView=null},onProfileButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),n.default.showLoadingView("",e);var t="prefabs/profile/profile",r="Profile";a.default.getVerificationStatus()&&(t="prefabs/verified_profile/verified_profile",r="VerifiedProfileView"),cc.resources.load(t,cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);e.myProfileView=cc.instantiate(a).getComponent(r),e.updatePrefabSize(),e.myProfileView.setCallBack(e),e.myProfileView.updateView(),e.node.addChild(e.myProfileView.node),n.default.hideLoadingView(e)})},onProfileViewDidClosed:function(){this.node.removeChild(this.myProfileView.node),this.myProfileView.node.destroy(),this.myProfileView=null},verifyBeforeLogout:function(){this.onProfileViewDidClosed(),this.onRegisterViewButtonDidPressed()},onEventButtonDidPressed:function(){var e=this;return u(s().mark(function t(){var r,o,i,c,l,u,d,h;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isEventOpen){t.next=2;break}return t.abrupt("return");case 2:e.isEventOpen=!0,n.default.playButtonClickSound(),n.default.showLoadingView("",e),e.mEventButtonView&&e.mEventButtonView.updateRedDot(),r=a.default.getPromotionObject(),o=r.findIndex(function(e){return"signin"==e.redirectUrl}),i=r.findIndex(function(e){return"funding"==e.redirectUrl}),(c=r.findIndex(function(e){return"weekcard"==e.redirectUrl}))>-1&&(1==(l=a.default.getWeekCardDataObject()).status&&l.data.setting.length>0?(u=l.data,r[c].navigateTo="getWeekCardData",r[c].data=u):r.splice(c,1)),i>-1&&(r[i].navigateTo="getReliefFundData",r[i].data=a.default.getReliefFundDataObject()),o>-1&&((d=a.default.getSignInRecordObject()).status?(r[o].navigateTo="signInRecord",r[o].data=d):r.splice(o,1)),(h=e).myEventView=cc.instantiate(e.mEventPrefab).getComponent("Event"),h.updatePrefabSize(),h.myEventView.setPromotionList(r),h.myEventView.setCallBack(h),h.myEventView.updateView(),h.node.addChild(h.myEventView.node),n.default.hideLoadingView(e);case 21:case"end":return t.stop()}},t)}))()},onEventViewDidClosed:function(){var e=this;this.isEventOpen=!1,this.node.removeChild(this.myEventView.node),this.myEventView.node.destroy(),this.myEventView=null,setTimeout(function(){return e.autoShowDialog()},1)},onFollowUsButtonDidPressed:function(){this.isFollowUsOpen||(this.isFollowUsOpen=!0,n.default.playButtonClickSound(),n.default.showLoadingView("",this),this.mFollowUsButtonView&&this.mFollowUsButtonView.updateRedDot(),this.myFollowUsView=cc.instantiate(this.mFollowUsPrefab).getComponent("FollowUs"),this.updatePrefabSize(),this.myFollowUsView.setCallBack(this),this.myFollowUsView.updateView(),this.node.addChild(this.myFollowUsView.node),n.default.hideLoadingView(this))},onFollowUsViewDidClosed:function(){var e=this;this.isFollowUsOpen=!1,this.node.removeChild(this.myFollowUsView.node),this.myFollowUsView.node.destroy(),this.myFollowUsView=null,setTimeout(function(){return e.autoShowDialog()},1)},onRegisterViewButtonDidPressed:function(){if(!this.isVerifyOpen){this.isVerifyOpen=!0;var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/register/register",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);e.myRegisterView=cc.instantiate(a).getComponent("Register"),e.updatePrefabSize(),e.myRegisterView.setCallBack(e),e.myRegisterView.updateView(),e.node.addChild(e.myRegisterView.node),n.default.hideLoadingView(e)})}},onRegisterViewDidClosed:function(){var e=this;this.isVerifyOpen=!1,this.isWelcomeBonusOpen=!1,this.isDailyBonusOpen=!1,this.isFollowUsOpen=!1,this.isCarnivalOpen=!1,this.isEventOpen=!1,this.isDepositOpen=!1,this.isWithdrawOpen=!1,this.isVipOpen=!1,this.isMailboxOpen=!1,this.isRebateOpen=!1,this.isReferralOpen=!1,this.myProfileView&&this.myProfileView.updateViewWithoutAnimation(),this.updateAccountButtonStatus(),this.node.removeChild(this.myRegisterView.node),this.myRegisterView.node.destroy(),this.myRegisterView=null,setTimeout(function(){return e.autoShowDialog()},1)},updateAccountButtonStatus:function(){},onOfficialAccountButtonDidPressed:function(){n.default.playButtonClickSound(),a.default.getVerificationStatus()||this.onRegisterViewButtonDidPressed()},onGameItemDidPressed:function(e,t){switch(n.default.playButtonClickSound(),a.default.gameGuard()){case"verification":this.onRegisterViewButtonDidPressed();break;case"proceed":case"alert":this.handleGameItemDidPressed(e,t);break;case"download":this.onPwaButtonDidPressed()}},handleGameItemDidPressed:function(e,t){var r=this;return u(s().mark(function o(){var i,c,l,u,d,h,m,f,p,g,y;return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n.default.showLoadingView("",r),i=e[t],c=i.id,l=i.platformProductId,u=i.platformProductName,d=i.isHorizontal,h=new LobbyScript,o.next=9,h.playGame(c);case 9:if(m=o.sent,!n.default.isSessionExpired(m)){o.next=13;break}return n.default.handleSessionExpiration(m,r),o.abrupt("return");case 13:200==m.status&&(window.fbq&&window.fbq("trackCustom","gameLaunch",{customerId:a.default.getUserObject().username,gameCategory:"slot",gameId:c,vendor:u}),f=JSON.parse(localStorage.getItem("gameHistory")||"[]"),-1!==(p=f.findIndex(function(e){return e.id===i.id}))&&f.splice(p,1),f.unshift(i),f.length>20&&f.pop(),localStorage.setItem("gameHistory",JSON.stringify(f)),f.length>0&&(r.mStartLabel.getComponent(cc.Label).string=f[0].name),1==m.result.playGame.status?((g=m.result.playGame.form).includes("<html")?(y="\n                                document.open();\n                                document.write(`"+g.replace(/`/g,"\\`")+"`);\n                                document.close();\n                            ",r.showGameViewWithInjectJs(y,l,d)):r.showGameViewWithUrl(g,l,d),n.default.hideLoadingView(r)):(n.default.hideLoadingView(r),n.default.showAlertView(m.result.playGame.message,r)));case 14:case"end":return o.stop()}},o)}))()},showGameViewWithInjectJs:function(e,t,r){n.default.stopLobbyBackgroundMusicForGame(),a.default.setGameViewData({js:e,platformId:t,isHorizontal:r,isLoadUrl:!1,url:""}),cc.director.loadScene("GameView")},showGameViewWithUrl:function(e,t,r){n.default.stopLobbyBackgroundMusicForGame(),a.default.getIsApp()?n.default.sendToApp(JSON.stringify({gameUrl:e,isFirstPartyGame:3238==t})):(a.default.setGameViewData({js:"",platformId:t,isHorizontal:r,isLoadUrl:!0,url:e}),cc.director.loadScene("GameView"))},onLogoutButtonDidPressed:function(){var e=this;return u(s().mark(function t(){return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.default.playButtonClickSound(),n.default.showLoadingView("",e),n.default.logout(e),n.default.hideLoadingView(e);case 4:case"end":return t.stop()}},t)}))()},onProfileDidChanged:function(){this.configureUserProfile()},onDailyBonusButtonDidPressed:function(){this.isDailyBonusOpen||(this.isDailyBonusOpen=!0,n.default.playButtonClickSound(),n.default.showLoadingView("",this),this.mAccumDepositButtonView&&this.mAccumDepositButtonView.updateRedDot(),this.mDailyBonusView=cc.instantiate(this.mDailyBonusPrefab).getComponent("DailyBonus"),this.updatePrefabSize(),this.mDailyBonusView.setCallBack(this),this.mDailyBonusView.updateView(),this.node.addChild(this.mDailyBonusView.node),n.default.hideLoadingView(this))},onDailyBonusViewCloseButtonDidPressed:function(e){var t=this;this.isDailyBonusOpen=!1,this.node.removeChild(this.mDailyBonusView.node),this.mDailyBonusView.node.destroy(),this.mDailyBonusView=null,e>0?this.goToTopUpView(e):setTimeout(function(){return t.autoShowDialog()},1)},onWelcomeBonusButtonDidPressed:function(){this.isWelcomeBonusOpen||(this.isWelcomeBonusOpen=!0,n.default.playButtonClickSound(),n.default.showLoadingView("",this),this.mWelcomeBonusButtonView&&this.mWelcomeBonusButtonView.updateRedDot(),this.mWelcomeBonusView=cc.instantiate(this.mWelcomeBonusPrefab).getComponent("WelcomeBonus"),this.updatePrefabSize(),this.mWelcomeBonusView.setCallBack(this),this.mWelcomeBonusView.updateView(),this.node.addChild(this.mWelcomeBonusView.node),n.default.hideLoadingView(this))},onWelcomeBonusViewCloseButtonDidPressed:function(){var e=this;this.isWelcomeBonusOpen=!1,this.node.removeChild(this.mWelcomeBonusView.node),this.mWelcomeBonusView.node.destroy(),this.mWelcomeBonusView=null,setTimeout(function(){return e.autoShowDialog()},1)},onWelcomeBonusViewDepositButtonDidPressed:function(e){this.isWelcomeBonusOpen=!1,this.node.removeChild(this.mWelcomeBonusView.node),this.goToTopUpView(e)},callMailBoxApi:function(){var e=this;return u(s().mark(function t(){var r,o,i,c,l,u,d,h,m,f,p;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a.default.getUserObject().username){t.next=3;break}return t.abrupt("return");case 3:return r=e,o=new LobbyScript,t.next=7,o.getMailbox();case 7:if(i=t.sent,!n.default.isSessionExpired(i)){t.next=11;break}return n.default.handleSessionExpiration(i,r),t.abrupt("return");case 11:200==i.status&&(c=i.result,l=c.getAccumulateDepositData.data,u=c.getMissionData,d=c.getDepositPromotion,h=!1,null==l&&null!=a.default.getAccumulateDepositObject()&&(h=!0),null!=l&&null==a.default.getAccumulateDepositObject()&&(h=!0),u.status!=a.default.getMissionDataObject().status&&(h=!0),null==u.data&&null!=a.default.getMissionDataObject().data&&(h=!0),null!=u.data&&null==a.default.getMissionDataObject().data&&(h=!0),null==d&&null!=a.default.getWelcomeBonusObject()&&(h=!0),null!=d&&null==a.default.getWelcomeBonusObject()&&(h=!0),h&&e.updateHeaderIcon(),a.default.setAccumulateDepositObject(l),a.default.setReliefFundDataObject(c.getReliefFundData),a.default.setMissionDataObject(u),a.default.setPaymentsProviderObject(c.paymentsProvider),a.default.setMailBox(c.mailBox),a.default.setWelcomeBonusObject(d),(m=a.default.getUserObject()).firstPasswordUpdate=c.getUserProfile.firstPasswordUpdate,m.phoneNumber=c.getUserProfile.phoneNumber,a.default.setUserObject(m),e.updateAccountButtonStatus(),e.updateWallet(c.mainWallet),e.updateMailRedDot(),f=e.checkForNewArriveMessage(),e.mMailBubble&&f&&(e.mMailBubble.active=!0,setTimeout(function(){r.mMailBubble&&(r.mMailBubble.active=!1)},5e3)),1==(p=c.getDepositNotify).status&&p.amount>0&&window.fbq&&(window.fbq("trackCustom","firstDepositArrival",{currency:"PHP",customerId:a.default.getUserObject().username,revenue:p.amount,value:p.amount}),window.fbq("track","Purchase",{currency:"PHP",customerId:a.default.getUserObject().username,revenue:p.amount,value:p.amount}))),setTimeout(function(){"function"==typeof r.callMailBoxApi&&r.callMailBoxApi()},5e3);case 13:case"end":return t.stop()}},t)}))()},onMailboxButtonDidPressed:function(){var e=this;return u(s().mark(function t(){var a;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMailboxOpen){t.next=2;break}return t.abrupt("return");case 2:e.isMailboxOpen=!0,a=e,n.default.playButtonClickSound(),n.default.showLoadingView("",a),cc.resources.load("prefabs/mailbox/mailbox",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(a);null==a.mMailboxView&&(a.mMailboxView=cc.instantiate(t).getComponent("Mailbox"),a.updatePrefabSize(),a.mMailboxView.setCallBack(a)),a.mMailboxView.updateView(),a.node.addChild(a.mMailboxView.node),n.default.hideLoadingView(a)});case 7:case"end":return t.stop()}},t)}))()},onMailboxCloseButtonDidPressed:function(){this.isMailboxOpen=!1,this.node.removeChild(this.mMailboxView.node)},onReferralButtonDidPressed:function(){if(!this.isReferralOpen)switch(this.isReferralOpen=!0,n.default.playButtonClickSound(),a.default.guard()){case"verification":this.onRegisterViewButtonDidPressed();break;case"proceed":null==a.default.getReferralObject().getInviteRewardData?this.callGetReferralApi():this.gotoReferralView();break;case"alert":n.default.showAlertView(n.default.getLocalizedString(this.i18nJson,"topupToUnlock"),this);break;case"download":this.onPwaButtonDidPressed()}},gotoReferralView:function(){var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/referral/referral",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.mReferralView&&(e.mReferralView=cc.instantiate(a).getComponent("ReferralView"),e.updatePrefabSize(),e.mReferralView.setCallBack(e)),e.mReferralView.updateView(),e.node.addChild(e.mReferralView.node),n.default.hideLoadingView(e)})},onReferralViewCloseButtonDidPressed:function(){this.isReferralOpen=!1,this.node.removeChild(this.mReferralView.node)},onCsButtonDidPressed:function(){n.default.playButtonClickSound(),window.open(a.default.getLiveChat(),"_blank").focus()},onRedeemCodeDidPressed:function(){var e=this;n.default.playButtonClickSound(),n.default.showLoadingView("",e),cc.resources.load("prefabs/profile/redeem_code",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.mRedeemCodeView&&(e.mRedeemCodeView=cc.instantiate(a).getComponent("RedeemCode"),e.updatePrefabSize(),e.mRedeemCodeView.setCallBack(e)),e.mRedeemCodeView.updateView(),e.node.addChild(e.mRedeemCodeView.node),n.default.hideLoadingView(e)})},onRedeemCodeViewDidClosed:function(){this.node.removeChild(this.mRedeemCodeView.node)},showWinnerInfoView:function(){var e=this,t=this,a=0;if(this.mWinnerInfoView.getChildByName("winner").active=!this.mShowNewPrizeNotification,this.mWinnerInfoView.getChildByName("prize").active=this.mShowNewPrizeNotification,this.mShowNewPrizeNotification)this.mWinnerInfoView.zIndex=9999,a=8,this.mWinnerInfoView.getChildByName("prize").getChildByName("amount_label").getComponent(cc.Label).string=n.default.numberWithCommas(this.mNewPrizeAmount);else{a=5,this.mWinnerInfoAvatar.active=!1,this.mWinnerInfoMultiplier.getComponent(cc.Label).string=n.default.getRandomNumber(30,500)+" X",this.mWinnerInfoName.getComponent(cc.Label).string=n.default.getRandomAlphaNumeric(7)+"...";var r="av"+n.default.getRandomNumber(1,17);cc.loader.loadRes("images/lobby/"+r+".png",cc.SpriteFrame,function(e,n){t.mWinnerInfoAvatar.getComponent(cc.Sprite).spriteFrame=n,t.mWinnerInfoAvatar.active=!0})}var o=cc.view.getVisibleSize().width/2,i=cc.view.getVisibleSize().width/2-400;cc.tween(this.mWinnerInfoView).to(.25,{position:cc.v2(i,220)},{easing:"cubicInOut"}).delay(a).to(.25,{position:cc.v2(o,220)},{easing:"cubicInOut"}).call(function(){e.mWinnerInfoView.getChildByName("prize").active&&(e.mShowNewPrizeNotification=!1),e.mWinnerInfoNextShowTimer=n.default.getRandomNumber(5,10)}).start()},callGetReferralApi:function(){var e=this;return u(s().mark(function t(){var r,o;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.default.showLoadingView("",e),r=new LobbyScript,t.next=5,r.getReferral();case 5:if(o=t.sent,!n.default.isSessionExpired(o)){t.next=9;break}return n.default.handleSessionExpiration(o,e),t.abrupt("return");case 9:200==o.status?(a.default.setReferralObject(o.result),n.default.hideLoadingView(e),e.gotoReferralView()):n.default.showAlertView(o.message,e),n.default.hideLoadingView(e);case 11:case"end":return t.stop()}},t)}))()},onVipButtonDidPressed:function(){if(!this.isVipOpen)switch(this.isVipOpen=!0,n.default.playButtonClickSound(),a.default.guard()){case"verification":this.onRegisterViewButtonDidPressed();break;case"proceed":this.callGetVipApi();break;case"alert":n.default.showAlertView(n.default.getLocalizedString(this.i18nJson,"topupToUnlock"),this);break;case"download":this.onPwaButtonDidPressed()}},callGetVipApi:function(){var e=this;return u(s().mark(function t(){var r,o,i,c;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.default.showLoadingView("",e),r=new LobbyScript,t.next=4,r.getVip();case 4:if(o=t.sent,!n.default.isSessionExpired(o)){t.next=8;break}return n.default.handleSessionExpiration(o,e),t.abrupt("return");case 8:200==o.status?(i=o.result,a.default.setVipList(i.vipList),c=e,cc.resources.load("prefabs/vip/vip",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(c);null==c.mVipView&&(c.mVipView=cc.instantiate(t).getComponent("VipVIew"),c.updatePrefabSize(),c.mVipView.setCallBack(c)),c.mVipView.updateView(i),c.node.addChild(c.mVipView.node)})):n.default.showAlertView(o.message,e),n.default.hideLoadingView(e);case 10:case"end":return t.stop()}},t)}))()},onVipViewCloseButtonDidPressed:function(e){this.isVipOpen=!1,this.node.removeChild(this.mVipView.node),e&&this.onStartButtonDidPressed()},onRebateButton2DidPressed:function(){if(!this.isRebateOpen)switch(this.isRebateOpen=!0,n.default.playButtonClickSound(),a.default.guard()){case"verification":this.onRegisterViewButtonDidPressed();break;case"proceed":this.showRebateView();break;case"alert":n.default.showAlertView(n.default.getLocalizedString(this.i18nJson,"topupToUnlock"),this);break;case"download":this.onPwaButtonDidPressed()}},showRebateView:function(){var e=this;return u(s().mark(function t(){var r,o,i;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.default.showLoadingView("",e),null!=a.default.getIncentiveDataObject()){t.next=14;break}return r=new LobbyScript,t.next=5,r.getRebate();case 5:if(o=t.sent,!n.default.isSessionExpired(o)){t.next=9;break}return n.default.handleSessionExpiration(o,e),t.abrupt("return");case 9:if(200==o.status){t.next=13;break}return n.default.showAlertView(o.message,e),n.default.hideLoadingView(e),t.abrupt("return");case 13:a.default.setIncentiveDataObject(o.result.getIncentiveData);case 14:if(0!=a.default.getIncentiveDataObject().status){t.next=18;break}return n.default.showAlertView(a.default.getIncentiveDataObject().message,e),n.default.hideLoadingView(e),t.abrupt("return");case 18:i=e,cc.resources.load("prefabs/rebate/rebate",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(i);i.mRebateView=cc.instantiate(t).getComponent("RebateView"),i.updatePrefabSize(),i.mRebateView.setCallBack(i),i.mRebateView.updateView(),i.node.addChild(i.mRebateView.node)}),n.default.hideLoadingView(e);case 21:case"end":return t.stop()}},t)}))()},onRebate2CloseButtonDidPressed:function(){this.isRebateOpen=!1,this.node.removeChild(this.mRebateView.node),this.mRebateView.node.destroy(),this.mRebateView=null},onPwaButtonDidPressed:function(){n.default.playButtonClickSound(),"Android"==n.default.getMobileOperatingSystem()?this.gotoPwaAndroidView():this.gotoPwaiOSView()},gotoPwaAndroidView:function(){var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/pwa/pwa_android",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);e.mPwaAndroidView=cc.instantiate(a).getComponent("PwaAndroidView"),e.updatePrefabSize(),e.mPwaAndroidView.setCallBack(e),e.mPwaAndroidView.updateView(),e.node.addChild(e.mPwaAndroidView.node),n.default.hideLoadingView(e)})},onPwaAndroidViewCloseButtonDidPressed:function(){this.node.removeChild(this.mPwaAndroidView.node),this.mPwaAndroidView.node.destroy(),this.mPwaAndroidView=null},gotoPwaiOSView:function(){var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/pwa/pwa_ios",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);e.mPwaiOSView=cc.instantiate(a).getComponent("PwaIOSView"),e.updatePrefabSize(),e.mPwaiOSView.setCallBack(e),e.mPwaiOSView.updateView(),e.node.addChild(e.mPwaiOSView.node),n.default.hideLoadingView(e)})},onPwaiOSViewCloseButtonDidPressed:function(){this.node.removeChild(this.mPwaiOSView.node),this.mPwaiOSView.node.destroy(),this.mPwaiOSView=null},onStartButtonDidPressed:function(){switch(n.default.playButtonClickSound(),a.default.guard()){case"verification":case"proceed":case"alert":this.handleStartButtonDidPressed();break;case"download":this.onPwaButtonDidPressed()}},handleStartButtonDidPressed:function(){var e=this;return u(s().mark(function t(){var a,r,o,i,c,l;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=(a=JSON.parse(localStorage.getItem("gameHistory")||"[]")).length){t.next=3;break}return t.abrupt("return");case 3:return r=a[0],o=new LobbyScript,t.next=7,o.playGame(r.id);case 7:if(i=t.sent,!n.default.isSessionExpired(i)){t.next=11;break}return n.default.handleSessionExpiration(i,e),t.abrupt("return");case 11:if(200==i.status){t.next=13;break}return t.abrupt("return");case 13:1==i.result.playGame.status?((c=i.result.playGame.form).includes("<html")?(l="\n                            document.open();\n                            document.write(`"+c.replace(/`/g,"\\`")+"`);\n                            document.close();\n                        ",e.showGameViewWithInjectJs(l,r.platformProductId,r.isHorizontal)):e.showGameViewWithUrl(c,r.platformProductId,r.isHorizontal),n.default.hideLoadingView(e)):(n.default.hideLoadingView(e),n.default.showAlertView(i.result.playGame.message,e));case 14:case"end":return t.stop()}},t)}))()},onCarnivalButtonDidPressed:function(){var e=this;return u(s().mark(function t(){var a;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isCarnivalOpen){t.next=2;break}return t.abrupt("return");case 2:e.isCarnivalOpen=!0,n.default.playButtonClickSound(),n.default.showLoadingView("",e),e.mCarnivalButtonView&&e.mCarnivalButtonView.updateRedDot(),null==(a=e).mCarnivalView&&(a.mCarnivalView=cc.instantiate(e.mCarnivalPrefab).getComponent("Carnival"),a.updatePrefabSize(),a.mCarnivalView.setCallBack(a)),a.mCarnivalView.updateView(),a.node.addChild(a.mCarnivalView.node),n.default.hideLoadingView(e);case 11:case"end":return t.stop()}},t)}))()},onCarnivalViewCloseButtonDidPressed:function(){var e=this;this.isCarnivalOpen=!1,this.node.removeChild(this.mCarnivalView.node),setTimeout(function(){return e.autoShowDialog()},1)},updateWallet:function(e){var t=a.default.getUserObject();t.mainWallet=e,a.default.setUserObject(t),this.myUserBalance&&(this.myUserBalance.getChildByName("loadingAnim").active=!1,this.myUserBalance.getChildByName("label").getComponent(cc.Label).string=n.default.numberWithCommas(t.mainWallet.amount))},updateMailRedDot:function(){if(null!=this.mMailRedDot){var e=a.default.getMailBox();if(e){var t=e.mail.filter(function(e){return e.isNewMessage}),n=e.prize.filter(function(e){return e.isNewMessage});this.mMailRedDot.active=t.length>0||n.length>0}else this.mMailRedDot.active=!1}},checkForNewArriveMessage:function(){var e=a.default.getMailBox();if(!e)return a.default.setNewMessageCount(0),!1;var t=e.mail.filter(function(e){return e.isNewMessage}),n=e.prize.filter(function(e){return e.isNewMessage});return a.default.getNewMessageCount()<t.length+n.length?(a.default.setNewMessageCount(t.length+n.length),!0):(a.default.setNewMessageCount(t.length+n.length),!1)},configureGameGroup:function(){this.callGetHomepageData()},configureHotGame:function(e){var t=this;cc.resources.load("prefabs/gametype/hotGameContainer",cc.Prefab,function(n,a){if(n)console.error("Failed to load prefab:",n);else{var r=30+200*Math.ceil(.5);t.myGameScrollContent.setContentSize(cc.size(r<830?830:r,400));for(var o=1;o<=1;o++){var i=new cc.instantiate(a).getComponent("GameType");i.init(102+200*(Math.ceil(o/2)-1),o%2==0?-100:100,{game_code:"SuperAce"},e,!1,t),t.myGameScrollContent.addChild(i.node),t.createdGameType.push(i)}}})},configureAnnouncement:function(){var e=a.default.getAnnouncement();e&&0!==e.length?(this.myAnnouncement||(this.myAnnouncement=cc.instantiate(this.myAnnouncementPrefab).getComponent("Announcement"),this.myAnnouncement.init(-19,221,522,32),this.myAnnouncement.setCallBack(this),this.myLobbyContainer.addChild(this.myAnnouncement.node)),this.myAnnouncement.updateView(-19,221,522,32)):this.myAnnouncement&&(this.myAnnouncement.node.removeFromParent(),this.myAnnouncement=null)},playBtnAnimation:function(){var e=[{btnName:"myReferBtn",animName:"refer"},{btnName:"myRebateBtn",animName:"rebate"},{btnName:"myMessageBtn",animName:"message"},{btnName:"mySupportBtn",animName:"support"},{btnName:"myMoreBtn",animName:"more"}];for(var t in e){var n=this[e[t].btnName];if(n){var a=n.getChildByName("img");if(a){var r=a.getComponent(cc.Animation);if(!r)continue;cc.resources.load("animations/lobby/"+e[t].animName,cc.AnimationClip,function(e,t){e||(this.anim.addClip(t,this.animName),this.anim.play(this.animName),this.anim.on("stop",function(){this.anim&&this.anim.play(this.animName)}.bind({anim:this.anim,animName:this.animName})))}.bind({anim:r,animName:e[t].animName}))}}}},onLoginButtonDidPressed:function(e,t,a){var r=this;a||n.default.playButtonClickSound(),n.default.showLoadingView("",r),cc.resources.load("prefabs/login/login",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(r);null==r.myLoginView&&(r.myLoginView=cc.instantiate(t).getComponent("Login"),r.updatePrefabSize()),r.myLoginView.updateView(r),r.node.addChild(r.myLoginView.node),n.default.hideLoadingView(r)})},onLoginCloseButtonDidPressed:function(){this.node.removeChild(this.myLoginView.node),n.default.isLoggedIn()&&this.callGetProfileApi()},onRegisterButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),n.default.showLoadingView("",e),cc.resources.load("prefabs/registration/registration",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.myRegistrationView&&(e.myRegistrationView=cc.instantiate(a).getComponent("Registration"),e.updatePrefabSize()),e.myRegistrationView.updateView(e),e.node.addChild(e.myRegistrationView.node),n.default.hideLoadingView(e)})},onRegisterCloseButtonDidPressed:function(){this.node.removeChild(this.myRegistrationView.node),n.default.isLoggedIn()&&this.callGetProfileApi()},onDrawerTriangleButtonDidPressed:function(){console.log("onDrawerTriangleButtonDidPressed"),n.default.playButtonClickSound();var e=this.myDrawerBG.getChildByName("triangleContainer").getChildByName("iconTriangle"),t=this.myDrawerBG.getComponent(cc.Widget);if(this.isDrawerOpen){e.angle=0;var a=-25;this.myDrawerBGContent&&(a=-1*this.myDrawerBGContent.width),cc.tween(t).to(.1,{right:a}).start()}else e.angle=-180,cc.tween(t).to(.1,{right:0}).start();this.isDrawerOpen=!this.isDrawerOpen},onCountryLanguageButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),cc.resources.load("prefabs/language/language",cc.Prefab,function(t,a){t?console.error("Failed to load prefab:",t):(null==e.myLanguageView&&(e.myLanguageView=cc.instantiate(a).getComponent("Language"),e.updatePrefabSize()),e.myLanguageView.updateView(e),e.node.addChild(e.myLanguageView.node),n.default.hideLoadingView(e))})},onLanguageCloseButtonDidPressed:function(){this.node.removeChild(this.myLanguageView.node)},onSettingButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),cc.resources.load("prefabs/settings/settings",cc.Prefab,function(t,a){t?console.error("Failed to load prefab:",t):(null==e.mySettingsView&&(e.mySettingsView=cc.instantiate(a).getComponent("Settings"),e.updatePrefabSize()),e.mySettingsView.updateView(e),e.node.addChild(e.mySettingsView.node),n.default.hideLoadingView(e))})},onSettingsCloseButtonDidPressed:function(){this.node.removeChild(this.mySettingsView.node)},onDepositButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),cc.resources.load("prefabs/deposit/deposit",cc.Prefab,function(t,a){t?console.error("Failed to load prefab:",t):(null==e.myDepositView&&(e.myDepositView=cc.instantiate(a).getComponent("Deposit"),e.updatePrefabSize()),e.myDepositView.updateView(e,"deposit"),e.node.addChild(e.myDepositView.node),e.myDrawerBG.active=!1,cc.tween(e.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:-1*e.myLobbyContainer.width,right:e.myLobbyContainer.width}).start(),n.default.hideLoadingView(e))})},onWithdrawalWalletButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),cc.resources.load("prefabs/deposit/deposit",cc.Prefab,function(t,a){t?console.error("Failed to load prefab:",t):(null==e.myDepositView&&(e.myDepositView=cc.instantiate(a).getComponent("Deposit"),e.updatePrefabSize()),e.myDepositView.updateView(e,"withdrawal"),e.node.addChild(e.myDepositView.node),e.myDrawerBG.active=!1,cc.tween(e.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:-1*e.myLobbyContainer.width,right:e.myLobbyContainer.width}).start(),n.default.hideLoadingView(e))})},onDepositBackButtonDidPressed:function(){var e=this;cc.tween(this.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:0,right:0}).call(function(){e.myDrawerBG.active=!0,e.node.removeChild(e.myDepositView.node)}).start()},onPersonalCenterButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),n.default.isLoggedIn()?(n.default.showLoadingView("",e),cc.resources.load("prefabs/personal/personalCenter",cc.Prefab,function(t,a){t?console.error("Failed to load prefab:",t):(null==e.myPersonalView&&(e.myPersonalView=cc.instantiate(a).getComponent("PersonalCenter"),e.updatePrefabSize()),e.myPersonalView.updateView(e),e.node.addChild(e.myPersonalView.node),e.myDrawerBG.active=!1,cc.tween(e.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:-1*e.myLobbyContainer.width,right:e.myLobbyContainer.width}).start(),n.default.hideLoadingView(e))})):this.onLoginButtonDidPressed(null,null,!0)},onPersonalCenterBackButtonDidPressed:function(){var e=this,t=this;if(this.myDepositView&&this.myDepositView.node&&this.myDepositView.node.parent){this.node.removeChild(this.myPersonalView.node),this.myDepositView.node.active=!0;var n="SureTech";this.myDepositView.mySureTechTabBtn&&!this.myDepositView.mySureTechTabBtn.active&&(n="Dpay"),"function"==typeof this.myDepositView.onDepositTabDidPressed&&this.myDepositView.onDepositTabDidPressed(null,n,!0),"function"==typeof this.myDepositView.showBgComponent&&this.myDepositView.showBgComponent()}else a.default.getSelectedAvatar()==localStorage.getItem("selected_avatar")&&cc.loader.loadRes("images/profile/Avatar"+a.default.getSelectedAvatar()+".png",cc.SpriteFrame,function(e,n){t.myHeaderProfileImg.getComponent(cc.Sprite).spriteFrame=n}),cc.tween(this.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:0,right:0}).call(function(){e.myDrawerBG.active=!0,e.node.removeChild(e.myPersonalView.node)}).start()},onGameGroupButtonDidPressed:function(e){var t=this;if(e.code!=this.mCurrentGameGroup){if(this.createdGameGroup.forEach(function(e){e&&e.isValid&&e.unClick()}),this.createdGameType.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),this.createdGameType=[],"hot"==e.code)this.callGetGamesByTagApi(e.id,{status:"active"});else{var n=a.default.getGameCategories();for(var r in n){var o=n[r];if(o.code==e.code){var i=o.developers;cc.resources.load("prefabs/provider/liveDeveloper",cc.Prefab,function(e,n){if(e)console.error("Failed to load prefab:",e);else for(var a in i){var r=i[a],c=new cc.instantiate(n).getComponent("GameType");c.init(104+208*(Math.ceil((parseInt(a)+1)/2)-1),(parseInt(a)+1)%2==0?-104:104,r,o,!0,t),t.myGameScrollContent.addChild(c.node),t.createdGameType.push(c)}});var c=30+200*Math.ceil(i.length/2);this.myGameScrollContent.setContentSize(cc.size(c<830?830:c,400));break}}}this.mCurrentGameGroup=e.code}},onDeveloperButtonDidPressed:function(e,t){var a=this;n.default.playButtonClickSound(),n.default.isLoggedIn()?(n.default.showLoadingView("",a),cc.resources.load("prefabs/provider/gameList",cc.Prefab,function(r,o){r?console.error("Failed to load prefab:",r):(null==a.myGameListView&&(a.myGameListView=cc.instantiate(o).getComponent("GameList"),a.updatePrefabSize()),a.myGameListView.updateView(e,t,a),a.node.addChild(a.myGameListView.node),a.myDrawerBG.active=!1,cc.tween(a.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:-1*a.myLobbyContainer.width,right:a.myLobbyContainer.width}).start(),n.default.hideLoadingView(a))})):this.onLoginButtonDidPressed(null,null,!0)},onGameListBackButtonDidPressed:function(){var e=this;cc.tween(this.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:0,right:0}).call(function(){e.myDrawerBG.active=!0,e.node.removeChild(e.myGameListView.node)}).start()},onSupportButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),n.default.showLoadingView("",e),cc.resources.load("prefabs/customerservice/customerservice",cc.Prefab,function(t,a){t?console.error("Failed to load prefab:",t):(null==e.myCustomerServiceView&&(e.myCustomerServiceView=cc.instantiate(a).getComponent("CustomerService"),e.updatePrefabSize()),e.myCustomerServiceView.updateView(e),e.node.addChild(e.myCustomerServiceView.node),e.myDrawerBG.active=!1,cc.tween(e.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:-1*e.myLobbyContainer.width,right:e.myLobbyContainer.width}).start(),n.default.hideLoadingView(e))})},onCustomerSupportClicked:function(){this.myBannerView&&this.myBannerView.node&&this.myBannerView.node.active&&this.myBannerView.hide(),this.onSupportButtonDidPressed()},loadDrawerCsItems:function(){try{var e=JSON.parse(localStorage.getItem("from_index"));if(!e||!e.settings||!e.settings.contactUs)return console.log("No contactUs data found in dashboard settings for drawer"),void(this.myDrawerBGContent&&(this.myDrawerBGContent.active=!1));var t=e.settings.contactUs,n=this.filterActiveDrawerContacts(t);if(0===n.length)return console.log("No active contacts to display in drawer"),void(this.myDrawerBGContent&&(this.myDrawerBGContent.active=!1));n.sort(function(e,t){return void 0!==e.sequence&&void 0!==t.sequence?e.sequence-t.sequence:0}),this.createDrawerCsItems(n)}catch(error){console.error("Error loading drawer customer service items:",error)}},filterActiveDrawerContacts:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];"active"!==a.status&&"Active"!==a.status||a.logo&&""!==a.logo.trim()&&t.push(a)}return t},createDrawerCsItems:function(e){if(this.drawerCsItemPrefab)if(this.myDrawerBGContent){if(this.clearDrawerCsItems(),0!==e.length){for(var t=0;t<e.length;t++){var n=e[t],a=cc.instantiate(this.drawerCsItemPrefab),r=a.getComponent("DrawerCsItem");if(r){var o=10+50*t;a.x=o,a.y=0,a.anchorX=0,r.init(n,this),this.myDrawerBGContent.addChild(a),this.createdDrawerCsItems.push(a)}else console.error("DrawerCsItem component not found on prefab"),a.destroy()}var i=10+40*e.length+10*e.length;this.myDrawerBGContent.width=i,this.myDrawerBG.width=i+25;var c=this.myDrawerBG.getComponent(cc.Widget);c.right=-1*i,c.updateAlignment()}}else console.error("Drawer BG Content node is not set");else console.error("DrawerCsItem prefab is not set")},clearDrawerCsItems:function(){this.myDrawerBGContent&&this.myDrawerBGContent.removeAllChildren(!0),this.createdDrawerCsItems=[]},onDrawerCsItemClicked:function(e){console.log("Drawer customer service item clicked:",e)},onCustomerServiceBackButtonDidPressed:function(){var e=this;this.myDepositView&&this.myDepositView.node&&this.myDepositView.node.parent?(this.node.removeChild(this.myCustomerServiceView.node),"function"==typeof this.myDepositView.showBgComponent&&this.myDepositView.showBgComponent()):cc.tween(this.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:0,right:0}).call(function(){e.myDrawerBG.active=!0,e.node.removeChild(e.myCustomerServiceView.node)}).start()},onRebateButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),n.default.showLoadingView("",e),cc.resources.load("prefabs/rebate/rebate",cc.Prefab,function(t,a){t?console.error("Failed to load prefab:",t):(null==e.myRebateView&&(e.myRebateView=cc.instantiate(a).getComponent("Rebate"),e.updatePrefabSize()),e.myRebateView.updateView(e),e.node.addChild(e.myRebateView.node),e.myDrawerBG.active=!1,cc.tween(e.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:-1*e.myLobbyContainer.width,right:e.myLobbyContainer.width}).start(),n.default.hideLoadingView(e))})},onRebateBackButtonDidPressed:function(){var e=this;cc.tween(this.myLobbyContainer.getComponent(cc.Widget)).to(1/6,{left:0,right:0}).call(function(){e.myDrawerBG.active=!0,e.node.removeChild(e.myRebateView.node)}).start()},callGetProfileApi:function(){var e=this;return u(s().mark(function t(){var r,i;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.default.showLoadingView("Loading",e),t.prev=1,t.next=4,o.default.getProfile(localStorage.getItem("token"));case 4:if(r=t.sent,console.log("callGetProfileApi2"),console.log(r),!n.default.isSessionExpired(r)){t.next=10;break}return n.default.handleSessionExpiration(r,e),t.abrupt("return");case 10:if(!n.default.isServerError(r)){t.next=13;break}return n.default.handleServerError(r,e),t.abrupt("return");case 13:200==r.status&&(a.default.setUserObject(r.player),e.myLoginBtn.active=!1,e.myRegisterBtn.active=!1,e.myCopyIDBG.active=!0,e.myBalanceBG.active=!0,e.myDepositBtn.active=!0,e.myWithdrawBtn.active=!0,(i=e.myPlayIdLabel.getComponent(cc.Label))&&(i.string=r.player._id,e.scheduleOnce(function(){if(e.myCopyIDBG&&e.myPlayIdLabel){var t=e.myPlayIdLabel.width+20,n=e.myCopyIDBG.x,a=e.myCopyIDBG.y,r=e.myCopyIDBG.height;e.myCopyIDBG.width=t,e.myCopyIDBG.x=n,e.myCopyIDBG.y=a,e.myCopyIDBG.height=r}},0)),e.myPlayerNameLabel.getComponent(cc.Label).string=r.player.username,e.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(r.player.balance,2),n.default.hideLoadingView(e)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n.default.hideLoadingView(e);case 19:case"end":return t.stop()}},t,null,[[1,16]])}))()},callLoginApi:function(e,t,a,o){var i=this;return u(s().mark(function c(){var l;return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return n.default.showLoadingView("Loading",i),c.prev=1,c.next=4,r.default.login(e,t,a,o);case 4:l=c.sent,console.log(l),200==l.status&&(localStorage.setItem("verified_username",t),localStorage.setItem("verified_password",a),localStorage.setItem("token",l.token),n.default.hideLoadingView(i),i.callGetProfileApi()),c.next=17;break;case 9:if(c.prev=9,c.t0=c.catch(1),!n.default.handleSessionExpiration(c.t0,i)){c.next=13;break}return c.abrupt("return");case 13:if(!n.default.handleServerError(c.t0,i)){c.next=16;break}return n.default.hideLoadingView(i),c.abrupt("return");case 16:n.default.hideLoadingView(i);case 17:case"end":return c.stop()}},c,null,[[1,9]])}))()},callGetDevelopersApi:function(e){return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.default.getDevelopers(e);case 3:n=t.sent,console.log("----------getDevelopers-----------"),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},callGetDeveloperByIDApi:function(e){return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.default.getDeveloperById(e);case 3:n=t.sent,console.log("----------getDeveloperById-----------"),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},callGetCategoriesApi:function(e){var t=this;return u(s().mark(function n(){var a,r,o,c,l;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.default.getCategories(e);case 3:if(a=n.sent,console.log(a),e&&e.topLevel&&200==a.status){for(o in r=a.data)c=r[o],(l=new cc.instantiate(t.myGameGroupPrefab).getComponent("GameGroup")).init(0,-86*parseInt(o)-129,c,t),t.myGameGroupScrollContent.addChild(l.node);t.myGameGroupScrollContent.height=86+86*r.length}n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,null,[[0,8]])}))()},callGetCategoryByIDApi:function(e){return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.default.getCategoryById(e);case 3:n=t.sent,console.log("----------getCategoryById-----------"),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},callCategoriesWithProvidersApi:function(e){var t=this;return u(s().mark(function n(){var r,o,c,l,u;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=4,i.default.getCategoriesWithProviders(e);case 4:if(r=n.sent,console.log("----------getCategoriesWithProviders-----------"),console.log(r),200==r.status)for(c in o=r.data,a.default.setGameCategories(r.data),o)l=o[c],(u=new cc.instantiate(t.myGameGroupPrefab).getComponent("GameGroup")).init(0,-86*parseInt(c)-129,l,t),t.myGameGroupScrollContent.addChild(u.node),t.createdGameGroup.push(u),t.myGameGroupScrollContent.height=86+86*o.length;n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}},n,null,[[0,10]])}))()},callCategoriesWithGamesApi:function(e){return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.default.getCategoriesWithGames(e);case 3:n=t.sent,console.log("----------getCategoriesWithGames-----------"),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},callGetTagsApi:function(e){var t=this;return u(s().mark(function n(){var a,r,o,c,l;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.default.getTags(e);case 3:if(a=n.sent,console.log("----------getTags-----------"),console.log(a),200==a.status)for(o in r=a.data)c=r[o],(l=new cc.instantiate(t.myGameGroupPrefab).getComponent("GameGroup")).init(0,-43,c,t),t.myGameGroupScrollContent.addChild(l.node),t.createdGameGroup.push(l);n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}},n,null,[[0,9]])}))()},callGetTagByIDApi:function(e){return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.default.getTagById(e);case 3:n=t.sent,console.log("----------getTagById-----------"),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},callGetGamesApi:function(e){return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.default.getGames(e);case 3:n=t.sent,console.log("----------getGames-----------"),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},callGetGameByIDApi:function(e){return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.default.getGameById(e);case 3:n=t.sent,console.log("----------getGameById-----------"),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},callGetGameByCategoryApi:function(e,t,n){return u(s().mark(function a(){var r;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.default.getGamesByCategory(e,t);case 3:r=a.sent,console.log("----------getGamesByCategory----------- : "+n),console.log(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])}))()},callGetGameByDeveloperApi:function(e,t,n){return u(s().mark(function a(){var r;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.default.getGamesByDeveloper(e,t);case 3:r=a.sent,console.log("----------getGamesByDeveloper----------- : "+n),console.log(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])}))()},callGetHomepageData:function(){var e=this;return u(s().mark(function t(){var n,r,o,c,l,u,d;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,i.default.getHomepageData();case 4:if(n=t.sent,console.log("----------getHomepageData-----------"),console.log(n),200==n.status&&(r=!1,(o=n.data).hotGames&&(r=!0,o[u],(c=new cc.instantiate(e.myGameGroupPrefab).getComponent("GameGroup")).init(0,-43,o.hotGames.tag,e),e.myGameGroupScrollContent.addChild(c.node),e.createdGameGroup.push(c)),o.categories))for(u in l=o.categories,a.default.setGameCategories(l),l)d=l[u],(c=new cc.instantiate(e.myGameGroupPrefab).getComponent("GameGroup")).init(0,(r?-129:-43)+-86*parseInt(u),d,e),e.myGameGroupScrollContent.addChild(c.node),e.createdGameGroup.push(c),e.myGameGroupScrollContent.height=(r?86:0)+86*l.length;t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[0,10]])}))()},callGetGamesByTagApi:function(e,t){var n=this;return u(s().mark(function a(){var r,o;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=n,a.next=4,i.default.getGamesByTag(e,t);case 4:o=a.sent,console.log("----------getGamesByTag-----------"),console.log(o),o.data&&o.data.length>0&&cc.resources.load("prefabs/gametype/hotGameContainer",cc.Prefab,function(e,t){e?console.error("Failed to load prefab:",e):cc.resources.load("prefabs/gametype/hotGameContainer2",cc.Prefab,function(e,n){if(e)console.error("Failed to load prefab2:",e);else{for(var a=o.data,i=0;i<a.length;i++)if("spb_aviator"==a[i].game_code){if(i%2==1&&i>0){var c=a[i];a[i]=a[i-1],a[i-1]=c}break}var s=30+200*Math.ceil(a.length/2);r.myGameScrollContent.setContentSize(cc.size(s<830?830:s,400));var l=0;for(var u in a){var d=a[u],h=d.game_code,m=t,f=!1;"spb_aviator"==h&&(m=n,f=!0);var p=new cc.instantiate(m).getComponent("GameType"),g=102+200*(Math.ceil((l+1)/2)-1),y=(l+1)%2==0?-100:100;f&&(y=0),p.init(g,y,d,o.tag,!1,r),f&&p.node.setContentSize(cc.size(200,400)),r.myGameScrollContent.addChild(p.node),r.createdGameType.push(p),l+=f?2:1}}})}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}},a,null,[[0,10]])}))()},onCopyIdButtonDidPressed:function(){var e=this;return u(s().mark(function t(){var r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.default.getUserObject(),n.default.playButtonClickSound(),!a.default.getIsApp()){t.next=6;break}n.default.sendToApp(JSON.stringify({copyToClipboard:r.username})),t.next=10;break;case 6:return t.next=8,n.default.copyToClipboard(r.username);case 8:t.sent?e.showNotification(n.default.getLocalizedString(e.i18nJson,"saveToClipboard")):e.showNotification(n.default.getLocalizedString(e.i18nJson,"saveToClipboardFailed"));case 10:case"end":return t.stop()}},t)}))()},showNotification:function(e){var t=this;this.mNotificationLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,e),cc.Tween.stopAllByTarget(this.myNotificationBG),this.myNotificationBG.active=!0,this.myNotificationBG.opacity=0,cc.tween(this.myNotificationBG).to(1/3,{opacity:255}).delay(2).to(1/3,{opacity:0}).call(function(){t.myNotificationBG.active=!1}).start()},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myLoginView&&this.myLoginView.init(0,0,e.width,e.height),this.myRegistrationView&&this.myRegistrationView.init(0,0,e.width,e.height),this.myLanguageView&&this.myLanguageView.init(0,0,e.width,e.height),this.mySettingsView&&this.mySettingsView.init(0,0,e.width,e.height),this.myDepositView&&this.myDepositView.init(1136,0,e.width,e.height),this.myPersonalView&&this.myPersonalView.init(1136,0,e.width,e.height),this.myGameListView&&this.myGameListView.init(1136,0,e.width,e.height),this.myCustomerServiceView&&this.myCustomerServiceView.init(1136,0,e.width,e.height),this.myRebateView&&this.myRebateView.init(1136,0,e.width,e.height),this.myProfileView&&this.myProfileView.init(0,0,e.width,e.height),this.myEventView&&this.myEventView.init(0,0,e.width,e.height),this.myFollowUsView&&this.myFollowUsView.init(0,0,e.width,e.height),this.myRegisterView&&this.myRegisterView.init(0,0,e.width,e.height),this.mGameView&&this.mGameView.init(0,0,e.width,e.height),this.mDailyBonusView&&this.mDailyBonusView.init(0,0,e.width,e.height),this.mWelcomeBonusView&&this.mWelcomeBonusView.init(0,0,e.width,e.height),this.mMailboxView&&this.mMailboxView.init(0,0,e.width,e.height),this.mReferralView&&this.mReferralView.init(0,0,e.width,e.height),this.mRedeemCodeView&&this.mRedeemCodeView.init(0,0,e.width,e.height),this.mVipView&&this.mVipView.init(0,0,e.width,e.height),this.mRebateView&&this.mRebateView.init(0,0,e.width,e.height),this.mPwaAndroidView&&this.mPwaAndroidView.init(0,0,e.width,e.height),this.mPwaiOSView&&this.mPwaiOSView.init(0,0,e.width,e.height)},localizeUI:function(){this.mLoginLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"login"),this.mRegisterLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"register"),this.mSettingLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"settings"),this.mDepositLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"deposit"),this.mWithdrawLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"withdraw"),this.mReferLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"refer"),this.mRebateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"rebate"),this.mMessageLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"message"),this.mSupportLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"support"),this.mMoreLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"more")}}),cc._RF.pop()},{"../Services/AuthServices":"AuthServices","../Services/GameService":"GameService","../Services/UserService":"UserService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],Login:[function(e,t){"use strict";cc._RF.push(t,"3183eTQg7hJIah8iTsnJbHX","Login");var n=r(e("SharedFunction")),a=(r(e("SharedData")),r(e("../Services/AuthServices")));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}cc.Class({extends:cc.Component,properties:{mCallBack:null,myRegistrationView:null,myForgotPasswordView:null,mBackground:{default:null,type:cc.Node},myLoginBG:{default:null,type:cc.Node},myUsernameInput:{default:null,type:cc.Node},myPasswordInput:{default:null,type:cc.Node},myError1Label:{default:null,type:cc.Node},myError2Label:{default:null,type:cc.Node},mRmbTick:{default:null,type:cc.Node},myShowPassBtn:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mUsernameLabel:{default:null,type:cc.Node},mPasswordLabel:{default:null,type:cc.Node},mRememberLabel:{default:null,type:cc.Node},mForgetLabel:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node},mNewLabel:{default:null,type:cc.Node},mRegisterLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a,this.myForgotPasswordView&&this.myForgotPasswordView.init(0,0,this.node.width,this.node.height)},updateView:function(e){this.localizeUI(),this.mCallBack=e,this.mBackground.active=!0,this.myError1Label.active=!1,this.myError2Label.active=!1,this.node.opacity=255,localStorage.getItem("rmb_username")?(this.mRmbTick.active=!0,this.myUsernameInput.getComponent(cc.EditBox).string=localStorage.getItem("rmb_username")):this.mRmbTick.active=!1,this.myLoginBG.setScale(0),cc.tween(this.myLoginBG).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setCallBack:function(e,t){void 0===t&&(t="LOBBY"),this.mCallBack=e,this.isFrom=t},onToggleRmbChkBox:function(){n.default.playButtonClickSound(),this.mRmbTick.active=!this.mRmbTick.active},onRegisterButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),n.default.showLoadingView("",e),cc.resources.load("prefabs/registration/registration",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.myRegistrationView&&(e.myRegistrationView=cc.instantiate(a).getComponent("Registration"),e.updatePrefabSize()),e.myRegistrationView.updateView(e),e.node.addChild(e.myRegistrationView.node),e.mBackground.active=!1,n.default.hideLoadingView(e)})},onRegisterCloseButtonDidPressed:function(e){"lobby"==e?this.mCallBack.onRegisterCloseButtonDidPressed():(this.node.removeChild(this.myRegistrationView.node),this.mBackground.active=!0,this.mBackground.opacity=0,cc.tween(this.mBackground).to(1/6,{opacity:255}).start())},onForgotButtonDidPressed:function(){var e=this;n.default.playButtonClickSound(),cc.resources.load("prefabs/forgotpassword/forgotpassword",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.myForgotPasswordView&&(e.myForgotPasswordView=cc.instantiate(a).getComponent("ForgotPassword"),e.updatePrefabSize()),e.myForgotPasswordView.updateView(e),e.node.addChild(e.myForgotPasswordView.node),e.mBackground.active=!1,n.default.hideLoadingView(e)})},onForgotPasswordViewCloseButtonDidPressed:function(){this.node.removeChild(this.myForgotPasswordView.node),this.mBackground.active=!0,this.mBackground.opacity=0,cc.tween(this.mBackground).to(1/6,{opacity:255}).start()},onTogglePassBtnDidPress:function(){n.default.playButtonClickSound();var e=this.myShowPassBtn,t=this.myPasswordInput,a=(t.getComponent(cc.EditBox).string,t.getComponent(cc.EditBox).inputFlag);a==cc.EditBox.InputFlag.PASSWORD||null==a?(cc.loader.loadRes("images/login/iconShow.png",cc.SpriteFrame,function(t,n){e.getComponent(cc.Sprite).spriteFrame=n}),t.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.DEFAULT):(cc.loader.loadRes("images/login/iconHide.png",cc.SpriteFrame,function(t,n){e.getComponent(cc.Sprite).spriteFrame=n}),t.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.PASSWORD)},myCloseButtonDidPressed:function(e,t,a){var r=this;a||n.default.playButtonClickSound(),cc.tween(this.myLoginBG).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){r.mCallBack&&r.mCallBack.onLoginCloseButtonDidPressed()}).start()},onLoginButtonDidPressed:function(){n.default.playButtonClickSound();var e=this.myUsernameInput.getComponent(cc.EditBox).string,t=this.myPasswordInput.getComponent(cc.EditBox).string;0!=e.length?0!=t.length?n.default.RangeCheck(t)?this.callLoginApi("",e,t,""):this.showLableError(this.myError2Label,n.default.getLocalizedString(this.i18nJson,"invalidPassword")):this.showLableError(this.myError2Label,n.default.getLocalizedString(this.i18nJson,"passwordHolder")):this.showLableError(this.myError1Label,n.default.getLocalizedString(this.i18nJson,"usernameHolder"))},showLableError:function(e,t){this.myError1Label.active=!1,this.myError2Label.active=!1,e&&(e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},callLoginApi:function(e,t,r,c){var s,l=this;return(s=o().mark(function i(){var s;return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n.default.showLoadingView("Loading",l),o.prev=1,o.next=4,a.default.login(e,t,r,c);case 4:s=o.sent,console.log(s),200==s.status&&(localStorage.setItem("verified_username",t),localStorage.setItem("verified_password",r),localStorage.setItem("token",s.token),l.mRmbTick.active?localStorage.setItem("rmb_username",t):localStorage.removeItem("rmb_username"),l.myCloseButtonDidPressed("","",!0),n.default.hideLoadingView(l)),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(1),l.showLableError(l.myError2Label,n.default.getLocalizedString(l.i18nJson,o.t0.message)),n.default.hideLoadingView(l);case 13:case"end":return o.stop()}},i,null,[[1,9]])}),function(){var e=this,t=arguments;return new Promise(function(n,a){var r=s.apply(e,t);function o(e){i(r,n,a,o,c,"next",e)}function c(e){i(r,n,a,o,c,"throw",e)}o(void 0)})})()},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"login"),this.mUsernameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"username"),this.mPasswordLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"password"),this.mRememberLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"rememberMe"),this.mForgetLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"forgotpassword"),this.mConfirmLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirm"),this.mNewLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"newMember"),this.mRegisterLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"registerHere")},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myRegistrationView&&this.myRegistrationView.init(0,0,e.width,e.height),this.myForgotPasswordView&&this.myForgotPasswordView.init(0,0,e.width,e.height)}}),cc._RF.pop()},{"../Services/AuthServices":"AuthServices",SharedData:"SharedData",SharedFunction:"SharedFunction"}],ManageCard:[function(e,t){"use strict";cc._RF.push(t,"a4192YBxJ1Gm5zxiUVxFnLz","ManageCard");var n=r(e("SharedFunction")),a=(r(e("SharedData")),r(e("../Services/WalletService")));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function c(e){i(o,a,r,c,s,"next",e)}function s(e){i(o,a,r,c,s,"throw",e)}c(void 0)})}}cc.Class({extends:cc.Component,properties:{mCallBack:null,mMaxCard:3,mCardList:[],createdRows:[],mBackground:{default:null,type:cc.Node},myCloseBtn:{default:null,type:cc.Node},myBackBtn:{default:null,type:cc.Node},myAddAccBtn:{default:null,type:cc.Node},myBankNameInput:{default:null,type:cc.Node},myAccNameInput:{default:null,type:cc.Node},myAccNumInput:{default:null,type:cc.Node},myBranchInput:{default:null,type:cc.Node},myAccountTypeInput:{default:null,type:cc.Node},myNotificationBG:{default:null,type:cc.Node},myBankSelect:{default:null,type:cc.Node},myMainContainer:{default:null,type:cc.Node},myAddCardContainer:{default:null,type:cc.Node},myManageScrollView:{default:null,type:cc.Node},myManageScrollContent:{default:null,type:cc.Node},myScrollView:{default:null,type:cc.Node},mCardRowPrefab:{default:null,type:cc.Prefab},mAddOnImg:{default:null,type:cc.SpriteFrame},mAddOffImg:{default:null,type:cc.SpriteFrame},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mHeaderBankLabel:{default:null,type:cc.Node},mHeaderAccNameLabel:{default:null,type:cc.Node},mHeaderAccNumLabel:{default:null,type:cc.Node},mHeaderActionLabel:{default:null,type:cc.Node},mNoBankLabel:{default:null,type:cc.Node},mAddAccLabel:{default:null,type:cc.Node},mWarningLabel:{default:null,type:cc.Node},mDescLabel:{default:null,type:cc.Node},mBankLabel:{default:null,type:cc.Node},mAccNameLabel:{default:null,type:cc.Node},mAccNumLabel:{default:null,type:cc.Node},mBranchLabel:{default:null,type:cc.Node},mAccountTypeLabel:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node},mNotificationLabel:{default:null,type:cc.Node},myError1Label:{default:null,type:cc.Node},myError2Label:{default:null,type:cc.Node},myError3Label:{default:null,type:cc.Node},myError4Label:{default:null,type:cc.Node},myError5Label:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},updateView:function(e){this.localizeUI(),this.mCallBack=e;var t=JSON.parse(localStorage.getItem("from_index"));this.mMaxCard=t.settings.limits.maxBankCards,this.mCardList=[],this.callGetWalletListingApi(),this.mBackground.active=!0,this.node.opacity=255,this.myAddCardContainer.active=!1,this.myMainContainer.active=!0,this.myBackBtn.active=!1,this.myCloseBtn.active=!0,this.myError1Label.active=!1,this.myError2Label.active=!1,this.myAccNameInput.getComponent(cc.EditBox).string="",this.myAccNumInput.getComponent(cc.EditBox).string="",this.myScrollView.getComponent(cc.ScrollView).scrollToTop(0);var n=this.mBackground.getChildByName("card_bg");n.setScale(0),cc.tween(n).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setCallBack:function(e){this.mCallBack=e},myCloseButtonDidPressed:function(e,t,a){var r=this;a||n.default.playButtonClickSound();var o=this.mBackground.getChildByName("card_bg");cc.tween(o).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){r.createdRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),r.createdRows=[],r.mCallBack&&r.mCallBack.myCloseManageCardDidPressed()}).start()},myAddAccButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound(),console.log("----------myAddAccButtonDidPressed-----------"),console.log(this.mCardList),console.log(this.mMaxCard),Object.keys(this.mCardList).length<this.mMaxCard?(this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"addBank"),this.myError1Label.active=!1,this.myError2Label.active=!1,this.myAccNameInput.getComponent(cc.EditBox).string="",this.myAccNumInput.getComponent(cc.EditBox).string="",this.myScrollView.getComponent(cc.ScrollView).scrollToTop(0),this.myCloseBtn.active=!1,this.myBackBtn.active=!0,this.myMainContainer.active=!1,this.myAddCardContainer.active=!0):this.showNotification(n.default.getLocalizedString(this.i18nJson,"cardLimit").replace("{0}",this.mMaxCard))},onBackButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound(),this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"manageBank"),this.myError1Label.active=!1,this.myError2Label.active=!1,this.myError3Label.active=!1,this.myError4Label.active=!1,this.myError5Label.active=!1,this.myBankNameInput.getComponent(cc.EditBox).string="",this.myBranchInput.getComponent(cc.EditBox).string="",this.myAccountTypeInput.getComponent(cc.EditBox).string="",this.myAccNameInput.getComponent(cc.EditBox).string="",this.myAccNumInput.getComponent(cc.EditBox).string="",this.myBackBtn.active=!1,this.myCloseBtn.active=!0,this.myAddCardContainer.active=!1,this.myMainContainer.active=!0},onConfirmButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this.myAccNameInput.getComponent(cc.EditBox).string,o=this.myAccNumInput.getComponent(cc.EditBox).string,i=this.myBankNameInput.getComponent(cc.EditBox).string,c=this.myBranchInput.getComponent(cc.EditBox).string,s=this.myAccountTypeInput.getComponent(cc.EditBox).string;0!=i.length?0!=r.length?0!=o.length?0!=c.length?0!=s.length?this.callAddBankAccountApi(i,r,o,c,s):this.showLableError(this.myError5Label,n.default.getLocalizedString(this.i18nJson,"accountTypeHolder")):this.showLableError(this.myError4Label,n.default.getLocalizedString(this.i18nJson,"branchHolder")):this.showLableError(this.myError2Label,n.default.getLocalizedString(this.i18nJson,"accNumHolder")):this.showLableError(this.myError1Label,n.default.getLocalizedString(this.i18nJson,"accNameHolder")):this.showLableError(this.myError3Label,n.default.getLocalizedString(this.i18nJson,"bankNameHolder"))},callAddBankAccountApi:function(e,t,r,i,s){var l=this;return c(o().mark(function c(){var u,d,h;return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n.default.showLoadingView("Loading",l),u=localStorage.getItem("token"),d={bankName:e,accountName:t,accountNumber:r,branch:i,accountType:s},o.prev=3,o.next=6,a.default.createBankAccount(u,d);case 6:if(h=o.sent,console.log("----------createBankAccount-----------"),console.log(h),!n.default.isSessionExpired(h)){o.next=12;break}return n.default.handleSessionExpiration(h,l),o.abrupt("return");case 12:if(!n.default.isServerError(h)){o.next=15;break}return n.default.handleServerError(h,l),o.abrupt("return");case 15:200!=h.status&&201!=h.status||(l.createdRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),l.createdRows=[],l.onBackButtonDidPressed(null,null,!0),l.callGetWalletListingApi(),l.showNotification(n.default.getLocalizedString(l.i18nJson,"successAdd")||"Bank account added successfully")),n.default.hideLoadingView(l),o.next=28;break;case 19:if(o.prev=19,o.t0=o.catch(3),!n.default.handleSessionExpiration(o.t0,l)){o.next=23;break}return o.abrupt("return");case 23:if(!n.default.handleServerError(o.t0,l)){o.next=26;break}return n.default.hideLoadingView(l),o.abrupt("return");case 26:console.log(o.t0),n.default.hideLoadingView(l);case 28:case"end":return o.stop()}},c,null,[[3,19]])}))()},callGetWalletListingApi:function(){var e=this;return c(o().mark(function t(){var r,i,c,s;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),t.prev=1,t.next=4,a.default.getBankAccounts(r);case 4:if(i=t.sent,console.log("----------ManageCard getBankAccounts-----------"),console.log(i),!n.default.isSessionExpired(i)){t.next=10;break}return n.default.handleSessionExpiration(i,e),t.abrupt("return");case 10:if(!n.default.isServerError(i)){t.next=13;break}return n.default.handleServerError(i,e),t.abrupt("return");case 13:if(200==i.status&&i.data){for(e.mCardList=[],c=0;c<i.data.length;c++)s=i.data[c],e.mCardList.push({id:s._id,bank:s.bankName,name:s.accountName,number:s.accountNumber});e.showCardList()}else e.showCardList();t.next=24;break;case 16:if(t.prev=16,t.t0=t.catch(1),!n.default.handleSessionExpiration(t.t0,e)){t.next=20;break}return t.abrupt("return");case 20:if(!n.default.handleServerError(t.t0,e)){t.next=22;break}return t.abrupt("return");case 22:console.log(t.t0),e.showCardList();case 24:case"end":return t.stop()}},t,null,[[1,16]])}))()},showCardList:function(){var e=this,t=Object.keys(this.mCardList).length;if(t>0)for(var n in this.mNoBankLabel.active=!1,this.mCardList){var a=this.mCardList[n],r=new cc.instantiate(this.mCardRowPrefab);r.name="cardRow"+(parseInt(n)+1),r.setPosition(cc.v2(-2,-52*parseInt(n)-27)),r.getChildByName("lblBank").getComponent(cc.Label).string=a.bank,r.getChildByName("lblAccName").getComponent(cc.Label).string=a.name,r.getChildByName("lblAccNumber").getComponent(cc.Label).string=a.number;var o=r.getChildByName("btnDelete");o&&function(){o.active=!0;var t=a.id,n=e;o.on("click",function(){n.onDeleteCardPressed(t)},e)}(),this.myManageScrollContent.addChild(r),this.createdRows.push(r)}else this.mNoBankLabel.active=!0;t>=this.mMaxCard?this.myAddAccBtn.getComponent(cc.Sprite).spriteFrame=this.mAddOffImg:this.myAddAccBtn.getComponent(cc.Sprite).spriteFrame=this.mAddOnImg,this.myAddAccBtn.y=-47*t-84,this.mAddAccLabel.y=-47*t-82,this.mWarningLabel.y=-47*t-126,this.myManageScrollContent.height=159+47*t},onDeleteCardPressed:function(e){console.log("----------onDeleteCardPressed-----------"),n.default.playButtonClickSound();var t=this;n.default.showAlertView(n.default.getLocalizedString(this.i18nJson,"confirmDelete")||"Are you sure you want to delete this bank account?",this,function(){t.deleteCard(e)})},deleteCard:function(e){var t=this;return c(o().mark(function r(){var i,c;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.default.showLoadingView("Loading",t),i=localStorage.getItem("token"),r.prev=2,r.next=5,a.default.deleteBankAccount(i,e);case 5:if(c=r.sent,console.log("----------deleteBankAccount-----------"),console.log(c),!n.default.isSessionExpired(c)){r.next=11;break}return n.default.handleSessionExpiration(c,t),r.abrupt("return");case 11:if(!n.default.isServerError(c)){r.next=14;break}return n.default.handleServerError(c,t),r.abrupt("return");case 14:200==c.status&&(t.createdRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),t.createdRows=[],t.callGetWalletListingApi(),t.showNotification(n.default.getLocalizedString(t.i18nJson,"successDelete"))),n.default.hideLoadingView(t),r.next=27;break;case 18:if(r.prev=18,r.t0=r.catch(2),!n.default.handleSessionExpiration(r.t0,t)){r.next=22;break}return r.abrupt("return");case 22:if(!n.default.handleServerError(r.t0,t)){r.next=25;break}return n.default.hideLoadingView(t),r.abrupt("return");case 25:console.log(r.t0),n.default.hideLoadingView(t);case 27:case"end":return r.stop()}},r,null,[[2,18]])}))()},showNotification:function(e){var t=this;this.mNotificationLabel.getComponent(cc.Label).string=n.default.formatString(n.default.getLocalizedString(this.i18nJson,e),this.mMaxCard),cc.Tween.stopAllByTarget(this.myNotificationBG),this.myNotificationBG.active=!0,this.myNotificationBG.opacity=0,cc.tween(this.myNotificationBG).to(1/3,{opacity:255}).delay(2).to(1/3,{opacity:0}).call(function(){t.myNotificationBG.active=!1}).start()},showLableError:function(e,t){this.myError1Label.active=!1,this.myError2Label.active=!1,e&&(this.myScrollView.getComponent(cc.ScrollView).scrollToOffset(cc.v2(0,-1*e.y-120),.1,!1),e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"manageBank"),this.mHeaderBankLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"bankOrWallet"),this.mHeaderAccNameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accName"),this.mHeaderAccNumLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accNumber"),this.mHeaderActionLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"action"),this.mNoBankLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"noBank"),this.mAddAccLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"addAcc"),this.mWarningLabel.getComponent(cc.Label).string="*"+n.default.formatString(n.default.getLocalizedString(this.i18nJson,"cardLimit"),this.mMaxCard),this.mNotificationLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"success"),this.mDescLabel.getComponent(cc.RichText).string=n.default.getLocalizedString(this.i18nJson,"desc"),this.mBankLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"bankOrWallet"),this.mAccNameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accName"),this.mAccNumLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accNumber"),this.mBranchLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"branch"),this.mAccountTypeLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accountType"),this.mConfirmLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirm")},updatePrefabSize:function(){cc.view.getVisibleSize()}}),cc._RF.pop()},{"../Services/WalletService":"WalletService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],MessageInfoView:[function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"f6a63uSoKZNG6jCqZu8qshK","MessageInfoView"),n(e("SharedFunction")),n(e("SharedData")),cc.Class({extends:cc.Component,properties:{mCallBack:null,mBackground:{default:null,type:cc.Node},mMessageLabel:{default:null,type:cc.Node},mText:"",autoDismissTimer:null},onLoad:function(){},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground&&(this.mBackground.width=n,this.mBackground.height=a)},setText:function(e){if(void 0===e&&(e=""),this.mText=e,this.mMessageLabel){var t=this.mMessageLabel.getComponent(cc.Label);t&&(t.string=e)}},setCallback:function(e){this.mCallBack=e},show:function(e){var t=this;void 0===e&&(e=1),this.node&&(this.node.active=!0,this.node.opacity=0,cc.tween(this.node).to(.2,{opacity:255}).start(),this.scheduleOnce(function(){t.dismiss()},e))},dismiss:function(){var e=this;this.node&&this.node.isValid&&(this.unscheduleAllCallbacks(),cc.tween(this.node).to(.2,{opacity:0}).call(function(){e.mCallBack&&"function"==typeof e.mCallBack&&e.mCallBack(),e.node&&e.node.parent&&e.node.parent.removeChild(e.node)}).start())},hide:function(){this.node&&(this.node.active=!1)},onDestroy:function(){this.unscheduleAllCallbacks()}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],NetworkService:[function(e,t,n){"use strict";cc._RF.push(t,"4734fKyHGVKw55OmhLxvwb4","NetworkService");var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(c){o=[6,c],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkService=void 0;var i=e("SharedData"),c=function(){function e(){}return e.getBaseUrl=function(){try{if(i&&"function"==typeof i.getApiUrl)return i.getApiUrl()||"";console.warn("NetworkService: SharedData.getApiUrl is not a function")}catch(error){console.warn("NetworkService: Error accessing SharedData.getApiUrl:",error)}return""},e.buildQueryString=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},e.buildFormData=function(e){return this.buildQueryString(e)},e.request=function(e,t){var n=this;return void 0===t&&(t={}),new Promise(function(a,r){var o=t.method||"GET",i=t.timeout||n.DEFAULT_TIMEOUT,c=n.getBaseUrl(),s=e.startsWith("http")?e:""+c+e,l=new XMLHttpRequest;if(l.timeout=i,l.open(o,s,!0),t.headers)for(var u in t.headers)l.setRequestHeader(u,t.headers[u]);else"GET"===o?l.setRequestHeader("Content-Type","text/plain"):l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.onreadystatechange=function(){if(4===l.readyState)if(l.status>=200&&l.status<=207)try{var e=l.responseText?JSON.parse(l.responseText):{};a({status:l.status,data:e,message:e.message||e.msg||""})}catch(error){a({status:l.status,data:l.responseText,message:""})}else try{var t=l.responseText?JSON.parse(l.responseText):{};r({status:l.status,data:t,message:t.message||t.msg||"HTTP Error "+l.status,error:l.responseText})}catch(error){r({status:l.status,data:null,message:"HTTP Error "+l.status,error:l.responseText})}},l.ontimeout=function(){r({status:0,data:null,message:"Request timeout",error:"Request timeout"})},l.onerror=function(){r({status:0,data:null,message:"Network error",error:"Network error occurred"})},l.send()})},e.get=function(e,t,n){return r(this,void 0,Promise,function(){var r,i;return o(this,function(){return r=e,t&&(i=this.buildQueryString(t),r=e+(e.includes("?")?"&":"?")+i),[2,this.request(r,a(a({},n),{method:"GET"}))]})})},e.post=function(e,t,n){return r(this,void 0,Promise,function(){var r,i,c,s,l=this;return o(this,function(){return r=a(a({},n),{method:"POST"}),i=t instanceof FormData,c=r.headers&&"application/json"===r.headers["Content-Type"],t?(s=i?t:c?JSON.stringify(t):this.buildFormData(t),[2,new Promise(function(t,n){var a=r.timeout||l.DEFAULT_TIMEOUT,o=l.getBaseUrl(),c=e.startsWith("http")?e:""+o+e,u=new XMLHttpRequest;if(u.timeout=a,u.open("POST",c,!0),r.headers)for(var d in r.headers)i&&"content-type"===d.toLowerCase()||u.setRequestHeader(d,r.headers[d]);else i||u.setRequestHeader("Content-Type","application/x-www-form-urlencoded");u.onreadystatechange=function(){if(4===u.readyState)if(u.status>=200&&u.status<=207)try{var e=u.responseText?JSON.parse(u.responseText):{};t({status:u.status,data:e,message:e.message||e.msg||""})}catch(error){t({status:u.status,data:u.responseText,message:""})}else try{var a=u.responseText?JSON.parse(u.responseText):{};n({status:u.status,data:a,message:a.message||a.msg||"HTTP Error "+u.status,error:u.responseText})}catch(error){n({status:u.status,data:null,message:"HTTP Error "+u.status,error:u.responseText})}},u.ontimeout=function(){n({status:0,data:null,message:"Request timeout",error:"Request timeout"})},u.onerror=function(){n({status:0,data:null,message:"Network error",error:"Network error occurred"})},u.send(s)})]):[2,this.request(e,r)]})})},e.put=function(e,t,n){return r(this,void 0,Promise,function(){var r,i,c,s=this;return o(this,function(){return r=a(a({},n),{method:"PUT"}),i=r.headers&&"application/json"===r.headers["Content-Type"],t?(c=i?JSON.stringify(t):this.buildFormData(t),[2,new Promise(function(t,n){var a=r.timeout||s.DEFAULT_TIMEOUT,o=s.getBaseUrl(),i=e.startsWith("http")?e:""+o+e,l=new XMLHttpRequest;if(l.timeout=a,l.open("PUT",i,!0),r.headers)for(var u in r.headers)l.setRequestHeader(u,r.headers[u]);else l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.onreadystatechange=function(){if(4===l.readyState)if(l.status>=200&&l.status<=207)try{var e=l.responseText?JSON.parse(l.responseText):{};t({status:l.status,data:e,message:e.message||e.msg||""})}catch(error){t({status:l.status,data:l.responseText,message:""})}else try{var a=l.responseText?JSON.parse(l.responseText):{};n({status:l.status,data:a,message:a.message||a.msg||"HTTP Error "+l.status,error:l.responseText})}catch(error){n({status:l.status,data:null,message:"HTTP Error "+l.status,error:l.responseText})}},l.ontimeout=function(){n({status:0,data:null,message:"Request timeout",error:"Request timeout"})},l.onerror=function(){n({status:0,data:null,message:"Network error",error:"Network error occurred"})},l.send(c)})]):[2,this.request(e,r)]})})},e.delete=function(e,t){return r(this,void 0,Promise,function(){return o(this,function(){return[2,this.request(e,a(a({},t),{method:"DELETE"}))]})})},e.DEFAULT_TIMEOUT=3e4,e}();n.NetworkService=c,cc._RF.pop()},{SharedData:"SharedData"}],PersonalCenter:[function(e,t){"use strict";cc._RF.push(t,"cf40a7jRtZNNrZd4n5Wk9/O","PersonalCenter");var n=c(e("SharedFunction")),a=c(e("SharedData")),r=c(e("../Services/TransactionService")),o=c(e("../Services/UserService")),i=c(e("../Services/WalletService"));function c(e){return e&&e.__esModule?e:{default:e}}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};c(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,c(v,"constructor",f),c(f,"constructor",m),m.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),c(v,i,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function l(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){l(o,a,r,i,c,"next",e)}function c(e){l(o,a,r,i,c,"throw",e)}i(void 0)})}}cc.Class({extends:cc.Component,properties:{mCallBack:null,myEditInfoView:null,myVIPLevelView:null,myChangeAvatarView:null,myVerificationView:null,myManageCardView:null,calendarPicker:null,calenderTarget:null,mBetRecordSelectedType:"",mCurrentFocusTab:"UserInfo",mBetRecordFocusTab:"",mHistoryFocusTab:"",mMaxCard:3,mCardList:[],mBetRecordTabList:[],mHistoryTabList:[],createdUnselectedTab:[],createdBetPlatformDDLSelect:[],createdHistoryDDLSelect:[],createdBetRecordTimeDDLSelect:[],createdTimeDDLSelect:[],createdHistoryTimeDDLSelect:[],createdRows:[],createdBetRecordRows:[],walletLedgerRows:[],createdHistoryRows:[],myAccDetailTypeDDLSelect:[],mBetRecordSelectedTime:"allTime",mAccDetailSelectedTime:"allTime",mAccDetailSelectedType:"allType",mHistorySelectedStatus:"All",mHistorySelectedTime:"allTime",mCurrentWalletPage:1,mTotalWalletPages:1,mCurrentTransPage:1,mTotalTransPages:1,mCurrentHistoryPage:1,mTotalHistoryPages:1,myUserInfoTabBtn:{default:null,type:cc.Node},myBettingRecordTabBtn:{default:null,type:cc.Node},myAccountDetailsTabBtn:{default:null,type:cc.Node},myCardWalletTabBtn:{default:null,type:cc.Node},myHistoryTabBtn:{default:null,type:cc.Node},myAddAccBtn:{default:null,type:cc.Node},myPlayerNameLabel:{default:null,type:cc.Node},mNotificationLabel:{default:null,type:cc.Node},myBalanceBG:{default:null,type:cc.Node},myNotificationBG:{default:null,type:cc.Node},myFullContainer:{default:null,type:cc.Node},myCutContainer:{default:null,type:cc.Node},myTrxContainer:{default:null,type:cc.Node},myCardContainer:{default:null,type:cc.Node},myNoCardContainer:{default:null,type:cc.Node},myHvCardContainer:{default:null,type:cc.Node},myRecordContainer:{default:null,type:cc.Node},myHistoryContainer:{default:null,type:cc.Node},myBetRecordTypeSelect:{default:null,type:cc.Node},myBetRecordTypeDDL:{default:null,type:cc.Node},myBetRecordTypeTimeLabel:{default:null,type:cc.Node},myBetRecordTypeTimeSelect:{default:null,type:cc.Node},myBetRecordTypeTimeDDL:{default:null,type:cc.Node},myBetRecordTypeTimeScrollView:{default:null,type:cc.Node},myBetRecordTypeTimeScrollViewView:{default:null,type:cc.Node},myBetRecordTypeTimeScrollContent:{default:null,type:cc.Node},myAccDetailTypeSelect:{default:null,type:cc.Node},myAccDetailTypeDDL:{default:null,type:cc.Node},myAccDetailTypeTimeLabel:{default:null,type:cc.Node},myAccDetailTypeTimeSelect:{default:null,type:cc.Node},myAccDetailTypeTimeDDL:{default:null,type:cc.Node},myAccDetailTypeTimeScrollView:{default:null,type:cc.Node},myAccDetailTypeTimeScrollViewView:{default:null,type:cc.Node},myAccDetailTypeTimeScrollContent:{default:null,type:cc.Node},myAccDetailTypeScrollView:{default:null,type:cc.Node},myAccDetailTypeScrollViewView:{default:null,type:cc.Node},myAccDetailTypeScrollContent:{default:null,type:cc.Node},myBetPlatformSelect:{default:null,type:cc.Node},myHistoryTrxSelect:{default:null,type:cc.Node},myHistoryTrxDDL:{default:null,type:cc.Node},myHisStatSelect:{default:null,type:cc.Node},myUserInfoScrollView:{default:null,type:cc.Node},myCutConScrollView:{default:null,type:cc.Node},myCutConScrollContent:{default:null,type:cc.Node},myWalletScrollContent:{default:null,type:cc.Node},myBetRecordScrollView:{default:null,type:cc.Node},myBetRecordScrollContent:{default:null,type:cc.Node},myTrxScrollView:{default:null,type:cc.Node},myTrxScrollContent:{default:null,type:cc.Node},myBetPlatformScrollView:{default:null,type:cc.Node},myBetPlatformScrollViewView:{default:null,type:cc.Node},myBetPlatformScrollContent:{default:null,type:cc.Node},myHisStatScrollView:{default:null,type:cc.Node},myHisStatScrollViewView:{default:null,type:cc.Node},myHisStatScrollContent:{default:null,type:cc.Node},myVerifyBtn:{default:null,type:cc.Node},mFocusTabImg:{default:null,type:cc.SpriteFrame},mNormalTabImg:{default:null,type:cc.SpriteFrame},mAddOnImg:{default:null,type:cc.SpriteFrame},mAddOffImg:{default:null,type:cc.SpriteFrame},myHeaderProfileImg:{default:null,type:cc.Sprite},myUserInfoProfileImg:{default:null,type:cc.Sprite},myAccountTxt:{default:null,type:cc.Node},myUsernameTxt:{default:null,type:cc.Node},myEmailTxt:{default:null,type:cc.Node},myCodeTxt:{default:null,type:cc.Node},myMobileTxt:{default:null,type:cc.Node},myGenderTxt:{default:null,type:cc.Node},myBirthdayTxt:{default:null,type:cc.Node},myBetStartDateTxt:{default:null,type:cc.Node},myBetEndDateTxt:{default:null,type:cc.Node},myAccStartDateTxt:{default:null,type:cc.Node},myAccEndDateTxt:{default:null,type:cc.Node},myUnselectedTabPrefab:{default:null,type:cc.Prefab},myDDLSelectPrefab:{default:null,type:cc.Prefab},mCardRowPrefab:{default:null,type:cc.Prefab},mBetRecordRowPrefab:{default:null,type:cc.Prefab},mTrxRowPrefab:{default:null,type:cc.Prefab},mHistoryRowPrefab:{default:null,type:cc.Prefab},myHistoryScrollView:{default:null,type:cc.Node},myHistoryScrollContent:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mPersonalCenterLabel:{default:null,type:cc.Node},mNoBankLabel:{default:null,type:cc.Node},mAddAccLabel:{default:null,type:cc.Node},mWarningLabel:{default:null,type:cc.Node},mUserInfoTabLabel:{default:null,type:cc.Node},mBetRecordTabLabel:{default:null,type:cc.Node},mAccDetailsTabLabel:{default:null,type:cc.Node},mBankWalletTabLabel:{default:null,type:cc.Node},mHistoryTabLabel:{default:null,type:cc.Node},mLevelPriviledgedLabel:{default:null,type:cc.Node},mCurrentMemberLabel:{default:null,type:cc.Node},mBasicInfoLabel:{default:null,type:cc.Node},mAccountLabel:{default:null,type:cc.Node},mUsernameLabel:{default:null,type:cc.Node},mEmailLabel:{default:null,type:cc.Node},mMobileNumberLabel:{default:null,type:cc.Node},mGenderLabel:{default:null,type:cc.Node},mBirthdayLabel:{default:null,type:cc.Node},mVIPLevelLabel:{default:null,type:cc.Node},mVerifyLabel:{default:null,type:cc.Node},mRecordConStartDateLabel:{default:null,type:cc.Node},mRecordConEndDateLabel:{default:null,type:cc.Node},mRecordConPlatformLabel:{default:null,type:cc.Node},mRecordConTypeLabel:{default:null,type:cc.Node},mRecordConAllLabel:{default:null,type:cc.Node},mRecordConPlaceBetLabel:{default:null,type:cc.Node},mRecordConWinLabel:{default:null,type:cc.Node},mRecordConBuyInLabel:{default:null,type:cc.Node},mRecordConPayoutLabel:{default:null,type:cc.Node},mRecordConCancelLabel:{default:null,type:cc.Node},mRecordConRollbackLabel:{default:null,type:cc.Node},mRecordConRefundLabel:{default:null,type:cc.Node},mTrxConStartDateLabel:{default:null,type:cc.Node},mTrxConEndDateLabel:{default:null,type:cc.Node},mTrxConDateLabel:{default:null,type:cc.Node},mTrxConDescLabel:{default:null,type:cc.Node},mTrxConInLabel:{default:null,type:cc.Node},mTrxConOutLabel:{default:null,type:cc.Node},mTrxConBalanceLabel:{default:null,type:cc.Node},mDescLabel:{default:null,type:cc.Node},mClickHereLabel:{default:null,type:cc.Node},mSetupLabel:{default:null,type:cc.Node},mBankWalletLabel:{default:null,type:cc.Node},mAccNameLabel:{default:null,type:cc.Node},mAccNumberLabel:{default:null,type:cc.Node},mRecordDateLabel:{default:null,type:cc.Node},mRecordBetSlipIDLabel:{default:null,type:cc.Node},mRecordGameLabel:{default:null,type:cc.Node},mRecordStakeLabel:{default:null,type:cc.Node},mRecordResultLabel:{default:null,type:cc.Node},mRecordWinLossLabel:{default:null,type:cc.Node},mValidStakeLabel:{default:null,type:cc.Node},mHisDateLabel:{default:null,type:cc.Node},mHisTrxIDLabel:{default:null,type:cc.Node},mHisBankLabel:{default:null,type:cc.Node},mHisAmtLabel:{default:null,type:cc.Node},mHisStatusHeaderLabel:{default:null,type:cc.Node},mHisReasonLabel:{default:null,type:cc.Node},mNoRecords1Label:{default:null,type:cc.Node},mNoRecords2Label:{default:null,type:cc.Node},mNoRecords3Label:{default:null,type:cc.Node},walletFirstPageBtn:{default:null,type:cc.Node},walletLastPageBtn:{default:null,type:cc.Node},walletPreviousPageBtn:{default:null,type:cc.Node},walletNextPageBtn:{default:null,type:cc.Node},walletTotalPageLabel:{default:null,type:cc.Node},walletCurrentPageEditBox:{default:null,type:cc.Node},walletGoBtn:{default:null,type:cc.Node},walletGoLbl:{default:null,type:cc.Node},transFirstPageBtn:{default:null,type:cc.Node},transLastPageBtn:{default:null,type:cc.Node},transPreviousPageBtn:{default:null,type:cc.Node},transNextPageBtn:{default:null,type:cc.Node},transTotalPageLabel:{default:null,type:cc.Node},transCurrentPageEditBox:{default:null,type:cc.Node},transGoBtn:{default:null,type:cc.Node},transGoLbl:{default:null,type:cc.Node},secondRecordContainer:{default:null,type:cc.Node},historyFirstPageBtn:{default:null,type:cc.Node},historyLastPageBtn:{default:null,type:cc.Node},historyPreviousPageBtn:{default:null,type:cc.Node},historyNextPageBtn:{default:null,type:cc.Node},historyTotalPageLabel:{default:null,type:cc.Node},historyCurrentPageEditBox:{default:null,type:cc.Node},historyGoBtn:{default:null,type:cc.Node},historyGoLbl:{default:null,type:cc.Node},myHistoryTimeScrollView:{default:null,type:cc.Node},myHistoryTimeScrollViewView:{default:null,type:cc.Node},myHistoryTimeScrollContent:{default:null,type:cc.Node},myHistoryTrxTimeLbl:{default:null,type:cc.Node},myHistoryStatusLbl:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI();var e=this;cc.resources.load("prefabs/calendar/CalendarPicker",cc.Prefab,function(t,n){t?console.error("Failed to load prefab:",t):(null==e.calendarPicker&&(e.calendarPicker=cc.instantiate(n),e.updatePrefabSize()),e.node.addChild(e.calendarPicker.getComponent("CalendarManager").node),e.calendarPicker.on("date-selected",e.onDateSelected,e),e.calendarPicker.on("date-cancel",e.onDateCancel,e))}),this.initWalletPagination(),this.initTransPagination(),this.initHistoryPagination()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a},updateView:function(e,t){void 0===t&&(t=null);var r=this;this.localizeUI(),this.mCallBack=e,this.mCurrentFocusTab="UserInfo";var o=JSON.parse(localStorage.getItem("from_index")),i=o.settings.verification;this.mMaxCard=o.settings.limits.maxBankCards;var c=a.default.getUserObject();this.myPlayerNameLabel.getComponent(cc.Label).string=c.fullName,this.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(c.balance,2),this.myAccountTxt.getComponent(cc.Label).string=c.fullName,this.myUsernameTxt.getComponent(cc.Label).string=c.username,this.myEmailTxt.getComponent(cc.Label).string=c.email,this.myCodeTxt.getComponent(cc.Label).string=a.default.getPhoneCode();var s;s=a.default.getCurrentEnv()==a.default.getAvailableEnvironment().ENV_DEVELOPMENT?c.phone.replace("+888","").replace(a.default.getPhoneCode(),""):c.phone.replace(a.default.getPhoneCode(),""),this.myMobileTxt.getComponent(cc.Label).string=s,localStorage.setItem("unverified_phoneNum",s),a.default.getSelectedAvatar()==localStorage.getItem("selected_avatar")&&cc.loader.loadRes("images/profile/Avatar"+a.default.getSelectedAvatar()+".png",cc.SpriteFrame,function(e,t){r.myHeaderProfileImg.getComponent(cc.Sprite).spriteFrame=t,r.myUserInfoProfileImg.getComponent(cc.Sprite).spriteFrame=t}),this.mBetRecordTabList=a.default.getGameCategories(),this.mHistoryTabList=[{name:"Deposit",statusList:"All,Pending,Approved,Rejected,Cancelled"},{name:"Withdrawal",statusList:"All,Pending,Approved,Rejected,Cancelled"}],this.mCardList=[],this.callGetWalletListingApi(),this.node.active=!0,c.phoneVerified?this.myVerifyBtn.active=!1:!c.phoneVerified&&i.phoneVerification.enabled&&(this.myVerifyBtn.active=!0);var l=t||"UserInfo";this.onPersonalTabDidPressed("",l,!0),null!=this.calendarPicker&&(this.calendarPicker.getComponent("CalendarManager").hide(),this.calendarPicker.on("date-selected",this.onDateSelected,this),this.calendarPicker.on("date-cancel",this.onDateCancel,this));var u=this.node.getComponent(cc.Widget);u.left=this.node.width,u.right=-1*this.node.width,cc.tween(u).to(1/6,{left:0,right:0}).start()},setCallBack:function(e){this.mCallBack=e},openCalendar:function(e,t){this.calenderTarget=t;var n="";"betStartDate"==t?n=this.myBetStartDateTxt.getComponent(cc.Label).string:"betEndDate"==t?n=this.myBetEndDateTxt.getComponent(cc.Label).string:"accStartDate"==t?n=this.myAccStartDateTxt.getComponent(cc.Label).string:"accEndDate"==t&&(n=this.myAccEndDateTxt.getComponent(cc.Label).string);var a=n.split("-"),r=this.calendarPicker.getComponent("CalendarManager");3==a.length?r.show(new Date(a[0],a[1]-1,a[2])):r.show()},onDateSelected:function(e){var t=e.detail,n=t.year+"-"+t.month+"-"+t.day;"betStartDate"==this.calenderTarget?this.myBetStartDateTxt.getComponent(cc.Label).string=n:"betEndDate"==this.calenderTarget?this.myBetEndDateTxt.getComponent(cc.Label).string=n:"accStartDate"==this.calenderTarget?this.myAccStartDateTxt.getComponent(cc.Label).string=n:"accEndDate"==this.calenderTarget&&(this.myAccEndDateTxt.getComponent(cc.Label).string=n),this.calendarPicker.getComponent("CalendarManager").hide(),"accStartDate"!=this.calenderTarget&&"accEndDate"!=this.calenderTarget||(this.mCurrentTransPage=1,this.callGetTransactionApi(1,20))},onDateCancel:function(){cc.log("Calendar cancelled")},myBackButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this.node.getComponent(cc.Widget);cc.tween(r).to(1/6,{left:this.node.width,right:-1*this.node.width}).start(),this.mCallBack&&"function"==typeof this.mCallBack.onPersonalCenterBackButtonDidPressed&&this.mCallBack.onPersonalCenterBackButtonDidPressed()},onPersonalTabDidPressed:function(e,t,a){if(a||n.default.playButtonClickSound(),this.myUserInfoTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myBettingRecordTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myAccountDetailsTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myCardWalletTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myHistoryTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myUserInfoTabBtn.getChildByName("lblUserInfo").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myUserInfoTabBtn.getChildByName("lblUserInfo").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myBettingRecordTabBtn.getChildByName("lblBettingRecord").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myBettingRecordTabBtn.getChildByName("lblBettingRecord").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myAccountDetailsTabBtn.getChildByName("lblAccDetails").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myAccountDetailsTabBtn.getChildByName("lblAccDetails").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myCardWalletTabBtn.getChildByName("lblCardWallet").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myCardWalletTabBtn.getChildByName("lblCardWallet").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myHistoryTabBtn.getChildByName("lblHistory").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myHistoryTabBtn.getChildByName("lblHistory").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myFullContainer.active=!1,this.myUserInfoScrollView.active=!1,this.myTrxContainer.active=!1,this.myCardContainer.active=!1,this.myCutContainer.active=!1,this.myRecordContainer.active=!1,this.myHistoryContainer.active=!1,this.secondRecordContainer.active=!1,this.mCurrentFocusTab!=t&&(this.createdUnselectedTab.forEach(function(e){e&&e.isValid&&(e.unselect(),e.node.removeFromParent())}),this.createdUnselectedTab=[]),"BettingRecord"==t||"History"==t){var r=this.mBetRecordTabList;for(var o in"History"==t&&(r=this.mHistoryTabList),r){var i=60+128*parseInt(o),c=new cc.instantiate(this.myUnselectedTabPrefab).getComponent("UnselectedTab"),s=r[o].name,l=s;"History"==t&&(l=n.default.getLocalizedString(this.i18nJson,s.toLowerCase())||s),c.init(i,-22,s,t,this),c.myLabel&&(c.myLabel.getComponent(cc.Label).string=l),this.myCutConScrollContent.addChild(c.node),this.createdUnselectedTab.push(c)}this.myCutConScrollContent.width=120+128*(r.length-1),this.myCutConScrollView.getComponent(cc.ScrollView).scrollToLeft(0)}"UserInfo"==t?(this.myUserInfoTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myUserInfoTabBtn.getChildByName("lblUserInfo").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myUserInfoTabBtn.getChildByName("lblUserInfo").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myUserInfoScrollView.getComponent(cc.ScrollView).scrollToTop(0),this.myFullContainer.active=!0,this.myUserInfoScrollView.active=!0):"BettingRecord"==t?(this.myBettingRecordTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myBettingRecordTabBtn.getChildByName("lblBettingRecord").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myBettingRecordTabBtn.getChildByName("lblBettingRecord").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myFullContainer.active=!0,this.myRecordContainer.active=!0,this.setupTimeDropdown(t),this.mCurrentTransPage=1,this.callGetTransactionApi(1,20)):"AccDetails"==t?(this.myAccountDetailsTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myAccountDetailsTabBtn.getChildByName("lblAccDetails").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myAccountDetailsTabBtn.getChildByName("lblAccDetails").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myFullContainer.active=!0,this.myTrxContainer.active=!0,this.setupTimeDropdown(t),this.setupAccountDetailTypeDropdown(),this.mCurrentWalletPage=1,this.callGetWalletLedgerApi(1,20)):"CardWallet"==t?(this.myCardWalletTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myCardWalletTabBtn.getChildByName("lblCardWallet").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myCardWalletTabBtn.getChildByName("lblCardWallet").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myFullContainer.active=!0,this.myCardContainer.active=!0,0==Object.keys(this.mCardList).length?(this.myHvCardContainer.active=!1,this.myNoCardContainer.active=!0):(this.myNoCardContainer.active=!1,this.myHvCardContainer.active=!0)):"History"==t&&(this.myHistoryTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myHistoryTabBtn.getChildByName("lblHistory").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myHistoryTabBtn.getChildByName("lblHistory").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myCutContainer.active=!0,this.myHistoryContainer.active=!0,this.mHistoryFocusTab&&""!=this.mHistoryFocusTab||(this.mHistoryFocusTab="Deposit"),this.mHistorySelectedStatus="All",this.mCurrentHistoryPage=1,this.setupTimeDropdown("History"),this.callGetPaymentTransactionsApi(1,20)),this.mCurrentFocusTab=t},onEditBasicInfoDidPressed:function(){n.default.playButtonClickSound();var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/personal/editBasicInfo",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.myEditInfoView&&(e.myEditInfoView=cc.instantiate(a).getComponent("EditBasicInfo"),e.updatePrefabSize()),e.myEditInfoView.setCallBack(e),e.myEditInfoView.updateView(e),e.node.addChild(e.myEditInfoView.node),n.default.hideLoadingView(e)})},myCloseEditBasicInfoDidPressed:function(e,t,r,o){if(this.node.removeChild(this.myEditInfoView.node),o){var i=a.default.getUserObject();this.myPlayerNameLabel.getComponent(cc.Label).string=i.fullName,this.myAccountTxt.getComponent(cc.Label).string=i.fullName,this.myEmailTxt.getComponent(cc.Label).string=i.email,this.showNotification(n.default.getLocalizedString(this.i18nJson,"updateSuccess"))}},onVIPLevelDidPressed:function(){n.default.playButtonClickSound();var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/vip/viplevel",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.myVIPLevelView&&(e.myVIPLevelView=cc.instantiate(a).getComponent("VIPLevel"),e.updatePrefabSize()),e.myVIPLevelView.updateView(e),e.node.addChild(e.myVIPLevelView.node),n.default.hideLoadingView(e)})},myCloseVIPLevelDidPressed:function(){this.node.removeChild(this.myVIPLevelView.node)},onChangeAvatarDidPressed:function(){var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/avatar/avatarList",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.myChangeAvatarView&&(e.myChangeAvatarView=cc.instantiate(a).getComponent("AvatarList"),e.updatePrefabSize()),e.myChangeAvatarView.updateView(e),e.node.addChild(e.myChangeAvatarView.node),n.default.hideLoadingView(e)})},myCloseChangeAvatarDidPressed:function(){var e=this;a.default.getSelectedAvatar()==localStorage.getItem("selected_avatar")&&cc.loader.loadRes("images/profile/Avatar"+a.default.getSelectedAvatar()+".png",cc.SpriteFrame,function(t,n){e.myHeaderProfileImg.getComponent(cc.Sprite).spriteFrame=n,e.myUserInfoProfileImg.getComponent(cc.Sprite).spriteFrame=n}),this.node.removeChild(this.myChangeAvatarView.node)},onVerifyButtonDidPressed:function(){n.default.playButtonClickSound();var e=this;n.default.showLoadingView("",e),cc.resources.load("prefabs/verification/verification",cc.Prefab,function(t,a){if(t)return console.error("Failed to load prefab:",t),void n.default.hideLoadingView(e);null==e.myVerificationView&&(e.myVerificationView=cc.instantiate(a).getComponent("Verification"),e.updatePrefabSize()),n.default.hideLoadingView(e),e.myVerificationView.updateView(e,"phoneVerify","PersonalCenter",""),e.node.addChild(e.myVerificationView.node)})},onVerificationCloseButtonDidPressed:function(e){this.node.removeChild(this.myVerificationView.node),"personalCenter"==e&&this.showNotification("Verified")},onManageCardDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this;n.default.showLoadingView("",r),cc.resources.load("prefabs/deposit/manageCard",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void n.default.hideLoadingView(r);null==r.myManageCardView&&(r.myManageCardView=cc.instantiate(t).getComponent("ManageCard"),r.updatePrefabSize()),r.myManageCardView.updateView(r),r.node.addChild(r.myManageCardView.node),n.default.hideLoadingView(r)})},myCloseManageCardDidPressed:function(){this.node.removeChild(this.myManageCardView.node)},onTabDidPressed:function(e,t){if("History"==this.mCurrentFocusTab&&null==t||"History"==t){if(this.myHisStatScrollView.active&&this.onDDLDidPressed(null,"historyStatus",!0),this.mHistoryFocusTab!=e){this.createdHistoryDDLSelect.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),this.createdHistoryDDLSelect=[];var a=n.default.getLocalizedString(this.i18nJson,"all")||"All";this.myHisStatSelect.getChildByName("lblStatus").getComponent(cc.Label).string=a;var r=this.mHistoryTabList.find(function(t){return t.name===e}).statusList.split(",");for(var o in r){var i=r[o].trim(),c=-25-46*parseInt(o),s=n.default.getLocalizedString(this.i18nJson,i.toLowerCase())||i;(p=new cc.instantiate(this.myDDLSelectPrefab).getComponent("DDLSelect")).init(0,c,i,this),p.setInfoKey(i),p.myLabel&&(p.myLabel.getComponent(cc.Label).string=s),this.myHisStatScrollContent.addChild(p.node),this.createdHistoryDDLSelect.push(p)}var l=h=50+46*(r.length-1);h=h>440?440:h,this.myHisStatScrollView.height=h,this.myHisStatScrollViewView.height=h,this.myHisStatScrollContent.height=l,this.myHisStatScrollView.getComponent(cc.ScrollView).scrollToTop(0)}var u=this.mHistoryFocusTab;this.mHistoryFocusTab=e,u&&""!=u&&u!=e&&(this.mCurrentHistoryPage=1,this.callGetPaymentTransactionsApi(1,20))}else if("BettingRecord"==this.mCurrentFocusTab&&null==t||"BettingRecord"==t){if(this.myBetPlatformScrollView.active&&this.onDDLDidPressed(null,"betPlatform",!0),this.mBetRecordFocusTab!=e)for(var o in this.createdBetPlatformDDLSelect.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),this.createdBetPlatformDDLSelect=[],this.mBetRecordTabList){var d=this.mBetRecordTabList[o];if(d.name==e){var h,m=d.developers;for(var f in m){var p,g=m[f];"0"==f&&(this.myBetPlatformSelect.getChildByName("lblPlatform").getComponent(cc.Label).string=g.name),c=-25-46*parseInt(f),(p=new cc.instantiate(this.myDDLSelectPrefab).getComponent("DDLSelect")).init(0,c,g.name,this),this.myBetPlatformScrollContent.addChild(p.node),this.createdBetPlatformDDLSelect.push(p)}l=h=50+46*(m.length-1),h=h>440?440:h,this.myBetPlatformScrollView.height=h,this.myBetPlatformScrollViewView.height=h,this.myBetPlatformScrollContent.height=l,this.myBetPlatformScrollView.getComponent(cc.ScrollView).scrollToTop(0);break}}this.mBetRecordFocusTab=e}this.createdUnselectedTab.forEach(function(e){e&&e.isValid&&e.unselect()})},onDDLDidPressed:function(e,t,a){if(a||n.default.playButtonClickSound(),"recordTrxDate"==t||"historyTrxDate"==t){var r=this.myTrxDateSelect,o=this.myTrxDateDDL;"recordTrxDate"==t?(r=this.myRecordTrxSelect,o=this.myRecordTrxDDL):"historyTrxDate"==t&&(r=this.myHistoryTrxSelect,o=this.myHistoryTrxDDL);var i=r.getChildByName("iconTriangle");o.active?i.angle=90:i.angle=-90,o.active=!o.active}else"accType"==t?(i=this.myAccDetailTypeSelect.getChildByName("iconTriangle"),this.myAccDetailTypeDDL.active?i.angle=90:i.angle=-90,this.myAccDetailTypeDDL.active=!this.myAccDetailTypeDDL.active):"accTypeTime"==t?(i=this.myAccDetailTypeTimeSelect.getChildByName("iconTriangle"),this.myAccDetailTypeTimeDDL.active?i.angle=90:i.angle=-90,this.myAccDetailTypeTimeDDL.active=!this.myAccDetailTypeTimeDDL.active):"betRecordType"==t?(i=this.myBetRecordTypeSelect.getChildByName("iconTriangle"),this.myBetRecordTypeDDL.active?i.angle=90:i.angle=-90,this.myBetRecordTypeDDL.active=!this.myBetRecordTypeDDL.active):"recordTypeTime"==t?(i=this.myBetRecordTypeTimeSelect.getChildByName("iconTriangle"),this.myBetRecordTypeTimeDDL.active?i.angle=90:i.angle=-90,this.myBetRecordTypeTimeDDL.active=!this.myBetRecordTypeTimeDDL.active):"betPlatform"==t?(i=this.myBetPlatformSelect.getChildByName("iconTriangle"),this.myBetPlatformScrollView.active?i.angle=90:i.angle=-90,this.myBetPlatformScrollView.active=!this.myBetPlatformScrollView.active):"historyStatus"==t&&(i=this.myHisStatSelect.getChildByName("iconTriangle"),this.myHisStatScrollView.active?i.angle=90:i.angle=-90,this.myHisStatScrollView.active=!this.myHisStatScrollView.active)},onDDLOptionDidPressed:function(e,t,a,r){a||n.default.playButtonClickSound();var o=e.target.parent.name;console.log(o);var i=e.target.getChildByName("label").getComponent(cc.Label).string;if("AccDetailTypeScrollViewContent"==o||"ddl_recordtype_bg"==o||"ddl_historyTrxDate_bg"==o||"betPlatformContent"==o||"historyStatusContent"==o||"BetRecordTrxTimeScrollViewContent"==o||"AccDetailTrxTimeScrollViewContent"==o||"HistoryTrxTimeScrollViewContent"==o){var c=this.myAccDetailTypeSelect,s=this.myAccDetailTypeDDL,l="lblType";if("AccDetailTypeScrollViewContent"==o)c=this.myAccDetailTypeSelect,s=this.myAccDetailTypeDDL,l="lblType",this.mAccDetailSelectedType=r;else if("ddl_recordtype_bg"==o)c=this.myBetRecordTypeSelect,s=this.myBetRecordTypeDDL,l="lblType",this.mBetRecordSelectedType=t;else if("ddl_historyTrxDate_bg"==o||"HistoryTrxTimeScrollViewContent"==o)c=this.myHistoryTrxSelect,s=this.myHistoryTrxDDL,l="lblTrxDate",this.mHistorySelectedTime=r;else if("betPlatformContent"==o)c=this.myBetPlatformSelect,s=this.myBetPlatformScrollView,l="lblPlatform";else if("historyStatusContent"==o){c=this.myHisStatSelect,s=this.myHisStatScrollView,l="lblStatus";var u=r||i;this.mHistorySelectedStatus=u,c.getChildByName(l).getComponent(cc.Label).string=i}else"BetRecordTrxTimeScrollViewContent"==o?(c=this.myBetRecordTypeTimeSelect,s=this.myBetRecordTypeTimeDDL,l="lblTime",this.mBetRecordSelectedTime=r):"AccDetailTrxTimeScrollViewContent"==o&&(c=this.myAccDetailTypeTimeSelect,s=this.myAccDetailTypeTimeDDL,l="lblTime",this.mAccDetailSelectedTime=r);c.getChildByName(l).getComponent(cc.Label).string=i,c.getChildByName("iconTriangle").angle=90,s.active=!1}"ddl_recordtype_bg"==o||"BetRecordTrxTimeScrollViewContent"==o?(this.mCurrentTransPage=1,this.callGetTransactionApi(1,20)):"AccDetailTrxTimeScrollViewContent"==o?(this.mCurrentWalletPage=1,this.callGetWalletLedgerApi(1,20)):"AccDetailTypeScrollViewContent"==o?(this.mCurrentWalletPage=1,this.callGetWalletLedgerApi(1,20)):"historyStatusContent"!=o&&"ddl_historyTrxDate_bg"!=o&&"HistoryTrxTimeScrollViewContent"!=o||(this.mCurrentHistoryPage=1,this.callGetPaymentTransactionsApi(1,20))},showCardList:function(){var e=Object.keys(this.mCardList).length;if(e>0)for(var t in this.mNoBankLabel.active=!1,this.myHvCardContainer.active=!0,this.myNoCardContainer.active=!1,this.mCardList){var n=this.mCardList[t],a=new cc.instantiate(this.mCardRowPrefab);a.name="cardRow"+(parseInt(t)+1),a.setPosition(cc.v2(-2,-52*parseInt(t)-27)),a.getChildByName("lblBank").getComponent(cc.Label).string=n.bank,a.getChildByName("lblAccName").getComponent(cc.Label).string=n.name,a.getChildByName("lblAccNumber").getComponent(cc.Label).string=n.number,this.myWalletScrollContent.addChild(a),this.createdRows.push(a)}else this.mNoBankLabel.active=!0,this.myNoCardContainer.active=!1,this.myHvCardContainer.active=!0;e>=this.mMaxCard?this.myAddAccBtn.getComponent(cc.Sprite).spriteFrame=this.mAddOffImg:this.myAddAccBtn.getComponent(cc.Sprite).spriteFrame=this.mAddOnImg,this.myAddAccBtn.y=-47*e-84,this.mAddAccLabel.y=-47*e-82,this.mWarningLabel.y=-47*e-126,this.myWalletScrollContent.height=159+47*e},setupTimeDropdown:function(e){var t=this.createdTimeDDLSelect,a=this.myAccDetailTypeTimeDDL,r=this.myAccDetailTypeTimeScrollView,o=this.myAccDetailTypeTimeScrollViewView,i=this.myAccDetailTypeTimeScrollContent;this.myAccDetailTypeTimeSelect,"BettingRecord"==e?(t=this.createdBetRecordTimeDDLSelect,a=this.myBetRecordTypeTimeDDL,r=this.myBetRecordTypeTimeScrollView,o=this.myBetRecordTypeTimeScrollViewView,i=this.myBetRecordTypeTimeScrollContent,this.myBetRecordTypeTimeSelect):"History"==e&&(t=this.createdHistoryTimeDDLSelect,a=this.myHistoryTrxDDL,this.myHistoryTrxDDL&&(r=this.myHistoryTimeScrollView,o=this.myHistoryTimeScrollViewView,i=this.myHistoryTimeScrollContent),this.myHistoryTrxSelect),t.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),t=[];var c=["allTime","today","last7Days","last30Days"];if(i)for(var s in c){var l=c[s],u=n.default.getLocalizedString(this.i18nJson,l),d=-25-46*parseInt(s),h=new cc.instantiate(this.myDDLSelectPrefab).getComponent("DDLSelect");h.init(0,d,u,this),h.setInfoKey(l),i.addChild(h.node),"History"==e&&i&&(i.name="HistoryTrxTimeScrollViewContent"),t.push(h)}if(i){var m=50+46*(c.length-1),f=m;if(m=m>234?234:m,a&&(a.height=m),r&&r.getComponent){r.height=m;var p=r.getComponent(cc.ScrollView);p&&p.scrollToTop(0)}o&&(o.height=m),i&&(i.height=f)}"AccDetails"==e?this.mAccDetailSelectedTime&&""!=this.mAccDetailSelectedTime||(this.mAccDetailSelectedTime="allTime",this.myAccDetailTypeTimeSelect.getChildByName("lblTime").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allTime")):"BettingRecord"==e?this.mBetRecordSelectedTime&&""!=this.mBetRecordSelectedTime||(this.mBetRecordSelectedTime="allTime",this.myBetRecordTypeTimeSelect.getChildByName("lblTime").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allTime")):"History"==e&&(this.mHistorySelectedTime&&""!=this.mHistorySelectedTime||(this.mHistorySelectedTime="allTime",this.myHistoryTrxSelect&&this.myHistoryTrxSelect.getChildByName("lblTrxDate")&&(this.myHistoryTrxSelect.getChildByName("lblTrxDate").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allTime"))))},setupAccountDetailTypeDropdown:function(){console.log("----------setupAccountDetailTypeDropdown-----------");var e=this.myAccDetailTypeDDLSelect,t=this.myAccDetailTypeDDL,a=this.myAccDetailTypeScrollView,r=this.myAccDetailTypeScrollViewView,o=this.myAccDetailTypeScrollContent;e.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),e=[];var i=["allType","credit","cash"];for(var c in i){var s=i[c],l=n.default.getLocalizedString(this.i18nJson,s),u=-25-46*parseInt(c),d=new cc.instantiate(this.myDDLSelectPrefab).getComponent("DDLSelect");d.init(0,u,l,this),d.setInfoKey(s),o.addChild(d.node),e.push(d)}var h=50+46*(i.length-1),m=h;h=h>234?234:h,t.height=h,a.height=h,r.height=h,o.height=m,a.getComponent(cc.ScrollView).scrollToTop(0),this.mAccDetailSelectedType&&""!=this.mAccDetailSelectedType||(this.mAccDetailSelectedType="allType",this.myAccDetailTypeSelect.getChildByName("lblType").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allType"))},showNotification:function(e){var t=this;this.mNotificationLabel.getComponent(cc.Label).string=e,cc.Tween.stopAllByTarget(this.myNotificationBG),this.myNotificationBG.active=!0,this.myNotificationBG.opacity=0,cc.tween(this.myNotificationBG).to(1/3,{opacity:255}).delay(2).to(1/3,{opacity:0}).call(function(){t.myNotificationBG.active=!1}).start()},callGetTransactionApi:function(e,t){var a=this;return u(s().mark(function o(){var i,c,l,u,d,h,m,f,p,g,y,v,b,w,C,L,S,B;return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n.default.showLoadingView("Loading",a),i=localStorage.getItem("token"),c=null,l=null,"allTime"==a.mBetRecordSelectedTime?(c=null,l=null):"today"==a.mBetRecordSelectedTime?(u=n.default.getTodayDate(),d=n.default.getTomorrowDate(),c=u,l=d):"last7Days"==a.mBetRecordSelectedTime?(h=n.default.getDateRange(7),c=h.from,l=h.to):"last30Days"==a.mBetRecordSelectedTime?(m=n.default.getDateRange(30),c=m.from,l=m.to):(c=a.myAccStartDateTxt.getComponent(cc.Label).string,l=a.myAccEndDateTxt.getComponent(cc.Label).string),f=1,p=20,null!=e&&(f=e),null!=t&&(p=t),g={page:f,limit:p},console.log("startDate: "+c),console.log("endDate: "+l),""!=a.mBetRecordSelectedType&&(g.type=a.mBetRecordSelectedType),null!==c&&null!==l&&(g.startDate=c,g.endDate=l),o.prev=14,o.next=17,r.default.getTransactions(i,g);case 17:if(y=o.sent,console.log("----------getTransactions-----------"),console.log(y),!n.default.isSessionExpired(y)){o.next=23;break}return n.default.handleSessionExpiration(y,a),o.abrupt("return");case 23:if(!n.default.isServerError(y)){o.next=26;break}return n.default.handleServerError(y,a),o.abrupt("return");case 26:if(200==y.status)if(a.createdBetRecordRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),a.createdBetRecordRows=[],(b=(null==(v=y.data)?void 0:v.pagination)||y.pagination)&&(a.mCurrentTransPage=b.page||1,a.mTotalTransPages=b.totalPages||1,a.updatePaginationUI("Trans")),(w=y.transactions).length>0){for(C in a.mNoRecords1Label.active=!1,w)L=w[C],(S=new cc.instantiate(a.mBetRecordRowPrefab)).name="betRecordRow"+(parseInt(C)+1),S.setPosition(cc.v2(0,-40*parseInt(C)-30)),S.getChildByName("lblDate").getComponent(cc.Label).string=n.default.getLocalDate(L.date),S.getChildByName("lblBetSlipID").getComponent(cc.Label).string=L.transactionId,S.getChildByName("lblGame").getComponent(cc.Label).string=L.game.name,S.getChildByName("lblStake").getComponent(cc.Label).string=L.currency+" "+n.default.showNumberWithDecimalAndComma(L.amount,2),S.getChildByName("lblResults").getComponent(cc.Label).string=L.action,S.getChildByName("lblWinLoss").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(L.balanceAfter-L.balanceBefore,2),S.getChildByName("lblValid").getComponent(cc.Label).string=L.currency+" "+n.default.showNumberWithDecimalAndComma(L.amount,2),a.myBetRecordScrollContent.addChild(S),a.createdBetRecordRows.push(S);B=-40*(w.length-1)-30,a.myBetRecordScrollContent.height=Math.abs(B)+30,a.myBetRecordScrollView.getComponent(cc.ScrollView).scrollToTop(0)}else a.mNoRecords1Label.active=!0;n.default.hideLoadingView(a),o.next=41;break;case 30:if(o.prev=30,o.t0=o.catch(14),!n.default.handleSessionExpiration(o.t0,a)){o.next=34;break}return o.abrupt("return");case 34:if(!n.default.handleServerError(o.t0,a)){o.next=37;break}return n.default.hideLoadingView(a),o.abrupt("return");case 37:a.createdBetRecordRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),a.createdBetRecordRows=[],console.log(o.t0),n.default.hideLoadingView(a);case 41:case"end":return o.stop()}},o,null,[[14,30]])}))()},callGetWalletListingApi:function(){var e=this;return u(s().mark(function t(){var a,r,o,c;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),t.prev=1,t.next=4,i.default.getBankAccounts(a);case 4:if(r=t.sent,console.log("----------getBankAccounts-----------"),console.log(r),!n.default.isSessionExpired(r)){t.next=10;break}return n.default.handleSessionExpiration(r,e),t.abrupt("return");case 10:if(!n.default.isServerError(r)){t.next=13;break}return n.default.handleServerError(r,e),t.abrupt("return");case 13:if(200==r.status&&r.data){for(e.mCardList=[],o=0;o<r.data.length;o++)c=r.data[o],e.mCardList.push({bank:c.bankName,name:c.accountName,number:c.accountNumber});e.showCardList()}else e.showCardList();t.next=24;break;case 16:if(t.prev=16,t.t0=t.catch(1),!n.default.handleSessionExpiration(t.t0,e)){t.next=20;break}return t.abrupt("return");case 20:if(!n.default.handleServerError(t.t0,e)){t.next=22;break}return t.abrupt("return");case 22:console.log(t.t0),e.showCardList();case 24:case"end":return t.stop()}},t,null,[[1,16]])}))()},callGetBalanceApi:function(){var e=this;return u(s().mark(function t(){var r,i;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.default.showLoadingView("Loading",e),t.prev=1,t.next=4,o.default.getBalance(localStorage.getItem("token"));case 4:if(r=t.sent,!n.default.isSessionExpired(r)){t.next=8;break}return n.default.handleSessionExpiration(r,e),t.abrupt("return");case 8:if(!n.default.isServerError(r)){t.next=11;break}return n.default.handleServerError(r,e),t.abrupt("return");case 11:200==r.status&&(console.log(r),(i=a.default.getUserObject()).balance=r.data.balance,a.default.setUserObject(i),e.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(i.balance,2),e.mCallBack.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(i.balance,2),n.default.hideLoadingView(e)),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(1),!n.default.handleSessionExpiration(t.t0,e)){t.next=18;break}return t.abrupt("return");case 18:n.default.hideLoadingView(e);case 19:case"end":return t.stop()}},t,null,[[1,14]])}))()},callGetWalletLedgerApi:function(e,t){var a=this;return u(s().mark(function r(){var o,c,l,u,d,h,m,f,p,g,y,v,b,w,C,L,S;return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.default.showLoadingView("Loading",a),o=localStorage.getItem("token"),c=null,l=null,"allTime"==a.mAccDetailSelectedTime?(c=null,l=null):"today"==a.mAccDetailSelectedTime?(u=n.default.getTodayDate(),d=n.default.getTomorrowDate(),c=u,l=d):"last7Days"==a.mAccDetailSelectedTime?(h=n.default.getDateRange(7),c=h.from,l=h.to):"last30Days"==a.mAccDetailSelectedTime?(m=n.default.getDateRange(30),c=m.from,l=m.to):(c=a.myAccStartDateTxt.getComponent(cc.Label).string,l=a.myAccEndDateTxt.getComponent(cc.Label).string),f=1,p=20,null!=e&&(f=e),null!=t&&(p=t),g={currency:"BDT",page:f,limit:p},"allType"!=a.mAccDetailSelectedType&&(g.walletType="credit"==a.mAccDetailSelectedType?"credit":"cash"),null!==c&&null!==l&&(g.startDate=c,g.endDate=l),r.prev=12,r.next=15,i.default.getWalletLedger(o,g);case 15:if(y=r.sent,!n.default.isSessionExpired(y)){r.next=19;break}return n.default.handleSessionExpiration(y,a),r.abrupt("return");case 19:if(!n.default.isServerError(y)){r.next=22;break}return n.default.handleServerError(y,a),r.abrupt("return");case 22:if(200==y.status)if(a.walletLedgerRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),a.walletLedgerRows=[],(v=y.data.pagination||y.pagination)&&(a.mCurrentWalletPage=v.page||1,a.mTotalWalletPages=v.totalPages||1,a.updatePaginationUI("Wallet")),(b=y.data.entries).length>0){for(w in a.mNoRecords2Label.active=!1,b)C=b[w],(L=new cc.instantiate(a.mTrxRowPrefab)).name="trxRow"+(parseInt(w)+1),L.setPosition(cc.v2(0,-40*parseInt(w)-30)),L.getChildByName("lblDate").getComponent(cc.Label).string=n.default.getLocalDate(C.createdAt),L.getChildByName("lblDesc").getComponent(cc.Label).string=C.transactionDescription,L.getChildByName("lblIn").getComponent(cc.Label).string="credit"==C.transactionType?n.default.showNumberWithDecimalAndComma(C.amount,2):"-",L.getChildByName("lblOut").getComponent(cc.Label).string="debit"==C.transactionType?n.default.showNumberWithDecimalAndComma(C.amount,2):"-",L.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(C.balanceAfter,2),a.myTrxScrollContent.addChild(L),a.walletLedgerRows.push(L);b.length>0&&(S=-40*(b.length-1)-30,a.myTrxScrollContent.height=Math.abs(S)+30,a.myTrxScrollView.getComponent(cc.ScrollView).scrollToTop(0))}else a.mNoRecords2Label.active=!0;n.default.hideLoadingView(a),r.next=37;break;case 26:if(r.prev=26,r.t0=r.catch(12),!n.default.handleSessionExpiration(r.t0,a)){r.next=30;break}return r.abrupt("return");case 30:if(!n.default.handleServerError(r.t0,a)){r.next=33;break}return n.default.hideLoadingView(a),r.abrupt("return");case 33:a.walletLedgerRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),a.walletLedgerRows=[],console.log(r.t0),n.default.hideLoadingView(a);case 37:case"end":return r.stop()}},r,null,[[12,26]])}))()},callGetPaymentTransactionsApi:function(e,t){var a=this;return u(s().mark(function r(){var o,c,l,u,d,h,m,f,p,g,y,v,b,w,C,L,S,B,P,N,D,k,T;return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=a,n.default.showLoadingView("Loading",o),c=localStorage.getItem("token"),o.mHistoryFocusTab&&""!=o.mHistoryFocusTab||(o.mHistoryFocusTab="Deposit"),l=1,u=20,null!=e&&(l=e),null!=t&&(u=t),d={page:l,limit:u},"Deposit"==o.mHistoryFocusTab?d.type="deposit":"Withdrawal"==o.mHistoryFocusTab&&(d.type="withdrawal"),o.mHistorySelectedStatus&&"All"!=o.mHistorySelectedStatus&&(h={Pending:"pending",Approved:"approved",Rejected:"rejected",Cancelled:"cancelled"},d.status=h[o.mHistorySelectedStatus]||o.mHistorySelectedStatus.toLowerCase()),m=null,f=null,"allTime"==o.mHistorySelectedTime?(m=null,f=null):"today"==o.mHistorySelectedTime?(p=n.default.getTodayDate(),g=n.default.getTomorrowDate(),m=p,f=g):"last7Days"==o.mHistorySelectedTime?(y=n.default.getDateRange(7),m=y.from,f=y.to):"last30Days"==o.mHistorySelectedTime&&(v=n.default.getDateRange(30),m=v.from,f=v.to),null!==m&&null!==f&&(d.startDate=m,d.endDate=f),console.log(d),r.prev=16,r.next=19,i.default.getPaymentTransactions(c,d);case 19:if(C=r.sent,console.log("----------getPaymentTransactions-----------"),!n.default.isSessionExpired(C)){r.next=25;break}return n.default.handleSessionExpiration(C,o),n.default.hideLoadingView(o),r.abrupt("return");case 25:if(!n.default.isServerError(C)){r.next=29;break}return n.default.handleServerError(C,o),n.default.hideLoadingView(o),r.abrupt("return");case 29:if(o.createdHistoryRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),o.createdHistoryRows=[],(L=(null==(b=C.data)?void 0:b.pagination)||C.pagination)&&(o.mCurrentHistoryPage=L.page||1,o.mTotalHistoryPages=L.pages||L.totalPages||1,o.updatePaginationUI("History")),!((S=(null==(w=C.data)?void 0:w.transactions)||C.transactions||[])&&S.length>0)){r.next=61;break}o.mNoRecords3Label.active=!1,r.t0=s().keys(S);case 37:if((r.t1=r.t0()).done){r.next=57;break}if(B=r.t1.value,P=S[B],o.mHistoryRowPrefab){r.next=44;break}return console.error("mHistoryRowPrefab is not set!"),n.default.hideLoadingView(o),r.abrupt("return");case 44:(N=new cc.instantiate(o.mHistoryRowPrefab)).name="historyRow"+(parseInt(B)+1),N.setPosition(cc.v2(0,-40*parseInt(B)-30)),N.getChildByName("lblDate")&&(N.getChildByName("lblDate").getComponent(cc.Label).string=n.default.getLocalDate(P.createdAt)),N.getChildByName("lblTrxID")&&(N.getChildByName("lblTrxID").getComponent(cc.Label).string=P.referenceNumber||P._id),N.getChildByName("lblBank")&&(D=P.bankDetails?P.bankDetails.bankName:"-",N.getChildByName("lblBank").getComponent(cc.Label).string=D),N.getChildByName("lblAmt")&&(N.getChildByName("lblAmt").getComponent(cc.Label).string=P.currency+" "+n.default.showNumberWithDecimalAndComma(P.amount,2)),N.getChildByName("lblStatus")&&(N.getChildByName("lblStatus").getComponent(cc.Label).string=P.status),N.getChildByName("lblReason")&&(k=P.rejectionReason||"-",N.getChildByName("lblReason").getComponent(cc.Label).string=k),o.myHistoryScrollContent&&o.myHistoryScrollContent.addChild(N),o.createdHistoryRows.push(N),r.next=37;break;case 57:o.myHistoryScrollContent&&S.length>0&&(T=-40*(S.length-1)-30,o.myHistoryScrollContent.height=Math.abs(T)+30,o.myHistoryScrollView&&o.myHistoryScrollView.getComponent(cc.ScrollView).scrollToTop(0)),n.default.hideLoadingView(o),r.next=63;break;case 61:o.mNoRecords3Label.active=!0,n.default.hideLoadingView(o);case 63:n.default.hideLoadingView(o),r.next=78;break;case 66:if(r.prev=66,r.t2=r.catch(16),console.error("callGetPaymentTransactionsApi error:",r.t2),!n.default.handleSessionExpiration(r.t2,o)){r.next=72;break}return n.default.hideLoadingView(o),r.abrupt("return");case 72:if(!n.default.handleServerError(r.t2,o)){r.next=75;break}return n.default.hideLoadingView(o),r.abrupt("return");case 75:o.createdHistoryRows.forEach(function(e){e&&e.isValid&&e.removeFromParent()}),o.createdHistoryRows=[],n.default.hideLoadingView(o);case 78:case"end":return r.stop()}},r,null,[[16,66]])}))()},initWalletPagination:function(){var e=this;if(this.walletFirstPageBtn&&this.walletFirstPageBtn.on("click",function(){e.onPaginationButtonClick("Wallet","first")},this),this.walletLastPageBtn&&this.walletLastPageBtn.on("click",function(){e.onPaginationButtonClick("Wallet","last")},this),this.walletPreviousPageBtn&&this.walletPreviousPageBtn.on("click",function(){e.onPaginationButtonClick("Wallet","previous")},this),this.walletNextPageBtn&&this.walletNextPageBtn.on("click",function(){e.onPaginationButtonClick("Wallet","next")},this),this.walletGoBtn&&this.walletGoBtn.on("click",function(){e.onPaginationGoClick("Wallet")},this),this.walletCurrentPageEditBox){var t=this.walletCurrentPageEditBox.getComponent(cc.EditBox);t&&t.node.on("editing-did-ended",function(t){e.onPaginationEditEnded(t,"Wallet")},this)}},initTransPagination:function(){var e=this;if(this.transFirstPageBtn&&this.transFirstPageBtn.on("click",function(){e.onPaginationButtonClick("Trans","first")},this),this.transLastPageBtn&&this.transLastPageBtn.on("click",function(){e.onPaginationButtonClick("Trans","last")},this),this.transPreviousPageBtn&&this.transPreviousPageBtn.on("click",function(){e.onPaginationButtonClick("Trans","previous")},this),this.transNextPageBtn&&this.transNextPageBtn.on("click",function(){e.onPaginationButtonClick("Trans","next")},this),this.transGoBtn&&this.transGoBtn.on("click",function(){e.onPaginationGoClick("Trans")},this),this.transCurrentPageEditBox){var t=this.transCurrentPageEditBox.getComponent(cc.EditBox);t&&t.node.on("editing-did-ended",function(t){e.onPaginationEditEnded(t,"Trans")},this)}},initHistoryPagination:function(){var e=this;if(this.historyFirstPageBtn&&this.historyFirstPageBtn.on("click",function(){e.onPaginationButtonClick("History","first")},this),this.historyLastPageBtn&&this.historyLastPageBtn.on("click",function(){e.onPaginationButtonClick("History","last")},this),this.historyPreviousPageBtn&&this.historyPreviousPageBtn.on("click",function(){e.onPaginationButtonClick("History","previous")},this),this.historyNextPageBtn&&this.historyNextPageBtn.on("click",function(){e.onPaginationButtonClick("History","next")},this),this.historyGoBtn&&this.historyGoBtn.on("click",function(){e.onPaginationGoClick("History")},this),this.historyCurrentPageEditBox){var t=this.historyCurrentPageEditBox.getComponent(cc.EditBox);t&&t.node.on("editing-did-ended",function(t){e.onPaginationEditEnded(t,"History")},this)}},onPaginationButtonClick:function(e,t){var a,r;if("Wallet"===e?(a=this.mCurrentWalletPage,r=this.mTotalWalletPages):"History"===e?(a=this.mCurrentHistoryPage,r=this.mTotalHistoryPages):(a=this.mCurrentTransPage,r=this.mTotalTransPages),"first"===t||"previous"===t){if(a<=1)return}else if(("last"===t||"next"===t)&&a>=r)return;n.default.playButtonClickSound();var o=a;"first"===t?o=1:"last"===t?o=r:"previous"===t?o=a-1:"next"===t&&(o=a+1),"Wallet"===e?(this.mCurrentWalletPage=o,this.callGetWalletLedgerApi(this.mCurrentWalletPage,20)):"History"===e?(this.mCurrentHistoryPage=o,this.callGetPaymentTransactionsApi(this.mCurrentHistoryPage,20)):(this.mCurrentTransPage=o,this.callGetTransactionApi(this.mCurrentTransPage,20))},onPaginationGoClick:function(e){var t,a,r;if(n.default.playButtonClickSound(),"Wallet"===e?(t=this.walletCurrentPageEditBox,a=this.mTotalWalletPages,r=this.mCurrentWalletPage):"History"===e?(t=this.historyCurrentPageEditBox,a=this.mTotalHistoryPages,r=this.mCurrentHistoryPage):(t=this.transCurrentPageEditBox,a=this.mTotalTransPages,r=this.mCurrentTransPage),t){var o=t.getComponent(cc.EditBox);if(o){var i=parseInt(o.string);isNaN(i)||i<1?i=1:i>a&&(i=a),o.string=i.toString(),i!==r&&("Wallet"===e?(this.mCurrentWalletPage=i,this.callGetWalletLedgerApi(this.mCurrentWalletPage,20)):(this.mCurrentTransPage=i,this.callGetTransactionApi(this.mCurrentTransPage,20)))}}},onPaginationEditEnded:function(e,t){var n,a;"Wallet"===t?(n=this.mTotalWalletPages,a=this.mCurrentWalletPage):"History"===t?(n=this.mTotalHistoryPages,a=this.mCurrentHistoryPage):(n=this.mTotalTransPages,a=this.mCurrentTransPage);var r=parseInt(e.string);isNaN(r)||r<1?r=1:r>n&&(r=n),e.string=r.toString(),r!==a&&("Wallet"===t?(this.mCurrentWalletPage=r,this.callGetWalletLedgerApi(this.mCurrentWalletPage,20)):"History"===t?(this.mCurrentHistoryPage=r,this.callGetPaymentTransactionsApi(this.mCurrentHistoryPage,20)):(this.mCurrentTransPage=r,this.callGetTransactionApi(this.mCurrentTransPage,20)))},updatePaginationUI:function(e){"Wallet"===e?this.updateWalletPaginationUI():"History"===e?this.updateHistoryPaginationUI():this.updateTransPaginationUI()},updateWalletPaginationUI:function(){if(this.walletTotalPageLabel&&(this.walletTotalPageLabel.getComponent(cc.Label).string=this.mTotalWalletPages.toString()),this.walletCurrentPageEditBox){var e=this.walletCurrentPageEditBox.getComponent(cc.EditBox);e&&(e.string=this.mCurrentWalletPage.toString())}if(this.walletFirstPageBtn){var t=this.walletFirstPageBtn.getComponent(cc.Button),n=this.mCurrentWalletPage<=1;t&&(t.interactable=!n),this.walletFirstPageBtn.opacity=n?128:255}if(this.walletLastPageBtn){var a=this.walletLastPageBtn.getComponent(cc.Button),r=this.mCurrentWalletPage>=this.mTotalWalletPages;a&&(a.interactable=!r),this.walletLastPageBtn.opacity=r?128:255}if(this.walletPreviousPageBtn){var o=this.walletPreviousPageBtn.getComponent(cc.Button),i=this.mCurrentWalletPage<=1;o&&(o.interactable=!i),this.walletPreviousPageBtn.opacity=i?128:255}if(this.walletNextPageBtn){var c=this.walletNextPageBtn.getComponent(cc.Button),s=this.mCurrentWalletPage>=this.mTotalWalletPages;c&&(c.interactable=!s),this.walletNextPageBtn.opacity=s?128:255}},updateTransPaginationUI:function(){if(this.transTotalPageLabel&&(this.transTotalPageLabel.getComponent(cc.Label).string=this.mTotalTransPages.toString()),this.transCurrentPageEditBox){var e=this.transCurrentPageEditBox.getComponent(cc.EditBox);e&&(e.string=this.mCurrentTransPage.toString())}if(this.transFirstPageBtn){var t=this.transFirstPageBtn.getComponent(cc.Button),n=this.mCurrentTransPage<=1;t&&(t.interactable=!n),this.transFirstPageBtn.opacity=n?128:255}if(this.transLastPageBtn){var a=this.transLastPageBtn.getComponent(cc.Button),r=this.mCurrentTransPage>=this.mTotalTransPages;a&&(a.interactable=!r),this.transLastPageBtn.opacity=r?128:255}if(this.transPreviousPageBtn){var o=this.transPreviousPageBtn.getComponent(cc.Button),i=this.mCurrentTransPage<=1;o&&(o.interactable=!i),this.transPreviousPageBtn.opacity=i?128:255}if(this.transNextPageBtn){var c=this.transNextPageBtn.getComponent(cc.Button),s=this.mCurrentTransPage>=this.mTotalTransPages;c&&(c.interactable=!s),this.transNextPageBtn.opacity=s?128:255}},updateHistoryPaginationUI:function(){if(this.historyTotalPageLabel&&(this.historyTotalPageLabel.getComponent(cc.Label).string=this.mTotalHistoryPages.toString()),this.historyCurrentPageEditBox){var e=this.historyCurrentPageEditBox.getComponent(cc.EditBox);e&&(e.string=this.mCurrentHistoryPage.toString())}if(this.historyFirstPageBtn){var t=this.historyFirstPageBtn.getComponent(cc.Button),n=this.mCurrentHistoryPage<=1;t&&(t.interactable=!n),this.historyFirstPageBtn.opacity=n?128:255}if(this.historyLastPageBtn){var a=this.historyLastPageBtn.getComponent(cc.Button),r=this.mCurrentHistoryPage>=this.mTotalHistoryPages;a&&(a.interactable=!r),this.historyLastPageBtn.opacity=r?128:255}if(this.historyPreviousPageBtn){var o=this.historyPreviousPageBtn.getComponent(cc.Button),i=this.mCurrentHistoryPage<=1;o&&(o.interactable=!i),this.historyPreviousPageBtn.opacity=i?128:255}if(this.historyNextPageBtn){var c=this.historyNextPageBtn.getComponent(cc.Button),s=this.mCurrentHistoryPage>=this.mTotalHistoryPages;c&&(c.interactable=!s),this.historyNextPageBtn.opacity=s?128:255}},localizeUI:function(){this.mWarningLabel.getComponent(cc.Label).string="*"+n.default.formatString(n.default.getLocalizedString(this.i18nJson,"cardLimit"),this.mMaxCard),this.myBetRecordTypeSelect.getChildByName("lblType").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"all"),this.myBetRecordTypeTimeSelect.getChildByName("lblTime").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allTime"),this.myBetRecordTypeTimeLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"trxTime"),this.myAccDetailTypeSelect.getChildByName("lblType").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allType"),this.myAccDetailTypeTimeSelect.getChildByName("lblTime").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allTime"),this.myAccDetailTypeTimeLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"trxTime"),this.myHistoryTrxSelect.getChildByName("lblTrxDate").getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"allTime"),this.mPersonalCenterLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title"),this.mNoBankLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"noBank"),this.mAddAccLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"addAcc"),this.mUserInfoTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"userInfo"),this.mBetRecordTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"betRecord"),this.mAccDetailsTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accDetails"),this.mBankWalletTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"bankCardOrEWallet"),this.mHistoryTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"history"),this.mLevelPriviledgedLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"lvlPriviledge"),this.mCurrentMemberLabel.getComponent(cc.Label).string=n.default.formatString(n.default.getLocalizedString(this.i18nJson,"currentMember"),"New Player","2026-02-02)"),this.mBasicInfoLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"basicInfo"),this.mAccountLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"account"),this.mUsernameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"username"),this.mEmailLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"email"),this.mMobileNumberLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"mobileNumber"),this.mGenderLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"gender"),this.mBirthdayLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"birthday"),this.mVIPLevelLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"VIPLevels"),this.mVerifyLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"verify"),this.mRecordConStartDateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"startDate"),this.mRecordConEndDateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"endDate"),this.mRecordConPlatformLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"gamingPlatform"),this.mTrxConStartDateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"startDate"),this.mTrxConEndDateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"endDate"),this.mTrxConDateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"date"),this.mTrxConDescLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"description"),this.mTrxConInLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"in"),this.mTrxConOutLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"out"),this.mTrxConBalanceLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"balance"),this.mDescLabel.getComponent(cc.RichText).string=n.default.getLocalizedString(this.i18nJson,"desc2"),this.mClickHereLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"clickHere"),this.mSetupLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"setup"),this.mBankWalletLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"bankOrWallet"),this.mAccNameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accName"),this.mAccNumberLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"accNumber"),this.mRecordConTypeLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"type"),this.mRecordConAllLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"all"),this.mRecordConPlaceBetLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"placeBet"),this.mRecordConWinLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"win"),this.mRecordConBuyInLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"buyIn"),this.mRecordConPayoutLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"payout"),this.mRecordConCancelLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"cancel"),this.mRecordConRollbackLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"rollback"),this.mRecordConRefundLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"refund"),this.mRecordDateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"date"),this.mRecordBetSlipIDLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"betSlip"),this.mRecordGameLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"game"),this.mRecordStakeLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"stake"),this.mRecordResultLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"results"),this.mRecordWinLossLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"winLoss"),this.mValidStakeLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"validStake"),this.mHisDateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"date"),this.mHisTrxIDLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"trxID"),this.mHisBankLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"bank"),this.mHisAmtLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"amount"),this.mHisStatusHeaderLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"status"),this.mHisReasonLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"reason"),this.mNoRecords1Label.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"noRecord"),this.mNoRecords2Label.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"noRecord"),this.mNoRecords3Label.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"noRecord"),this.walletGoLbl.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"go"),this.transGoLbl&&(this.transGoLbl.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"go")),this.historyGoLbl&&(this.historyGoLbl.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"go")),this.myHistoryTrxTimeLbl.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"trxTime"),this.myHistoryStatusLbl.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"status"),"History"==this.mCurrentFocusTab&&this.mHistoryFocusTab&&this.refreshHistoryStatusDropdown()},refreshHistoryStatusDropdown:function(){if(this.myHisStatSelect){var e=n.default.getLocalizedString(this.i18nJson,"all")||"All";this.myHisStatSelect.getChildByName("lblStatus").getComponent(cc.Label).string=e}if(this.createdHistoryDDLSelect&&this.createdHistoryDDLSelect.length>0)for(var t=0;t<this.createdHistoryDDLSelect.length;t++){var a=this.createdHistoryDDLSelect[t];if(a&&a.isValid&&a.status){var r=a.status,o=n.default.getLocalizedString(this.i18nJson,r.toLowerCase())||r;a.myLabel&&(a.myLabel.getComponent(cc.Label).string=o)}}if(this.mHistorySelectedStatus&&this.myHisStatSelect){var i=n.default.getLocalizedString(this.i18nJson,this.mHistorySelectedStatus.toLowerCase())||this.mHistorySelectedStatus;"All"!=this.mHistorySelectedStatus&&(this.myHisStatSelect.getChildByName("lblStatus").getComponent(cc.Label).string=i)}},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myEditInfoView&&this.myEditInfoView.init(0,0,e.width,e.height),this.myVIPLevelView&&this.myVIPLevelView.init(0,0,e.width,e.height),this.myChangeAvatarView&&this.myChangeAvatarView.init(0,0,e.width,e.height),this.myVerificationView&&this.myVerificationView.init(0,0,e.width,e.height)}}),cc._RF.pop()},{"../Services/TransactionService":"TransactionService","../Services/UserService":"UserService","../Services/WalletService":"WalletService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],Rebate:[function(e,t){"use strict";cc._RF.push(t,"f67e6yAlOJAUKIOqx9/jSg4","Rebate");var n=o(e("SharedFunction")),a=o(e("SharedData")),r=o(e("../Services/UserService"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}cc.Class({extends:cc.Component,properties:{mCallBack:null,calendarPicker:null,calenderTarget:null,mCurrentFocusTab:"MyRebate",mPayoutFocusTab:"",mPayoutTabList:[],createdUnselectedTab:[],createdTrxRows:[],myMyRebateTabBtn:{default:null,type:cc.Node},myPayoutTabBtn:{default:null,type:cc.Node},myTransactionTabBtn:{default:null,type:cc.Node},myRebateTableTabBtn:{default:null,type:cc.Node},myPlayerNameLabel:{default:null,type:cc.Node},myBalanceBG:{default:null,type:cc.Node},myHalfContainer:{default:null,type:cc.Node},myCutContainer:{default:null,type:cc.Node},myFullContainer:{default:null,type:cc.Node},myPayoutContainer:{default:null,type:cc.Node},myRebateTableContainer:{default:null,type:cc.Node},myTrxTypeSelect:{default:null,type:cc.Node},myTrxTypeDDL:{default:null,type:cc.Node},myCutConScrollView:{default:null,type:cc.Node},myCutConScrollContent:{default:null,type:cc.Node},myTrxScrollView:{default:null,type:cc.Node},myTrxScrollContent:{default:null,type:cc.Node},mFocusTabImg:{default:null,type:cc.SpriteFrame},mNormalTabImg:{default:null,type:cc.SpriteFrame},myHeaderProfileImg:{default:null,type:cc.Sprite},myPayoutStartDateTxt:{default:null,type:cc.Node},myPayoutEndDateTxt:{default:null,type:cc.Node},myTrxStartDateTxt:{default:null,type:cc.Node},myTrxEndDateTxt:{default:null,type:cc.Node},myUnselectedTabPrefab:{default:null,type:cc.Prefab},mTrxRowPrefab:{default:null,type:cc.Prefab},i18nJson:{default:null,type:cc.JsonAsset},mRebateLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI();var e=this;cc.resources.load("prefabs/calendar/CalendarPicker",cc.Prefab,function(t,n){t?console.error("Failed to load prefab:",t):(null==e.calendarPicker&&(e.calendarPicker=cc.instantiate(n),e.updatePrefabSize()),e.node.addChild(e.calendarPicker.getComponent("CalendarManager").node),e.calendarPicker.on("date-selected",e.onDateSelected,e),e.calendarPicker.on("date-cancel",e.onDateCancel,e))})},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a},updateView:function(e){var t=this;this.localizeUI(),this.mCallBack=e,this.mCurrentFocusTab="MyRebate";var r=a.default.getUserObject();this.myPlayerNameLabel.getComponent(cc.Label).string=r.fullName,this.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(r.balance,2),a.default.getSelectedAvatar()==localStorage.getItem("selected_avatar")&&cc.loader.loadRes("images/profile/Avatar"+a.default.getSelectedAvatar()+".png",cc.SpriteFrame,function(e,n){t.myHeaderProfileImg.getComponent(cc.Sprite).spriteFrame=n}),this.mPayoutTabList=a.default.getGameCategories(),this.onRebateTabDidPressed("","MyRebate",!0),null!=this.calendarPicker&&(this.calendarPicker.getComponent("CalendarManager").hide(),this.calendarPicker.on("date-selected",this.onDateSelected,this),this.calendarPicker.on("date-cancel",this.onDateCancel,this));var o=this.node.getComponent(cc.Widget);o.left=this.node.width,o.right=-1*this.node.width,cc.tween(o).to(1/6,{left:0,right:0}).start()},setCallBack:function(e){this.mCallBack=e},openCalendar:function(e,t){this.calenderTarget=t;var n="";"payoutStartDate"==t?n=this.myPayoutStartDateTxt.getComponent(cc.Label).string:"payoutEndDate"==t?n=this.myPayoutEndDateTxt.getComponent(cc.Label).string:"trxStartDate"==t?n=this.myTrxStartDateTxt.getComponent(cc.Label).string:"trxEndDate"==t&&(n=this.myTrxEndDateTxt.getComponent(cc.Label).string);var a=n.split("-"),r=this.calendarPicker.getComponent("CalendarManager");console.log(a),3==a.length?r.show(new Date(a[0],a[1]-1,a[2])):r.show()},onDateSelected:function(e){var t=e.detail,n=t.year+"-"+t.month+"-"+t.day;"payoutStartDate"==this.calenderTarget?this.myPayoutStartDateTxt.getComponent(cc.Label).string=n:"payoutEndDate"==this.calenderTarget?this.myPayoutEndDateTxt.getComponent(cc.Label).string=n:"trxStartDate"==this.calenderTarget?this.myTrxStartDateTxt.getComponent(cc.Label).string=n:"trxEndDate"==this.calenderTarget&&(this.myTrxEndDateTxt.getComponent(cc.Label).string=n),this.calendarPicker.getComponent("CalendarManager").hide()},onDateCancel:function(){cc.log("Calendar cancelled")},myBackButtonDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=this.node.getComponent(cc.Widget);cc.tween(r).to(1/6,{left:this.node.width,right:-1*this.node.width}).start(),this.mCallBack&&this.mCallBack.onRebateBackButtonDidPressed()},onRebateTabDidPressed:function(e,t,a){if(a||n.default.playButtonClickSound(),this.myMyRebateTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myPayoutTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myTransactionTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myRebateTableTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myMyRebateTabBtn.getChildByName("lblMyRebate").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myMyRebateTabBtn.getChildByName("lblMyRebate").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myPayoutTabBtn.getChildByName("lblPayout").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myPayoutTabBtn.getChildByName("lblPayout").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myTransactionTabBtn.getChildByName("lblTransaction").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myTransactionTabBtn.getChildByName("lblTransaction").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myRebateTableTabBtn.getChildByName("lblRebateTable").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myRebateTableTabBtn.getChildByName("lblRebateTable").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myHalfContainer.active=!1,this.myCutContainer.active=!1,this.myPayoutContainer.active=!1,this.myRebateTableContainer.active=!1,this.myFullContainer.active=!1,this.mCurrentFocusTab!=t&&(this.createdUnselectedTab.forEach(function(e){e&&e.isValid&&(e.unselect(),e.node.removeFromParent())}),this.createdUnselectedTab=[]),"Payout"==t||"RebateTable"==t){var r=this.mPayoutTabList;for(var o in r){var i=60+128*parseInt(o),c=new cc.instantiate(this.myUnselectedTabPrefab).getComponent("UnselectedTab");c.init(i,-22,r[o].name,t,this),this.myCutConScrollContent.addChild(c.node),this.createdUnselectedTab.push(c)}this.myCutConScrollContent.width=120+128*(r.length-1),this.myCutConScrollView.getComponent(cc.ScrollView).scrollToLeft(0)}"MyRebate"==t?(this.myMyRebateTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myMyRebateTabBtn.getChildByName("lblMyRebate").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myMyRebateTabBtn.getChildByName("lblMyRebate").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myHalfContainer.active=!0):"Payout"==t?(this.myPayoutTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myPayoutTabBtn.getChildByName("lblPayout").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myPayoutTabBtn.getChildByName("lblPayout").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myCutContainer.active=!0,this.myPayoutContainer.active=!0):"Transaction"==t?(this.myTransactionTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myTransactionTabBtn.getChildByName("lblTransaction").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myTransactionTabBtn.getChildByName("lblTransaction").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myFullContainer.active=!0):"RebateTable"==t&&(this.myRebateTableTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myRebateTableTabBtn.getChildByName("lblRebateTable").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myRebateTableTabBtn.getChildByName("lblRebateTable").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myCutContainer.active=!0,this.myRebateTableContainer.active=!0),this.mCurrentFocusTab=t},onTabDidPressed:function(e){this.mPayoutFocusTab=e,this.createdUnselectedTab.forEach(function(e){e&&e.isValid&&e.unselect()})},onDDLDidPressed:function(e,t,a){if(a||n.default.playButtonClickSound(),"trxType"==t){var r=this.myTrxTypeSelect.getChildByName("iconTriangle");this.myTrxTypeDDL.active?r.angle=90:r.angle=-90,this.myTrxTypeDDL.active=!this.myTrxTypeDDL.active}},onDDLOptionDidPressed:function(e,t,a){a||n.default.playButtonClickSound();var r=e.target.parent.name,o=e.target.getChildByName("label").getComponent(cc.Label).string;if("ddl_type_bg"==r){var i=this.myTrxTypeSelect,c=this.myTrxTypeDDL,s="lblType";"ddl_type_bg"==r&&(i=this.myTrxTypeSelect,c=this.myTrxTypeDDL,s="lblType",this.mAccDetailSelectedType=t),i.getChildByName(s).getComponent(cc.Label).string=o,i.getChildByName("iconTriangle").angle=90,c.active=!1}},showNotification:function(e){var t=this;this.mNotificationLabel.getComponent(cc.Label).string=e,cc.Tween.stopAllByTarget(this.myNotificationBG),this.myNotificationBG.active=!0,this.myNotificationBG.opacity=0,cc.tween(this.myNotificationBG).to(1/3,{opacity:255}).delay(2).to(1/3,{opacity:0}).call(function(){t.myNotificationBG.active=!1}).start()},callGetBalanceApi:function(){var e,t=this;return(e=i().mark(function e(){var o,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.default.showLoadingView("Loading",t),e.prev=1,e.next=4,r.default.getBalance(localStorage.getItem("token"));case 4:if(o=e.sent,!n.default.isSessionExpired(o)){e.next=8;break}return n.default.handleSessionExpiration(o,t),e.abrupt("return");case 8:if(!n.default.isServerError(o)){e.next=11;break}return n.default.handleServerError(o,t),e.abrupt("return");case 11:200==o.status&&(console.log(o),(c=a.default.getUserObject()).balance=o.data.balance,a.default.setUserObject(c),t.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(c.balance,2),t.mCallBack.myBalanceBG.getChildByName("lblBalance").getComponent(cc.Label).string=n.default.showNumberWithDecimalAndComma(c.balance,2),n.default.hideLoadingView(t)),e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(1),!n.default.handleSessionExpiration(e.t0,t)){e.next=18;break}return e.abrupt("return");case 18:if(!n.default.handleServerError(e.t0,t)){e.next=21;break}return n.default.hideLoadingView(t),e.abrupt("return");case 21:n.default.hideLoadingView(t);case 22:case"end":return e.stop()}},e,null,[[1,14]])}),function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){c(o,a,r,i,s,"next",e)}function s(e){c(o,a,r,i,s,"throw",e)}i(void 0)})})()},localizeUI:function(){this.mRebateLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"rebate")},updatePrefabSize:function(){cc.view.getVisibleSize()}}),cc._RF.pop()},{"../Services/UserService":"UserService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],Registration:[function(e,t){"use strict";cc._RF.push(t,"932cfVmHUdKuYaszcQGcfBS","Registration");var n=o(e("SharedData")),a=o(e("SharedFunction")),r=o(e("../Services/AuthServices"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}cc.Class({extends:cc.Component,properties:{mCallBack:null,showEmailInput:!0,myVerificationView:null,mBackground:{default:null,type:cc.Node},myScrollView:{default:null,type:cc.Node},mUsernameInput:{default:null,type:cc.Node},mFullNameInput:{default:null,type:cc.Node},mEmailInput:{default:null,type:cc.Node},mMobileNoPrefixLabel:{default:null,type:cc.Node},mMobileNoInput:{default:null,type:cc.Node},mPasswordInput:{default:null,type:cc.Node},mConfirmPassInput:{default:null,type:cc.Node},mReferalCodeInput:{default:null,type:cc.Node},myError1Label:{default:null,type:cc.Node},myError2Label:{default:null,type:cc.Node},myError3Label:{default:null,type:cc.Node},myError4Label:{default:null,type:cc.Node},myError5Label:{default:null,type:cc.Node},myError6Label:{default:null,type:cc.Node},myError7Label:{default:null,type:cc.Node},myShowPassBtn:{default:null,type:cc.Node},myShowConPassBtn:{default:null,type:cc.Node},mSelectedTabIndex:0,mUserIdLabel:{default:null,type:cc.Node},mBackgroundAnimation:{default:null,type:cc.Node},mContainer:{default:null,type:cc.Node},mPhoneButton:{default:null,type:cc.Node},mSMSButton:{default:null,type:cc.Node},mWhatsappButton:{default:null,type:cc.Node},mPhoneNumberLabel:{default:null,type:cc.Node},mCodeInput:{default:null,type:cc.Node},mIsRequestedTac:!1,mRequestTacButton:{default:null,type:cc.Node},mCountDownTimer:{default:6,type:cc.Float},mNewPasswordInput:{default:null,type:cc.EditBox},mConfirmPasswordInput:{default:null,type:cc.EditBox},mRewardLabel:{default:null,type:cc.Node},mOneLabel:{default:null,type:cc.Node},mInviteLabel:{default:null,type:cc.Node},mVoiceLabel:{default:null,type:cc.Node},mPhoneNoLabel:{default:null,type:cc.Node},mPhoneNoHolderLabel:{default:null,type:cc.Node},mPhoneNoHintLabel:{default:null,type:cc.Node},mCodeLabel:{default:null,type:cc.Node},mCodeHolderLabel:{default:null,type:cc.Node},mSendLabel:{default:null,type:cc.Node},mContinueLabel:{default:null,type:cc.Node},mNewPassLabel:{default:null,type:cc.Node},mNewPassHolderLabel:{default:null,type:cc.Node},mConPassLabel:{default:null,type:cc.Node},mConPassHolderLabel:{default:null,type:cc.Node},mPhoneCodeLabel:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mUsernameLabel:{default:null,type:cc.Node},mFullNameLabel:{default:null,type:cc.Node},mEmailLabel:{default:null,type:cc.Node},mMobileNoLabel:{default:null,type:cc.Node},mPasswordLabel:{default:null,type:cc.Node},mConfirmPassLabel:{default:null,type:cc.Node},mReferalCodeLabel:{default:null,type:cc.Node},mRegisterLabel:{default:null,type:cc.Node},mHvAccountLabel:{default:null,type:cc.Node},mLoginHereLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},updateView:function(e){this.localizeUI(),this.mCallBack=e,this.mBackground.active=!0,this.myError1Label.active=!1,this.myError2Label.active=!1,this.myError3Label.active=!1,this.myError4Label.active=!1,this.myError5Label.active=!1,this.myError6Label.active=!1,this.myError7Label.active=!1,this.node.opacity=255,this.mMobileNoPrefixLabel.getComponent(cc.Label).string=n.default.getPhoneCode(),this.showEmailInput?(this.mEmailLabel.active=!0,this.mEmailInput.parent.active=!0,this.mPasswordLabel.y=-562,this.mConfirmPassLabel.y=-689,this.mReferalCodeLabel.y=-813,this.mPasswordInput.parent.y=-565,this.mConfirmPassInput.parent.y=-689,this.mReferalCodeInput.parent.y=-813,this.myError5Label.y=-627,this.myError6Label.y=-751,this.myError7Label.y=-875,this.mRegisterLabel.parent.y=-937,this.mHvAccountLabel.y=-1008.824,this.mLoginHereLabel.y=-1007.108,this.myScrollView.getChildByName("view").getChildByName("content").height=1034):(this.mEmailLabel.active=!1,this.mEmailInput.parent.active=!1,this.myError4Label.active=!1,this.mPasswordLabel.y=-438,this.mConfirmPassLabel.y=-562,this.mReferalCodeLabel.y=-689,this.mPasswordInput.parent.y=-441,this.mConfirmPassInput.parent.y=-565,this.mReferalCodeInput.parent.y=-689,this.myError5Label.y=-503,this.myError6Label.y=-627,this.myError7Label.y=-751,this.mRegisterLabel.parent.y=-813,this.mHvAccountLabel.y=-884.824,this.mLoginHereLabel.y=-883.108,this.myScrollView.getChildByName("view").getChildByName("content").height=910);var t=this.mBackground.getChildByName("registration_bg");t.setScale(0),cc.tween(t).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},setCallBack:function(e,t){void 0===t&&(t="LOBBY"),this.mCallBack=e,this.isFrom=t},onTogglePassBtnDidPress:function(e,t){a.default.playButtonClickSound();var n=this.myShowPassBtn,r=this.mPasswordInput;"ConfirmPassword"==t&&(n=this.myShowConPassBtn,r=this.mConfirmPassInput),r.getComponent(cc.EditBox).string;var o=r.getComponent(cc.EditBox).inputFlag;o==cc.EditBox.InputFlag.PASSWORD||null==o?(cc.loader.loadRes("images/login/iconShow.png",cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),r.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.DEFAULT):(cc.loader.loadRes("images/login/iconHide.png",cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),r.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.PASSWORD)},myCloseButtonDidPressed:function(e,t,n,r){var o=this;n||a.default.playButtonClickSound();var i=this.mBackground.getChildByName("registration_bg");cc.tween(i).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){o.mCallBack&&o.mCallBack.onRegisterCloseButtonDidPressed(r)}).start()},onRegisterButtonDidPressed:function(){a.default.playButtonClickSound();var e=this.mUsernameInput.getComponent(cc.EditBox).string,t=this.mFullNameInput.getComponent(cc.EditBox).string,r=this.mMobileNoInput.getComponent(cc.EditBox).string,o=this.mEmailInput.getComponent(cc.EditBox).string,i=this.mPasswordInput.getComponent(cc.EditBox).string,c=this.mConfirmPassInput.getComponent(cc.EditBox).string,s=this.mReferalCodeInput.getComponent(cc.EditBox).string;if(0!=e.length)if(0!=t.length)if(0!=r.length){if(this.showEmailInput){if(0==o.length)return void this.showLableError(this.myError4Label,a.default.getLocalizedString(this.i18nJson,"emailHolder"));if(!a.default.EmailCheck(o))return void this.showLableError(this.myError4Label,a.default.getLocalizedString(this.i18nJson,"invalidEamil"))}if(0!=i.length)if(a.default.RangeCheck(i))if(0!=c.length)if(a.default.RangeCheck(c))if(i==c){localStorage.setItem("unverified_username",e),localStorage.setItem("unverified_fullName",t),localStorage.setItem("unverified_phoneNum",r),localStorage.setItem("unverified_password",i),localStorage.setItem("unverified_referal",s),localStorage.setItem("unverified_email",o);var l=JSON.parse(localStorage.getItem("from_index")).settings.verification;l.phoneVerification.enabled&&"onRegister"==l.phoneVerification.required?this.showVerificationPage("phoneVerify"):l.emailVerification.enabled&&"onRegister"==l.emailVerification.required?this.showVerificationPage("emailVerify"):this.callRegisterApi(e,t,n.default.getPhoneCode()+r,i,s,o)}else this.showLableError(this.myError6Label,a.default.getLocalizedString(this.i18nJson,"invalidBothPassword"));else this.showLableError(this.myError6Label,a.default.getLocalizedString(this.i18nJson,"invalidConfirmPassword"));else this.showLableError(this.myError6Label,a.default.getLocalizedString(this.i18nJson,"confirmPasswordHolder"));else this.showLableError(this.myError5Label,a.default.getLocalizedString(this.i18nJson,"invalidPassword"));else this.showLableError(this.myError5Label,a.default.getLocalizedString(this.i18nJson,"passwordHolder"))}else this.showLableError(this.myError3Label,a.default.getLocalizedString(this.i18nJson,"mobileNoHolder"));else this.showLableError(this.myError2Label,a.default.getLocalizedString(this.i18nJson,"fullNameHolder"));else this.showLableError(this.myError1Label,a.default.getLocalizedString(this.i18nJson,"usernameHolder"))},callRegisterApi:function(e,t,n,o,s,l){var u,d=this;return(u=i().mark(function c(){var u;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,r.default.register({fullName:t,username:e,email:l,password:o,phone:n,referralCode:s});case 3:u=i.sent,console.log(u),201==u.status?(localStorage.setItem("verified_username",e),localStorage.setItem("verified_password",o),localStorage.setItem("token",u.token),d.myCloseButtonDidPressed("","",!0,"lobby")):d.showLableError(d.myError7Label,u.message),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),d.showLableError(d.myError7Label,i.t0.message),a.default.hideLoadingView(d);case 12:case"end":return i.stop()}},c,null,[[0,8]])}),function(){var e=this,t=arguments;return new Promise(function(n,a){var r=u.apply(e,t);function o(e){c(r,n,a,o,i,"next",e)}function i(e){c(r,n,a,o,i,"throw",e)}o(void 0)})})()},showVerificationPage:function(e){var t=this;a.default.showLoadingView("",t),cc.resources.load("prefabs/verification/verification",cc.Prefab,function(n,r){if(n)return console.error("Failed to load prefab:",n),void a.default.hideLoadingView(t);null==t.myVerificationView&&(t.myVerificationView=cc.instantiate(r).getComponent("Verification"),t.updatePrefabSize()),a.default.hideLoadingView(t),t.myVerificationView.updateView(t,e,"Register",""),t.node.addChild(t.myVerificationView.node),t.mBackground.active=!1})},showLableError:function(e,t){this.myError1Label.active=!1,this.myError2Label.active=!1,this.myError3Label.active=!1,this.myError4Label.active=!1,this.myError5Label.active=!1,this.myError6Label.active=!1,this.myError7Label.active=!1,e&&(this.myScrollView.getComponent(cc.ScrollView).scrollToOffset(cc.v2(0,-1*e.y-131),.1,!1),e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},onVerificationCloseButtonDidPressed:function(e,t){this.node.removeChild(this.myVerificationView.node),"emailVerify"!=e?"registerPage"==e?(this.showLableError(this.myError7Label,t),this.mBackground.active=!0):this.mCallBack.onRegisterCloseButtonDidPressed(e):this.showVerificationPage("emailVerify")},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"title"),this.mUsernameLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"username"),this.mFullNameLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"fullname"),this.mEmailLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"email"),this.mMobileNoLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"mobileno"),this.mPasswordLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"password"),this.mConfirmPassLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"confirmPassword"),this.mReferalCodeLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"referalcode"),this.mRegisterLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"register"),this.mHvAccountLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"hvAccount"),this.mLoginHereLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"loginhere")},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myVerificationView&&this.myVerificationView.init(0,0,e.width,e.height)}}),cc._RF.pop()},{"../Services/AuthServices":"AuthServices",SharedData:"SharedData",SharedFunction:"SharedFunction"}],ResetPassword:[function(e,t){"use strict";cc._RF.push(t,"43be0+hhopIQqJqZFWkh6X8","ResetPassword");var n=r(e("SharedFunction")),a=(r(e("SharedData")),r(e("../Services/AuthServices")));function r(e){return e&&e.__esModule?e:{default:e}}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}cc.Class({extends:cc.Component,properties:{mCallBack:null,mBackground:{default:null,type:cc.Node},myErrorLabel:{default:null,type:cc.Node},myError2Label:{default:null,type:cc.Node},mPasswordInput:{default:null,type:cc.Node},mConfirmPasswordInput:{default:null,type:cc.Node},mPasswordLabel:{default:null,type:cc.Node},mPasswordHolderLabel:{default:null,type:cc.Node},mConfirmPasswordLabel:{default:null,type:cc.Node},mConfirmPasswordHolderLabel:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node},mTitleLabel:{default:null,type:cc.Node},mDescLabel:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},myShowPassBtn:{default:null,type:cc.Node},myConfirmShowPassBtn:{default:null,type:cc.Node},mUsername:"",mOtp:"",mPasswordResetType:"sms"},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},setCallBack:function(e,t){void 0===t&&(t="LOBBY"),this.mCallBack=e,this.isFrom=t},updateView:function(e,t,n,a){void 0===a&&(a="reset"),this.localizeUI(),this.mCallBack=e,this.mUsername=t,this.mOtp=n||localStorage.getItem("reset_password_otp")||"",this.mPasswordResetType=a,this.mBackground.active=!0,this.myErrorLabel&&(this.myErrorLabel.active=!1),this.myError2Label&&(this.myError2Label.active=!1),this.node.opacity=255,this.mPasswordInput&&(this.mPasswordInput.getComponent(cc.EditBox).string=""),this.mConfirmPasswordInput&&(this.mConfirmPasswordInput.getComponent(cc.EditBox).string="");var r=this.mBackground.getChildByName("resetpassword_bg");r&&(r.setScale(0),cc.tween(r).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start())},myCloseButtonDidPressed:function(){var e=this;n.default.playButtonClickSound();var t=this.mBackground.getChildByName("resetpassword_bg");t&&cc.tween(t).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){e.mCallBack&&e.mCallBack.onResetPasswordViewCloseButtonDidPressed()}).start()},onSubmitButtonDidPressed:function(){var e,t=this;return(e=o().mark(function e(){var r,i,c,s,l,u;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.default.playButtonClickSound(),r=t.mPasswordInput.getComponent(cc.EditBox).string,i=t.mConfirmPasswordInput.getComponent(cc.EditBox).string,0!=r.length){e.next=6;break}return t.showLableError(t.myErrorLabel,n.default.getLocalizedString(t.i18nJson,"newPasswordHolder")),e.abrupt("return");case 6:if(0!=i.length){e.next=9;break}return t.showLableError(t.myError2Label||t.myErrorLabel,n.default.getLocalizedString(t.i18nJson,"confirmPasswordHolder")),e.abrupt("return");case 9:if(r==i){e.next=12;break}return t.showLableError(t.myError2Label||t.myErrorLabel,n.default.getLocalizedString(t.i18nJson,"invalidBothPassword")),e.abrupt("return");case 12:return n.default.showLoadingView("",t),e.prev=13,c={username:t.mUsername,otp:t.mOtp,newPassword:r,type:t.mPasswordResetType},e.next=17,a.default.resetPassword(c);case 17:200==(s=e.sent).status||s.success?(s.message||n.default.getLocalizedString(t.i18nJson,"resetSuccess"),t.mPasswordInput.getComponent(cc.EditBox).string="",t.mConfirmPasswordInput.getComponent(cc.EditBox).string="",n.default.showAlertView(s.message||n.default.getLocalizedString(t.i18nJson,"resetSuccess"),t,function(){t.mCallBack&&t.mCallBack.onResetPasswordViewCloseButtonDidPressed()})):(l=s.message||n.default.getLocalizedString(t.i18nJson,"resetSuccess"),t.showLableError(t.myError2Label||t.myErrorLabel,n.default.getLocalizedString(t.i18nJson,l))),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),u=e.t0.message||n.default.getLocalizedString(t.i18nJson,"resetFailed"),t.showLableError(t.myError2Label||t.myErrorLabel,n.default.getLocalizedString(t.i18nJson,u));case 25:n.default.hideLoadingView(t);case 26:case"end":return e.stop()}},e,null,[[13,21]])}),function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function c(e){i(o,a,r,c,s,"next",e)}function s(e){i(o,a,r,c,s,"throw",e)}c(void 0)})})()},onTogglePassBtnDidPress:function(){n.default.playButtonClickSound();var e=this.myShowPassBtn,t=this.myConfirmShowPassBtn,a=this.mPasswordInput,r=this.mConfirmPasswordInput,o=(a.getComponent(cc.EditBox).string,a.getComponent(cc.EditBox).inputFlag);o==cc.EditBox.InputFlag.PASSWORD||null==o?(cc.loader.loadRes("images/login/iconShow.png",cc.SpriteFrame,function(n,a){e.getComponent(cc.Sprite).spriteFrame=a,t.getComponent(cc.Sprite).spriteFrame=a}),a.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.DEFAULT,r.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.DEFAULT):(cc.loader.loadRes("images/login/iconHide.png",cc.SpriteFrame,function(n,a){e.getComponent(cc.Sprite).spriteFrame=a,t.getComponent(cc.Sprite).spriteFrame=a}),a.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.PASSWORD,r.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.PASSWORD)},showLableError:function(e,t){this.myErrorLabel&&(this.myErrorLabel.active=!1),this.myError2Label&&(this.myError2Label.active=!1),e&&(e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},localizeUI:function(){this.mTitleLabel&&(this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title")||"Reset Password"),this.mDescLabel&&(this.mDescLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"description")||"Please enter your new password below."),this.mPasswordLabel&&(this.mPasswordLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"password")||"Password"),this.mConfirmPasswordLabel&&(this.mConfirmPasswordLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirmPassword")||"Confirm Password"),this.mConfirmLabel&&(this.mConfirmLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirm")||"Confirm"),this.mPasswordHolderLabel&&(this.mPasswordHolderLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"newPasswordHolder")||"Enter New Password"),this.mConfirmPasswordHolderLabel&&(this.mConfirmPasswordHolderLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirmPasswordHolder")||"Enter Confirm Password")},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.mBackground&&(this.mBackground.width=e.width,this.mBackground.height=e.height)}}),cc._RF.pop()},{"../Services/AuthServices":"AuthServices",SharedData:"SharedData",SharedFunction:"SharedFunction"}],Settings:[function(e,t){"use strict";cc._RF.push(t,"88701VNBb1MI4ehKc6MODZ0","Settings");var n=o(e("SharedFunction")),a=o(e("SharedData")),r=o(e("../Services/UserService"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){c(o,a,r,i,s,"next",e)}function s(e){c(o,a,r,i,s,"throw",e)}i(void 0)})}}cc.Class({extends:cc.Component,properties:{mCallBack:null,mCurrentFocusTab:"Sound",mAuthenticatorStatus:!1,mBackground:{default:null,type:cc.Node},myScrollView:{default:null,type:cc.Node},mySoundTabBtn:{default:null,type:cc.Node},myChangePassTabBtn:{default:null,type:cc.Node},my2FaTabBtn:{default:null,type:cc.Node},myVersionTabBtn:{default:null,type:cc.Node},myLogoutTabBtn:{default:null,type:cc.Node},myMusicBtn:{default:null,type:cc.Node},myMuteBtn:{default:null,type:cc.Node},mySoundBtn:{default:null,type:cc.Node},myShowCurrPassBtn:{default:null,type:cc.Node},myShowNewPassBtn:{default:null,type:cc.Node},myShowConPassBtn:{default:null,type:cc.Node},myCurrPassInput:{default:null,type:cc.Node},myNewPassInput:{default:null,type:cc.Node},myConPassInput:{default:null,type:cc.Node},myMainContainer:{default:null,type:cc.Node},myLogoutContainer:{default:null,type:cc.Node},mySoundContainer:{default:null,type:cc.Node},myChangePassContainer:{default:null,type:cc.Node},my2FaContainer:{default:null,type:cc.Node},my2FaAuthenticatorView:{default:null,type:cc.Node},my2FaAuthenticatorRegisterView:{default:null,type:cc.Node},myVersionContainer:{default:null,type:cc.Node},mFocusTabImg:{default:null,type:cc.SpriteFrame},mNormalTabImg:{default:null,type:cc.SpriteFrame},mOnSwitchImg:{default:null,type:cc.SpriteFrame},mOffSwitchImg:{default:null,type:cc.SpriteFrame},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mSoundTabLabel:{default:null,type:cc.Node},mChangePassTabLabel:{default:null,type:cc.Node},m2FaTabLabel:{default:null,type:cc.Node},mVersionTabLabel:{default:null,type:cc.Node},mLogoutTabLabel:{default:null,type:cc.Node},mMusicLabel:{default:null,type:cc.Node},mMuteLabel:{default:null,type:cc.Node},mSoundLabel:{default:null,type:cc.Node},mMusicSwitchLabel:{default:null,type:cc.Node},mMuteSwitchLabel:{default:null,type:cc.Node},mSoundSwitchLabel:{default:null,type:cc.Node},mCurrentPassLabel:{default:null,type:cc.Node},mNewPassLabel:{default:null,type:cc.Node},mConfirmPassLabel:{default:null,type:cc.Node},myError1Label:{default:null,type:cc.Node},myError2Label:{default:null,type:cc.Node},myError3Label:{default:null,type:cc.Node},mConfirmLabel:{default:null,type:cc.Node},mLogoutLabel:{default:null,type:cc.Node},mDescLabel:{default:null,type:cc.Node},mNoLabel:{default:null,type:cc.Node},mYesLabel:{default:null,type:cc.Node},mAuthenticatorTitleLabel:{default:null,type:cc.Node},mAuthenticatorBtn:{default:null,type:cc.Node},mAuthenticatorLbl:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},updateView:function(e){this.localizeUI(),this.mCallBack=e,this.mCurrentFocusTab="Sound",this.mBackground.active=!0,this.node.opacity=255,this.myLogoutContainer.active=!1,this.myMainContainer.active=!0,this.myError1Label.active=!1,this.myError2Label.active=!1,this.myError3Label.active=!1,this.onSettingsTabDidPressed("","Sound",!0),!a.default.getMuteStatus()&&a.default.getPlayBackgroundMusicSoundStatus()?(this.myMusicBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.myMusicBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.myMusicBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1))):(this.myMusicBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.myMusicBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.myMusicBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1))),!a.default.getMuteStatus()&&a.default.getPlayButtonClickSoundStatus()?(this.mySoundBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.mySoundBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.mySoundBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1))):(this.mySoundBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.mySoundBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.mySoundBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1))),a.default.getMuteStatus()?(this.myMuteBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.myMuteBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.myMuteBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1))):(this.myMuteBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.myMuteBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.myMuteBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1))),this.mAuthenticatorStatus?(this.mAuthenticatorBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.mAuthenticatorBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.mAuthenticatorBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1))):(this.mAuthenticatorBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.mAuthenticatorBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.mAuthenticatorBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1))),n.default.isLoggedIn()?(this.myChangePassTabBtn.active=!0,this.my2FaTabBtn.active=!1,this.myLogoutTabBtn.active=!0):(this.myChangePassTabBtn.active=!1,this.my2FaTabBtn.active=!1,this.myLogoutTabBtn.active=!1),this.myCurrPassInput.getComponent(cc.EditBox).string="",this.myNewPassInput.getComponent(cc.EditBox).string="",this.myConPassInput.getComponent(cc.EditBox).string="";var t=this;cc.loader.loadRes("images/login/iconHide.png",cc.SpriteFrame,function(e,n){t.myShowCurrPassBtn.getComponent(cc.Sprite).spriteFrame=n,t.myShowNewPassBtn.getComponent(cc.Sprite).spriteFrame=n,t.myShowConPassBtn.getComponent(cc.Sprite).spriteFrame=n});var r=this.mBackground.getChildByName("settings_bg");r.setScale(0),cc.tween(r).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setCallBack:function(e){this.mCallBack=e},myCloseButtonDidPressed:function(e,t,a){var r=this;a||n.default.playButtonClickSound();var o=this.mBackground.getChildByName("settings_bg");cc.tween(o).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){r.mCallBack&&r.mCallBack.onSettingsCloseButtonDidPressed()}).start()},onSettingsTabDidPressed:function(e,t,a){a||n.default.playButtonClickSound(),this.mySoundTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myChangePassTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.my2FaTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myVersionTabBtn.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.mySoundTabBtn.getChildByName("lblSound").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.mySoundTabBtn.getChildByName("lblSound").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myChangePassTabBtn.getChildByName("lblChangePassword").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myChangePassTabBtn.getChildByName("lblChangePassword").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.my2FaTabBtn.getChildByName("lblTwoFa").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.my2FaTabBtn.getChildByName("lblTwoFa").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.myVersionTabBtn.getChildByName("lblVersion").getComponent(cc.LabelOutline).color=new cc.color("#014D92"),this.myVersionTabBtn.getChildByName("lblVersion").getComponent(cc.LabelShadow).color=new cc.color("#01277E"),this.mySoundContainer.active=!1,this.myChangePassContainer.active=!1,this.my2FaContainer.active=!1,this.myVersionContainer.active=!1,"Sound"==t?(this.mySoundTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.mySoundTabBtn.getChildByName("lblSound").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.mySoundTabBtn.getChildByName("lblSound").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.mySoundContainer.active=!0):"ChangePassword"==t?(this.myChangePassTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myChangePassTabBtn.getChildByName("lblChangePassword").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myChangePassTabBtn.getChildByName("lblChangePassword").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myChangePassContainer.active=!0):"2Fa"==t?(this.my2FaTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.my2FaTabBtn.getChildByName("lblTwoFa").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.my2FaTabBtn.getChildByName("lblTwoFa").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.my2FaContainer.active=!0):"Version"==t&&(this.myVersionTabBtn.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myVersionTabBtn.getChildByName("lblVersion").getComponent(cc.LabelOutline).color=new cc.color("#7F0794"),this.myVersionTabBtn.getChildByName("lblVersion").getComponent(cc.LabelShadow).color=new cc.color("#6B017E"),this.myVersionContainer.active=!0),this.mCurrentFocusTab=t},onLogoutTabDidPressed:function(){n.default.playButtonClickSound(),this.myMainContainer.active=!1,this.myLogoutContainer.active=!0},onLogoutDecisionDidPressed:function(e,t){n.default.playButtonClickSound(),"No"==t?(this.myLogoutContainer.active=!1,this.myMainContainer.active=!0):(n.default.logout(),cc.director.loadScene("Splash"))},onTogglePassBtnDidPress:function(e,t){n.default.playButtonClickSound();var a=this.myShowCurrPassBtn,r=this.myCurrPassInput;"NewPassword"==t?(a=this.myShowNewPassBtn,r=this.myNewPassInput):"ConfirmPassword"==t&&(a=this.myShowConPassBtn,r=this.myConPassInput);var o=r.getComponent(cc.EditBox).inputFlag;o==cc.EditBox.InputFlag.PASSWORD||null==o?(cc.loader.loadRes("images/login/iconShow.png",cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),r.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.DEFAULT):(cc.loader.loadRes("images/login/iconHide.png",cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),r.getComponent(cc.EditBox).inputFlag=cc.EditBox.InputFlag.PASSWORD)},onToggleSoundSettingDidPress:function(e,t){"Music"==t?a.default.getMuteStatus()||(a.default.getPlayBackgroundMusicSoundStatus()?(n.default.stopLobbyBackgroundMusic(),a.default.setPlayBackgroundMusicSoundStatus(!1),this.myMusicBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.myMusicBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.myMusicBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1))):(a.default.setPlayBackgroundMusicSoundStatus(!0),n.default.playLobbyBackgroundMusic(),this.myMusicBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.myMusicBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.myMusicBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1)))):"Sound"==t?a.default.getMuteStatus()||(a.default.getPlayButtonClickSoundStatus()?(a.default.setPlayButtonClickSoundStatus(!1),this.mySoundBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.mySoundBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.mySoundBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1))):(a.default.setPlayButtonClickSoundStatus(!0),this.mySoundBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.mySoundBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.mySoundBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1)))):"Mute"==t&&(a.default.getMuteStatus()?(a.default.setMuteStatus(!1),this.myMuteBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.myMuteBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.myMuteBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1)),a.default.getPlayBackgroundMusicSoundStatus()&&(n.default.playLobbyBackgroundMusic(),this.myMusicBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.myMusicBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.myMusicBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1))),a.default.getPlayButtonClickSoundStatus()&&(this.mySoundBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.mySoundBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.mySoundBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1)))):(a.default.setMuteStatus(!0),this.myMuteBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.myMuteBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.myMuteBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1)),a.default.getPlayBackgroundMusicSoundStatus()&&(n.default.stopLobbyBackgroundMusic(),this.myMusicBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.myMusicBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.myMusicBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1))),a.default.getPlayButtonClickSoundStatus()&&(this.mySoundBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.mySoundBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.mySoundBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1)))))},onToggleAuthenticatorDidPress:function(e,t){var a=this;n.default.playButtonClickSound(),"Authenticator"==t&&(this.mAuthenticatorStatus?(this.mAuthenticatorStatus=!1,this.mAuthenticatorBtn.getComponent(cc.Sprite).spriteFrame=this.mOffSwitchImg,this.mAuthenticatorBtn.getChildByName("btnSwitch").setPosition(cc.v2(-28,0)),this.mAuthenticatorBtn.getChildByName("lblSwitch").setPosition(cc.v2(19,1)),n.default.showAlertView(n.default.getLocalizedString(this.i18nJson,"authenticatorDisabled"),this,function(){a.mCallBack&&a.mCallBack.onDisableAuthenticatorDidPress()})):(this.mAuthenticatorStatus=!0,this.mAuthenticatorBtn.getComponent(cc.Sprite).spriteFrame=this.mOnSwitchImg,this.mAuthenticatorBtn.getChildByName("btnSwitch").setPosition(cc.v2(28,0)),this.mAuthenticatorBtn.getChildByName("lblSwitch").setPosition(cc.v2(-25,1)))),this.mAuthenticatorLbl.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,this.mAuthenticatorStatus?"on":"off")},onConfirmChangePassBtnDidPress:function(){var e=this;return s(i().mark(function t(){var a,o,c,s,l,u;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.default.playButtonClickSound(),a=e.myCurrPassInput.getComponent(cc.EditBox).string,o=e.myNewPassInput.getComponent(cc.EditBox).string,c=e.myConPassInput.getComponent(cc.EditBox).string,0!=a.length){t.next=7;break}return e.showLableError(e.myError1Label,n.default.getLocalizedString(e.i18nJson,"currentPasswordHolder")),t.abrupt("return");case 7:if(n.default.RangeCheck(a)){t.next=10;break}return e.showLableError(e.myError1Label,n.default.getLocalizedString(e.i18nJson,"invalidCurrentPassword")),t.abrupt("return");case 10:if(0!=o.length){t.next=13;break}return e.showLableError(e.myError2Label,n.default.getLocalizedString(e.i18nJson,"newPasswordHolder")),t.abrupt("return");case 13:if(n.default.RangeCheck(o)){t.next=16;break}return e.showLableError(e.myError2Label,n.default.getLocalizedString(e.i18nJson,"invalidNewPassword")),t.abrupt("return");case 16:if(0!=c.length){t.next=19;break}return e.showLableError(e.myError3Label,n.default.getLocalizedString(e.i18nJson,"confirmPasswordHolder")),t.abrupt("return");case 19:if(n.default.RangeCheck(c)){t.next=22;break}return e.showLableError(e.myError3Label,n.default.getLocalizedString(e.i18nJson,"invalidConfirmPassword")),t.abrupt("return");case 22:if(o==c){t.next=25;break}return e.showLableError(e.myError3Label,n.default.getLocalizedString(e.i18nJson,"invalidBothPassword")),t.abrupt("return");case 25:return t.prev=26,s=localStorage.getItem("token"),l={currentPassword:a,newPassword:o},t.next=31,r.default.changePassword(s,l);case 31:if(u=t.sent,!n.default.isSessionExpired(u)){t.next=35;break}return n.default.handleSessionExpiration(u,e),t.abrupt("return");case 35:if(!n.default.isServerError(u)){t.next=38;break}return n.default.handleServerError(u,e),t.abrupt("return");case 38:console.log(u),Object.keys(u).length>0&&(200==u.status&&(localStorage.setItem("verified_password",o),e.myCurrPassInput.getComponent(cc.EditBox).string="",e.myNewPassInput.getComponent(cc.EditBox).string="",e.myConPassInput.getComponent(cc.EditBox).string="",e.myError1Label.active=!1,e.myError2Label.active=!1,e.myError3Label.active=!1),e.showLableError(e.myError3Label,u.message)),t.next=51;break;case 42:if(t.prev=42,t.t0=t.catch(26),!n.default.handleSessionExpiration(t.t0,e)){t.next=46;break}return t.abrupt("return");case 46:if(!n.default.handleServerError(t.t0,e)){t.next=49;break}return n.default.hideLoadingView(e),t.abrupt("return");case 49:e.showLableError(e.myError3Label,t.t0.message),n.default.hideLoadingView(e);case 51:case"end":return t.stop()}},t,null,[[26,42]])}))()},onDisableAuthenticatorDidPress:function(){var e=this;return s(i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.default.playButtonClickSound(),e.my2FaAuthenticatorView.active=!1,e.my2FaAuthenticatorRegisterView.active=!0;case 2:case"end":return t.stop()}},t)}))()},showLableError:function(e,t){this.myError1Label.active=!1,this.myError2Label.active=!1,this.myError3Label.active=!1,e&&(this.myScrollView.getComponent(cc.ScrollView).scrollToOffset(cc.v2(0,-1*e.y-160),.1,!1),e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title"),this.mSoundTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"sound"),this.mChangePassTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"changePassword"),this.m2FaTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"2Fa"),this.mVersionTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"version"),this.mLogoutTabLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"logout"),this.mMusicLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"music"),this.mMuteLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"mute"),this.mSoundLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"sound"),this.mMusicSwitchLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,!a.default.getMuteStatus()&&a.default.getPlayBackgroundMusicSoundStatus()?"on":"off"),this.mSoundSwitchLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,a.default.getMuteStatus()&&a.default.getPlayButtonClickSoundStatus()?"on":"off"),this.mMuteSwitchLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,a.default.getMuteStatus()?"on":"off"),this.mAuthenticatorLbl.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,this.mAuthenticatorStatus?"on":"off"),this.mCurrentPassLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"currentPassword"),this.mNewPassLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"newPassword"),this.mConfirmPassLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirmPassword"),this.mConfirmLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"confirm"),this.mLogoutLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"logout"),this.mDescLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"logoutDesc"),this.mNoLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"no"),this.mYesLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"yes"),this.mAuthenticatorTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"authenticator")},updatePrefabSize:function(){cc.view.getVisibleSize()}}),cc._RF.pop()},{"../Services/UserService":"UserService",SharedData:"SharedData",SharedFunction:"SharedFunction"}],SharedData:[function(e,t){"use strict";cc._RF.push(t,"8a39ahuQfJK6ZZhZLQy8PFQ","SharedData");var n={},a={},r={},o=[],i={},c=null,s={},l={},u={},d={},h={},m={},f=null,p=null,g={},y=[],v={},b={},w="0",C="",L=!1,S=!1,B="",P="",N="",D="",k="",T="",x="",E="",V="+880",I={},_=0,A="",F=[],G={},O=[],R=[],W=null;n.showTopupOnLobbyLoad=!1,n.getCurrentEnv=function(){return n.getAvailableEnvironment().ENV_DEVELOPMENT},n.getAvailableEnvironment=function(){return{ENV_DEVELOPMENT:"development",ENV_STAGING:"staging",ENV_PRODUCTION:"production"}},n.getApiUrl=function(){return n.getCurrentEnv()==n.getAvailableEnvironment().ENV_DEVELOPMENT?"https://aics.pusingzai.com":""},n.getTimeZone=function(){return"+8"},n.setCurrentLanguage=function(e){var t=null!=e?e:"en";localStorage.setItem("current_language",t)},n.getCurrentLanguage=function(){return null==localStorage.getItem("current_language")&&localStorage.setItem("current_language","en"),localStorage.getItem("current_language")},n.setPhoneCode=function(e){V=e},n.getPhoneCode=function(){return V},n.getCurrency=function(){return"BDT"},n.getPrefix=function(){return""},n.getVerificationStatus=function(){return!!a.hasOwnProperty("firstPasswordUpdate")&&!!a.hasOwnProperty("phoneNumber")&&""!=a.phoneNumber&&0!=a.firstPasswordUpdate},n.setPopoutItem=function(e){W=e},n.getPopoutItem=function(){return W},n.setWithdrawObject=function(e){u=e},n.getWithdrawObject=function(){return u},n.setReferralObject=function(e){g=e},n.getReferralObject=function(){return g},n.setPaymentsProviderObject=function(e){y=e},n.getPaymentsProviderObject=function(){return y},n.setVipList=function(e){v=e},n.getVipList=function(){return v},n.setVerifyPromo=function(e){var t=0;1==e.status&&null!=e.amount&&""!=e.amount&&(t=e.amount),w=t},n.getVerifyPromo=function(){return w},n.setAab=function(e){L=1==e},n.getAab=function(){return L},n.setIsApp=function(e){S=1==e},n.getIsApp=function(){return S},n.setVersion=function(e){B=null!=e?e:""},n.getVersion=function(){return B},n.setBundleId=function(e){P=null!=e?e:""},n.getBundleId=function(){return""==P?"h5":P},n.setUuid=function(e){N=null!=e?e:""},n.getUuid=function(){return N},n.setDevice=function(e){D=null!=e?e:""},n.getDevice=function(){return D},n.setReferral=function(e){k=null!=e?e:""},n.getReferral=function(){return k},n.setAgentCode=function(e){T=null!=e?e:""},n.getAgentCode=function(){return T},n.setFbclid=function(e){x=null!=e?e:""},n.getFbclid=function(){return x},n.setMetaId=function(e){E=null!=e?e:""},n.getMetaId=function(){return E},n.guard=function(){var e=n.getAab(),t=n.getVerificationStatus(),a=n.getUserObject(),r=""!=(null==a?void 0:a.firstDepositDate);return e?t?r?"download":"alert":"verification":t?"proceed":"verification"},n.gameGuard=function(){var e=n.getAab(),t=n.getVerificationStatus(),a=n.getUserObject(),r=""!=(null==a?void 0:a.firstDepositDate);return e?t?r?"download":"proceed":r?"verification":"proceed":t?"proceed":r?"verification":"proceed"},n.setUserObject=function(e){a=e},n.getUserObject=function(){return a.username&&(a.username=a.username.replace(n.getPrefix(),"")),a},n.setGameCategories=function(e){b=e},n.getGameCategories=function(){return b},n.setSelectedAvatar=function(e){localStorage.setItem("selected_avatar",e)},n.getSelectedAvatar=function(){return null==localStorage.getItem("selected_avatar")?1:localStorage.getItem("selected_avatar")},n.setPlayButtonClickSoundStatus=function(e){localStorage.setItem("playSound",e)},n.getPlayButtonClickSoundStatus=function(){var e=localStorage.getItem("playSound");return null==e||"true"==e},n.setPlayBackgroundMusicSoundStatus=function(e){localStorage.setItem("playMusic",e)},n.getPlayBackgroundMusicSoundStatus=function(){var e=localStorage.getItem("playMusic");return null==e||"true"==e},n.setMuteStatus=function(e){localStorage.setItem("Mute",e)},n.getMuteStatus=function(){var e=localStorage.getItem("Mute");return null!=e&&"true"==e},n.setGameList=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=n.list;n.custom_list=[];for(var r=[],i=0;i<a.length;i++){var c=a[i];"square"==c.imageSize?(r.push(c),r.length>=2?(n.custom_list.push(r),r=[]):i==a.length-1&&(n.custom_list.push(r),r=[])):(r.push(c),n.custom_list.push(r),r=[])}e[t]=n}o=e},n.getGameList=function(){return o},n.setSocialMediaObject=function(e){r=e},n.getSocialMediaObject=function(){return r},n.setLiveChat=function(e){C=e},n.getLiveChat=function(){return C},n.setAccumulateDepositObject=function(e){i=e},n.getAccumulateDepositObject=function(){return i},n.setWelcomeBonusObject=function(e){c=e},n.getWelcomeBonusObject=function(){return c},n.setPromotionObject=function(e){s=e},n.getPromotionObject=function(){return s},n.setMissionDataObject=function(e){l=e},n.getMissionDataObject=function(){return l},n.setWeekCardDataObject=function(e){d=e},n.getWeekCardDataObject=function(){return d},n.setReliefFundDataObject=function(e){h=e},n.getReliefFundDataObject=function(){return h},n.setSignInRecordObject=function(e){m=e},n.getSignInRecordObject=function(){return m},n.setSignInViewInfoObject=function(e){f=e},n.getSignInViewInfoObject=function(){return f},n.setIncentiveDataObject=function(e){p=e},n.getIncentiveDataObject=function(){return p},n.setGameViewData=function(e){I=e},n.getGameViewData=function(){return I},n.setNewMessageCount=function(e){_=e},n.getNewMessageCount=function(){return _},n.setLandingAlertMessage=function(e){A=e},n.getLandingAlertMessage=function(){return A},n.setAnnouncement=function(e){F=e},n.getAnnouncement=function(){return F},n.setMailBox=function(e){G=e},n.getMailBox=function(){return G},n.setBanner=function(e){O=e},n.getBanner=function(){return O},n.addCachedGameList=function(e){R.push(e)},n.getCachedGameList=function(){return R},n.clearCachedGameList=function(){R=[]},t.exports=n,cc._RF.pop()},{}],SharedFunction:[function(e,t){"use strict";cc._RF.push(t,"23b74OhfdpP6aZ59+eHb9i6","SharedFunction");var n,a=(n=e("SharedData"))&&n.__esModule?n:{default:n};function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,o,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,o)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function o(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}var c={},s=null,l=null,u=null,d=null,h=null,m=null;c.isMobile=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},c.getMobileOperatingSystem=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"},c.callingAPI=function(t,n,a,r){var o=e("SharedData").getApiUrl()+n,i="";for(var c in a)i+=(""==i?"":"&")+c+"="+a[c];"GET"==t&&(o=o+"?"+i);var s=cc.loader.getXMLHttpRequest();s.open(t,o),"GET"==t?(s.setRequestHeader("Content-Type","text/plain"),s.send()):(s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(i)),s.onreadystatechange=function(){4==s.readyState&&s.status>=200&&s.status<=207?r(JSON.parse(s.responseText)):r(s.responseText)}},c.pad=function(e){return e<10?"0"+e:e},c.chour=function(e){return 0==e?e+12:(e>12&&(e-=12),e)},c.showNumberWithDecimal=function(e,t){return parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},c.showNumberWithComma=function(e){return parseInt(e).toLocaleString()},c.numberWithCommas=function(e){var t=e.toString().replace(/,/g,"");return a.default.getCurrency()+" "+Number.parseFloat(t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},c.showNumberWithDecimalAndComma=function(e,t){return parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t).toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},c.getActualWidth=function(e){return e*(cc.view.getFrameSize().width/640)},c.getActualHeight=function(e){return e*(cc.view.getFrameSize().height/1136)},c.getScale=function(e,t){var n=cc.view.getFrameSize().width,a=cc.view.getFrameSize().height,r=e,o=t;e>n&&t>a&&(r=e/2,o=t/2);var i=n/r,c=a/o;return n>a?i.toFixed(1)==c.toFixed(1)?1:n/a>e/t?1:1-(i>c?i-c:c-i):Math.min(i,c)},c.setCookie=function(e,t,n){var a=new Date;a.setTime(a.getTime()+864e5*n);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},c.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},c.playButtonClickSound=function(){a.default.getPlayButtonClickSoundStatus()&&!a.default.getMuteStatus()&&cc.loader.loadRes("sounds/button_click",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!1,1)})},c.playLobbyBackgroundMusic=function(){cc.audioEngine.stopAll(),a.default.getPlayBackgroundMusicSoundStatus()&&!a.default.getMuteStatus()&&cc.loader.loadRes("sounds/background_music",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!0,1)})},c.stopLobbyBackgroundMusic=function(){cc.audioEngine.stopAll()},c.playLobbyBackgroundMusicForExitsGame=function(){this.playLobbyBackgroundMusic()},c.getRandomArbitrary=function(e,t){return Math.random()*(t-e)+e},c.setLoadingViewPrefabs=function(e){l=e},c.showLoadingView=function(e,t){void 0===e&&(e="");var n=function(){(s=cc.instantiate(l).getComponent("LoadingView")).init(0,0,1136,640),s.setText(e),t.node.addChild(s.node)};null==l?cc.resources.load("prefabs/LoadingView/LoadingView",cc.Prefab,function(e,t){e?console.error("Failed to load loadingView prefab:",e):(l=t,n())}):n()},c.updateLoadingView=function(e){void 0===e&&(e=""),null!=s&&s.setText(e)},c.hideLoadingView=function(e){null!=s&&null!=e&&null!=e.node&&e.node.removeChild(s.node)},c.setAlertViewPrefabs=function(e){d=e},c.showAlertView=function(e,t,n){void 0===e&&(e="");var a=function(){(u=cc.instantiate(d).getComponent("AlertView")).init(0,0,1136,640),u.setText(e),u.setTitle("Alert"),n&&"function"==typeof n&&u.setCallback(n),t.node.addChild(u.node)};null==d?cc.resources.load("prefabs/AlertView/AlertView",cc.Prefab,function(e,t){e?console.error("Failed to load alertView prefab:",e):(d=t,a())}):a()},c.hideAlertView=function(e){null!=u&&e.node.removeChild(u.node)},c.setMessageInfoViewPrefab=function(e){h=e},c.showMessageInfoView=function(e,t,n,a){void 0===e&&(e=""),void 0===n&&(n=1);var r=function(){(m=cc.instantiate(h).getComponent("MessageInfoView")).init(0,0,1136,640),m.setText(e),a&&"function"==typeof a&&m.setCallback(a),t.node.addChild(m.node),m.show(n)};null==h?cc.resources.load("prefabs/AlertView/MessageInfoView",cc.Prefab,function(e,t){e?console.error("Failed to load messageInfoView prefab:",e):(h=t,r())}):r()},c.hideMessageInfoView=function(){null!=m&&m.node&&m.node.isValid&&m.dismiss()},c.loadImgRes=function(e,t){cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){e?cc.error(e.message||e):t.spriteFrame=n})},c.getQueryParam=function(e){return new URLSearchParams(window.location.search).get(e)},c.logout=function(){var e=i(r().mark(function e(t){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("from_index"),localStorage.removeItem("token"),localStorage.removeItem("verified_username"),localStorage.removeItem("verified_password"),localStorage.removeItem("unverified_username"),localStorage.removeItem("unverified_email"),localStorage.removeItem("unverified_phoneNum"),localStorage.removeItem("unverified_password"),localStorage.removeItem("unverified_fullName"),localStorage.removeItem("unverified_referal"),localStorage.removeItem("unverified_phoneotp"),localStorage.removeItem("returningFromGame"),localStorage.removeItem("gameHistory"),a.default.setUserObject({}),a.default.setAccumulateDepositObject({}),a.default.setWelcomeBonusObject(null),a.default.setMissionDataObject({}),a.default.setWithdrawObject({}),a.default.setWeekCardDataObject({}),a.default.setReliefFundDataObject({}),a.default.setSignInRecordObject({}),a.default.setMailBox({}),a.default.setIncentiveDataObject(null),a.default.setReferralObject({}),a.default.setPaymentsProviderObject([]),a.default.setVipList({}),a.default.setGameList([]),a.default.setGameCategories({}),a.default.setAnnouncement([]),a.default.setBanner([]),a.default.clearCachedGameList(),a.default.setNewMessageCount(0),a.default.setLandingAlertMessage(""),a.default.setPopoutItem(null),c.hideLoadingView(t);case 35:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),c.isSessionExpired=function(e){var t;if(!e)return!1;var n=e.status||(null==(t=e.response)?void 0:t.status);if(401===n||402===n||403===n){var a,r,o,i="";if(null!=(a=e.data)&&a.message)i=e.data.message;else if(null!=(r=e.data)&&null!=(o=r.data)&&o.message)i=e.data.data.message;else if(e.message)i=e.message;else if(e.error)try{var c="string"==typeof e.error?JSON.parse(e.error):e.error;i=c.message||c.msg||""}catch(s){i="string"==typeof e.error?e.error:""}return i&&(i.toLowerCase().includes("session expired")||i.toLowerCase().includes("another login detected")||i.toLowerCase().includes("token expired")||i.toLowerCase().includes("unauthorized")),!0}return!1},c.isServerError=function(e){var t;return!!e&&500===(e.status||(null==(t=e.response)?void 0:t.status))},c.handleServerError=function(e,t){return!!c.isServerError(e)&&(t&&t.node&&c.showMessageInfoView("We're sorry, but something went wrong on our end. Our team has been notified and is working to fix the issue. Please try again later.",t,3),!0)},c.handleSessionExpiration=function(e,t){if(c.isSessionExpired(e)){var n,a,r;console.log("Session expired, logging out user",e);var o="Session expired. Please login again.";return null!=(n=e.data)&&n.message?o=e.data.message:null!=(a=e.data)&&null!=(r=a.data)&&r.message?o=e.data.data.message:e.message&&(o=e.message),t&&t.node?c.showMessageInfoView(o,t,2,function(){c.logout(t),setTimeout(function(){cc.director.loadScene("Splash")},100)}):(c.logout(t),setTimeout(function(){cc.director.loadScene("Splash")},100)),c.hideLoadingView(t),!0}return!1},c.isLoggedIn=function(){return null!=localStorage.getItem("verified_username")&&""!=localStorage.getItem("verified_username")&&null!=localStorage.getItem("verified_password")&&""!=localStorage.getItem("verified_password")&&null!=localStorage.getItem("token")&&""!=localStorage.getItem("token")},c.getTonightMidnight=function(){var e=new Date;return e.setHours(24,0,0,0),e.getTime()},c.setTodayData=function(e,t){var n={value:t,expiry:this.getTonightMidnight()};localStorage.setItem(e,JSON.stringify(n))},c.getTodayData=function(e,t){void 0===t&&(t=null);var n=localStorage.getItem(e);if(!n)return t;try{var a=JSON.parse(n);return(new Date).getTime()>a.expiry?(localStorage.removeItem(e),t):a.value}catch(error){return console.error("Error parsing stored item:",error),t}},c.getRandomAlphaNumeric=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",a=t.length,r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*a));return n},c.getRandomNumber=function(e,t){return parseInt(Math.random()*(t-e)+e)},c.getLocalizedString=function(e,t){var n=a.default.getCurrentLanguage();if(e&&e.json){var r=e.json[n];return r&&r[t]?r[t]:(console.warn('Missing localization for key: "'+t+'" in language: "'+n+'"'),t)}return console.error("Localization data is not loaded."),t},c.getDateRange=function(e){var t=new Date,n=new Date;n.setDate(t.getDate()-e);var a=function(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")};return{from:a(n),to:a(t)}},c.getTodayDate=function(){var e=new Date;return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")},c.getTomorrowDate=function(){var e=new Date;return e.setDate(e.getDate()+1),e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")},c.getLocalDate=function(e){var t=new Date(e);return t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+" "+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")},c.RangeCheck=function(e){return/^.{6,}$/.test(e)},c.EmailCheck=function(e){return/^(?=.*@)(?=.*\.).+$/.test(e)},c.passwordRegexCheck=function(e){return/^[a-zA-Z0-9]{6,20}$/.test(e)},c.usernameRegexCheck=function(e){return/^[a-z0-9]{6,12}$/.test(e)},c.tacCodeRegexCheck=function(e){return/^\d{4}$/.test(e)},c.formatString=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[t]?n[t]:e})},c.sendToApp=function(e){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.send&&window.webkit.messageHandlers.send.postMessage({json:e}),window.android&&"function"==typeof window.android.send&&(console.log(JSON.stringify(window.android)),console.log(typeof window.android.send),window.android.send(e))},c.copyToClipboard=function(){var e=i(r().mark(function e(t){var n;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!navigator.clipboard){e.next=7;break}return e.next=4,navigator.clipboard.writeText(t);case 4:return e.abrupt("return",!0);case 7:return(n=document.createElement("textarea")).value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),e.abrupt("return",!0);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),e.t0 instanceof Error?alert("Failed to copy text: "+e.t0.message):alert("Failed to copy text: Unknown error"),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),t.exports=c,cc._RF.pop()},{SharedData:"SharedData"}],SimpleBirthdayPicker:[function(e,t){"use strict";cc._RF.push(t,"b4a39RLbABM5YcD+cVKKA8Q","SimpleBirthdayPicker"),cc.Class({extends:cc.Component,properties:{prevYearBtn:cc.Node,yearLabel:cc.Label,nextYearBtn:cc.Node,prevMonthBtn:cc.Node,monthLabel:cc.Label,nextMonthBtn:cc.Node,prevDayBtn:cc.Node,dayLabel:cc.Label,nextDayBtn:cc.Node,minYear:{default:1900,tooltip:"\u53ef\u9009\u7684\u6700\u5c0f\u5e74\u4efd"},maxYear:{default:0,tooltip:"\u53ef\u9009\u7684\u6700\u5927\u5e74\u4efd\uff080\u8868\u793a\u5f53\u524d\u5e74\u4efd\uff09"},_selectedYear:2e3,_selectedMonth:1,_selectedDay:1},onLoad:function(){0===this.maxYear&&(this.maxYear=(new Date).getFullYear()),this.initDate(),this.initEvents(),this.updateDisplay()},initDate:function(){this._selectedYear=2e3,this._selectedMonth=1,this._selectedDay=1},initEvents:function(){this.prevYearBtn.on("click",this.onPrevYear,this),this.nextYearBtn.on("click",this.onNextYear,this),this.prevMonthBtn.on("click",this.onPrevMonth,this),this.nextMonthBtn.on("click",this.onNextMonth,this),this.prevDayBtn.on("click",this.onPrevDay,this),this.nextDayBtn.on("click",this.onNextDay,this),this.addLongPressSupport()},onPrevYear:function(){this._selectedYear>this.minYear&&(this._selectedYear--,this.updateDayRange(),this.updateDisplay(),this.playButtonEffect(this.prevYearBtn))},onNextYear:function(){this._selectedYear<this.maxYear&&(this._selectedYear++,this.updateDayRange(),this.updateDisplay(),this.playButtonEffect(this.nextYearBtn))},onPrevMonth:function(){this._selectedMonth>1?this._selectedMonth--:(this._selectedMonth=12,this._selectedYear>this.minYear&&this._selectedYear--),this.updateDayRange(),this.updateDisplay(),this.playButtonEffect(this.prevMonthBtn)},onNextMonth:function(){this._selectedMonth<12?this._selectedMonth++:(this._selectedMonth=1,this._selectedYear<this.maxYear&&this._selectedYear++),this.updateDayRange(),this.updateDisplay(),this.playButtonEffect(this.nextMonthBtn)},onPrevDay:function(){var e=this.getDaysInMonth();if(!(this._selectedDay>1))return this._selectedDay=e,void this.onPrevMonth();this._selectedDay--,this.updateDisplay(),this.playButtonEffect(this.prevDayBtn)},onNextDay:function(){var e=this.getDaysInMonth();if(!(this._selectedDay<e))return this._selectedDay=1,void this.onNextMonth();this._selectedDay++,this.updateDisplay(),this.playButtonEffect(this.nextDayBtn)},getDaysInMonth:function(){return new Date(this._selectedYear,this._selectedMonth,0).getDate()},updateDayRange:function(){var e=this.getDaysInMonth();this._selectedDay>e&&(this._selectedDay=e)},updateDisplay:function(){this.yearLabel.string=this._selectedYear+"\u5e74",this.monthLabel.string=this._selectedMonth+"\u6708",this.dayLabel.string=this._selectedDay+"\u65e5"},playButtonEffect:function(e){cc.tween(e).to(.1,{scale:.9}).to(.1,{scale:1}).start()},addLongPressSupport:function(){var e=this;[{node:this.prevYearBtn,action:"onPrevYear"},{node:this.nextYearBtn,action:"onNextYear"},{node:this.prevMonthBtn,action:"onPrevMonth"},{node:this.nextMonthBtn,action:"onNextMonth"},{node:this.prevDayBtn,action:"onPrevDay"},{node:this.nextDayBtn,action:"onNextDay"}].forEach(function(t){var n=null,a=!1;t.node.on(cc.Node.EventType.TOUCH_START,function(){n=setTimeout(function(){a=!0,e.schedule(function(){a&&e[t.action]()},.1)},500)}),t.node.on(cc.Node.EventType.TOUCH_END,function(){n&&(clearTimeout(n),n=null),a=!1,e.unscheduleAllCallbacks()}),t.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){n&&(clearTimeout(n),n=null),a=!1,e.unscheduleAllCallbacks()})})},getBirthday:function(){return new Date(this._selectedYear,this._selectedMonth-1,this._selectedDay)},getBirthdayString:function(e){void 0===e&&(e="YYYY-MM-DD");var t=this._selectedYear.toString(),n=this._selectedMonth.toString().padStart(2,"0"),a=this._selectedDay.toString().padStart(2,"0");return e.replace("YYYY",t).replace("MM",n).replace("DD",a).replace("YY",t.slice(-2)).replace("M",this._selectedMonth.toString()).replace("D",this._selectedDay.toString())},setBirthday:function(e,t,n){if(void 0!==e){if(e<this.minYear||e>this.maxYear)return cc.warn("\u5e74\u4efd "+e+" \u8d85\u51fa\u8303\u56f4 ["+this.minYear+", "+this.maxYear+"]"),!1;this._selectedYear=e}if(void 0!==t){if(t<1||t>12)return cc.warn("\u6708\u4efd "+t+" \u65e0\u6548\uff0c\u5e94\u4e3a 1-12"),!1;this._selectedMonth=t}if(void 0!==n){var a=this.getDaysInMonth();if(n<1||n>a)return cc.warn("\u65e5\u671f "+n+" \u65e0\u6548\uff0c\u672c\u6708\u5929\u6570\u4e3a "+a),!1;this._selectedDay=n}return this.updateDisplay(),!0},setBirthdayFromDate:function(e){return e instanceof Date?this.setBirthday(e.getFullYear(),e.getMonth()+1,e.getDate()):(cc.error("\u53c2\u6570\u5fc5\u987b\u662fDate\u5bf9\u8c61"),!1)},reset:function(){this.initDate(),this.updateDisplay()},checkLimits:function(){return{yearMin:this._selectedYear<=this.minYear,yearMax:this._selectedYear>=this.maxYear,monthMin:this._selectedMonth<=1,monthMax:this._selectedMonth>=12,dayMin:this._selectedDay<=1,dayMax:this._selectedDay>=this.getDaysInMonth()}}}),cc._RF.pop()},{}],Splash:[function(e,t){"use strict";cc._RF.push(t,"ac950Z2/3NP/INGeuWmFOi0","Splash");var n,a=c(e("../lib/SharedFunction")),r=c(e("../lib/SharedData")),o=c(e("../Services/AuthServices")),i=c(e("../Services/GameService"));function c(e){return e&&e.__esModule?e:{default:e}}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};c(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,c(v,"constructor",f),c(f,"constructor",m),m.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),c(v,i,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function l(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){l(o,a,r,i,c,"next",e)}function c(e){l(o,a,r,i,c,"throw",e)}i(void 0)})}}var d,h=cc.Enum({CHECKMAINTENANCE:0,GETINITDATA:1,LOGIN:2,GETDATA:3,SUCCESS:4,PRELOAD:5});cc.Class({extends:cc.Component,properties:(n={myLoginView:null,myLanguageView:null,mProgressBar:{default:null,type:cc.ProgressBar},mLoginBtn:{default:null,type:cc.Node},mStatusLabel:{default:null,type:cc.Node},mVersionLabel:{default:null,type:cc.Node},mPercentageLabel:{default:null,type:cc.Label},mCsButton:{default:null,type:cc.Node},progressMode:{default:h.CHECKMAINTENANCE,type:h}},n.mVersionLabel={default:null,type:cc.Label},n.i18nJson={default:null,type:cc.JsonAsset},n.mDescLabel={default:null,type:cc.Node},n.mMaintenanceView=null,n.mMaintenanceViewPrefab={default:null,type:cc.Prefab},n.connectServerDesc="",n.loginDesc="",n.updateDesc="",n.enterDesc="",n),onLoad:function(){var e=this;this.progress=0,this.mProgressBar.progress=this.progress,this.maintenanceModeComplete=!1,this.getInitDataComplete=!1,this.loginComplete=!1,this.getDataComplete=!1,this.mStatusMessage="",this.mNextScene="Lobby",this.isLobbyPreloaded=!1,this.isLandingPreloaded=!1,cc.director.preloadScene(this.mNextScene,function(){e.isLobbyPreloaded=!0}),cc.resources.load("prefabs/LoadingView/LoadingView",cc.Prefab,function(e,t){e&&console.error("Failed to load prefab:",e),a.default.setLoadingViewPrefabs(t)}),cc.resources.load("prefabs/AlertView/AlertView",cc.Prefab,function(e,t){e&&console.error("Failed to load prefab:",e),a.default.setAlertViewPrefabs(t)}),cc.resources.load("prefabs/AlertView/MessageInfoView",cc.Prefab,function(e,t){e&&console.error("Failed to load MessageInfoView prefab:",e),a.default.setMessageInfoViewPrefab(t)})},onDestroy:function(){this.stopDotAnimation()},startDotAnimation:function(){var e=this,t=0;this.dotInterval=setInterval(function(){var n=".".repeat(t=(t+1)%4);e.mStatusLabel.getComponent(cc.Label).string=""+e.mStatusMessage+n},500)},stopDotAnimation:function(){clearInterval(this.dotInterval)},onLoginButtonDidPressed:function(e,t,n){void 0===n&&(n=!1);var r=this;n||a.default.playButtonClickSound(),cc.resources.load("prefabs/login/login",cc.Prefab,function(e,t){if(e)return console.error("Failed to load prefab:",e),void a.default.hideLoadingView(r);null==r.myLoginView&&(r.myLoginView=cc.instantiate(t).getComponent("Login"),r.updatePrefabSize(),r.myLoginView.setCallBack(r)),r.myLoginView.updateView(r),r.node.addChild(r.myLoginView.node),a.default.hideLoadingView(r)})},onLoginCloseButtonDidPressed:function(){this.node.removeChild(this.myLoginView.node)},onLanguageCloseButtonDidPressed:function(){this.node.removeChild(this.myLanguageView.node),this.progressMode=h.GETDATA},update:(d=u(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.progressMode,e.next=e.t0===h.CHECKMAINTENANCE?3:e.t0===h.GETINITDATA?5:e.t0===h.LOGIN?11:e.t0===h.GETDATA?21:e.t0===h.SUCCESS?24:27;break;case 3:return this.maintenanceModeComplete||(this.maintenanceModeComplete=!0,this.progressMode=h.GETINITDATA),e.abrupt("break",27);case 5:if(this.mProgressBar.progress<.2&&(this.progress+=.1*t),this.getInitDataComplete){e.next=10;break}return this.getInitDataComplete=!0,e.next=10,this.callGetSplashDataApi();case 10:return e.abrupt("break",27);case 11:if(this.mProgressBar.progress<.5&&(this.progress+=.1*t),this.loginComplete){e.next=20;break}if(this.loginComplete=!0,!localStorage.getItem("verified_username")||!localStorage.getItem("verified_password")){e.next=18;break}return e.next=17,this.callLoginApi("",localStorage.getItem("verified_username"),localStorage.getItem("verified_password"),"");case 17:return e.abrupt("return");case 18:n=this,cc.resources.load("prefabs/language/language",cc.Prefab,function(e,t){e?console.error("Failed to load prefab:",e):(null==n.myLanguageView&&(n.myLanguageView=cc.instantiate(t).getComponent("Language"),n.updatePrefabSize()),n.myLanguageView.updateView(n),n.node.addChild(n.myLanguageView.node))});case 20:return e.abrupt("break",27);case 21:return this.mProgressBar.progress<.7&&(this.progress+=.1*t),this.getDataComplete||(this.getDataComplete=!0,this.progress=.7,this.progressMode=h.SUCCESS),e.abrupt("break",27);case 24:return this.mProgressBar.progress<.99&&(this.progress+=.1*t),"Lobby"==this.mNextScene&&this.isLobbyPreloaded&&1!=this.progress&&(this.progress=1,cc.director.loadScene(this.mNextScene)),e.abrupt("break",27);case 27:this.progress=this.progress>1?1:this.progress,this.mProgressBar.progress=this.progress;case 29:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)}),callGetSplashDataApi:function(){var e=this;return u(s().mark(function t(){var n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.getDashboard();case 2:200==(n=t.sent).status&&(r.default.setPhoneCode(n.settings.regional.phonePrefix),r.default.setCurrentLanguage(null==localStorage.getItem("current_language")?n.settings.languages.defaultLanguage:localStorage.getItem("current_language")),r.default.setAnnouncement(n.settings.announcements),localStorage.setItem("from_index",JSON.stringify(n))),e.progressMode=h.LOGIN;case 5:case"end":return t.stop()}},t)}))()},callLoginApi:function(e,t,n,a){var r=this;return u(s().mark(function i(){var c,l;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,o.default.login(e,t,n,a);case 3:if(200!=(c=i.sent).status){i.next=12;break}return localStorage.setItem("verified_username",t),localStorage.setItem("verified_password",n),localStorage.setItem("token",c.token),r.progressMode=h.GETDATA,i.abrupt("return");case 12:console.log("else");case 13:i.next=18;break;case 15:i.prev=15,i.t0=i.catch(0),console.error("callLoginApi Error:",i.t0);case 18:localStorage.setItem("verified_username",""),localStorage.setItem("verified_password",""),localStorage.setItem("token",""),l=r,cc.resources.load("prefabs/language/language",cc.Prefab,function(e,t){e?console.error("Failed to load prefab:",e):(null==l.myLanguageView&&(l.myLanguageView=cc.instantiate(t).getComponent("Language"),l.updatePrefabSize()),l.myLanguageView.updateView(l),l.node.addChild(l.myLanguageView.node))});case 23:case"end":return i.stop()}},i,null,[[0,15]])}))()},onCsButtonClicked:function(){window.open(r.default.getLiveChat(),"_blank").focus()},localizeUI:function(){},updatePrefabSize:function(){var e=cc.view.getVisibleSize();this.myLanguageView&&this.myLanguageView.init(0,0,e.width,e.height)}}),cc._RF.pop()},{"../Services/AuthServices":"AuthServices","../Services/GameService":"GameService","../lib/SharedData":"SharedData","../lib/SharedFunction":"SharedFunction"}],TransactionService:[function(e,t,n){"use strict";cc._RF.push(t,"2cb43AvNY9G+aWS8t85u0H8","TransactionService");var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(c){o=[6,c],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionService=void 0;var o=e("./NetworkService"),i=function(){function e(){}return e.getTransactions=function(e,t){var n,i,c;return void 0===t&&(t={}),a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==t.page&&null!==t.page&&(a.page=t.page),void 0!==t.limit&&null!==t.limit&&(a.limit=t.limit),void 0!==t.type&&null!==t.type&&(a.type=t.type),void 0!==t.startDate&&null!==t.startDate&&(a.startDate=t.startDate),void 0!==t.endDate&&null!==t.endDate&&(a.endDate=t.endDate),[4,o.NetworkService.get(this.GET_TRANSACTIONS_ENDPOINT,a,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(n=s.data)||void 0===n?void 0:n.data)||s.data,[2,{status:s.status,success:null===(i=s.data)||void 0===i?void 0:i.success,message:(null===(c=s.data)||void 0===c?void 0:c.message)||s.message,data:l,transactions:null==l?void 0:l.transactions,summary:null==l?void 0:l.summary,pagination:null==l?void 0:l.pagination}];case 2:throw u=r.sent(),console.error("TransactionService.getTransactions error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch game transactions",error:u};case 3:return[2]}})})},e.getTransactionById=function(e,t){var n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=this.GET_TRANSACTION_BY_ID_ENDPOINT+"/"+t,[4,o.NetworkService.get(a,void 0,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(n=s.data)||void 0===n?void 0:n.data)||s.data,[2,{status:s.status,success:null===(i=s.data)||void 0===i?void 0:i.success,message:(null===(c=s.data)||void 0===c?void 0:c.message)||s.message,data:l,transaction:l}];case 2:throw u=r.sent(),console.error("TransactionService.getTransactionById error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch transaction",error:u};case 3:return[2]}})})},e.GET_TRANSACTIONS_ENDPOINT="/api/public/v1/game-transactions",e.GET_TRANSACTION_BY_ID_ENDPOINT="/api/public/v1/game-transactions",e}();n.TransactionService=i,n.default=i,cc._RF.pop()},{"./NetworkService":"NetworkService"}],TwoFAService:[function(e,t,n){"use strict";cc._RF.push(t,"1c6c0+15LFC5bGvYIr6QmuW","TwoFAService");var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(c){o=[6,c],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.TwoFAService=void 0;var o=e("./NetworkService"),i=function(){function e(){}return e.setup2FA=function(e){var t,n,i,c,s;return a(this,void 0,Promise,function(){var a,l;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.post(this.SETUP_2FA_ENDPOINT,void 0,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return[2,{status:(a=r.sent()).status,success:null===(t=a.data)||void 0===t?void 0:t.success,message:(null===(n=a.data)||void 0===n?void 0:n.message)||a.message,secret:null===(i=a.data)||void 0===i?void 0:i.secret,qrCode:null===(c=a.data)||void 0===c?void 0:c.qrCode,manualEntryKey:null===(s=a.data)||void 0===s?void 0:s.manualEntryKey,data:a.data}];case 2:throw l=r.sent(),console.error("TwoFAService.setup2FA error:",l),{status:l.status||500,data:l.data||null,message:l.message||"Failed to setup 2FA",error:l};case 3:return[2]}})})},e.SETUP_2FA_ENDPOINT="/api/public/v1/players/twofa/setup",e}();n.TwoFAService=i,n.default=i,cc._RF.pop()},{"./NetworkService":"NetworkService"}],UnselectedTab:[function(e,t){"use strict";cc._RF.push(t,"2b9c0UBfQVI6aGaHgYGuQP9","UnselectedTab");var n,a=(n=e("SharedFunction"))&&n.__esModule?n:{default:n};e("SharedData"),cc.Class({extends:cc.Component,properties:{mFocusTabImg:{default:null,type:cc.SpriteFrame},mNormalTabImg:{default:null,type:cc.SpriteFrame},myBG:{default:null,type:cc.Sprite},myLabel:{default:null,type:cc.Node}},onLoad:function(){},init:function(e,t,n,a,r){this.node.x=e,this.node.y=t,this.name=n,this.mCallBack=r,this.myLabel.getComponent(cc.Label).string=n,60==e?(this.myBG.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myLabel.color=new cc.Color(0,0,0,255),this.onclick(null,null,!0,a)):this.myLabel.color=new cc.Color(255,255,255,255)},onclick:function(e,t,n,r){n||a.default.playButtonClickSound(),this.mCallBack.onTabDidPressed(this.name,r),this.myBG.getComponent(cc.Sprite).spriteFrame=this.mFocusTabImg,this.myLabel.color=new cc.Color(0,0,0,255)},unselect:function(){this.myBG.getComponent(cc.Sprite).spriteFrame=this.mNormalTabImg,this.myLabel.color=new cc.Color(255,255,255,255)}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],UserService:[function(e,t,n){"use strict";cc._RF.push(t,"7c098SRQltBqLB4ZNjmu8kV","UserService");var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(c){o=[6,c],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UserService=void 0;var o=e("./NetworkService"),i=function(){function e(){}return e.getProfile=function(e){var t,n,i;return a(this,void 0,Promise,function(){var a,c,s;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.get(this.GET_USER_PROFILE_ENDPOINT,void 0,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return a=r.sent(),c=(null===(t=a.data)||void 0===t?void 0:t.data)||a.data,[2,{status:a.status,success:null===(n=a.data)||void 0===n?void 0:n.success,message:(null===(i=a.data)||void 0===i?void 0:i.message)||a.message,data:c,player:null==c?void 0:c.player}];case 2:throw s=r.sent(),console.error("UserService.getProfile error:",s),{status:s.status||500,data:s.data||null,message:s.message||"Failed to fetch user profile",error:s};case 3:return[2]}})})},e.updateProfile=function(e,t){var n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==t.fullName&&null!==t.fullName&&(a.fullName=t.fullName),void 0!==t.email&&null!==t.email&&(a.email=t.email),void 0!==t.phone&&null!==t.phone&&(a.phone=t.phone),void 0!==t.emailOtp&&null!==t.emailOtp&&(a.emailOtp=t.emailOtp),void 0!==t.phoneOtp&&null!==t.phoneOtp&&(a.phoneOtp=t.phoneOtp),[4,o.NetworkService.put(this.UPDATE_USER_PROFILE_ENDPOINT,a,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(n=s.data)||void 0===n?void 0:n.data)||s.data,[2,{status:s.status,success:null===(i=s.data)||void 0===i?void 0:i.success,message:(null===(c=s.data)||void 0===c?void 0:c.message)||s.message,data:l,player:null==l?void 0:l.player}];case 2:throw u=r.sent(),console.error("UserService.updateProfile error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to update user profile",error:u};case 3:return[2]}})})},e.changePassword=function(e,t){var n,i;return a(this,void 0,Promise,function(){var a,c,s;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={currentPassword:t.currentPassword,newPassword:t.newPassword},[4,o.NetworkService.put(this.CHANGE_PASSWORD_ENDPOINT,a,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return[2,{status:(c=r.sent()).status,success:null===(n=c.data)||void 0===n?void 0:n.success,message:(null===(i=c.data)||void 0===i?void 0:i.message)||c.message,data:c.data}];case 2:throw s=r.sent(),console.error("UserService.changePassword error:",s),{status:s.status||500,data:s.data||null,message:s.message||"Failed to change password",error:s};case 3:return[2]}})})},e.getBalance=function(e){var t,n,i;return a(this,void 0,Promise,function(){var a,c,s;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.get(this.GET_BALANCE_ENDPOINT,void 0,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return a=r.sent(),c=(null===(t=a.data)||void 0===t?void 0:t.data)||a.data,[2,{status:a.status,success:null===(n=a.data)||void 0===n?void 0:n.success,message:(null===(i=a.data)||void 0===i?void 0:i.message)||a.message,data:c,balance:null==c?void 0:c.balance,currency:null==c?void 0:c.currency}];case 2:throw s=r.sent(),console.error("UserService.getBalance error:",s),{status:s.status||500,data:s.data||null,message:s.message||"Failed to fetch balance",error:s};case 3:return[2]}})})},e.GET_USER_PROFILE_ENDPOINT="/api/public/v1/players/me",e.UPDATE_USER_PROFILE_ENDPOINT="/api/public/v1/players/me",e.CHANGE_PASSWORD_ENDPOINT="/api/public/v1/players/me/password",e.GET_BALANCE_ENDPOINT="/api/public/v1/players/balance",e}();n.UserService=i,n.default=i,cc._RF.pop()},{"./NetworkService":"NetworkService"}],VIPLevel:[function(e,t){"use strict";cc._RF.push(t,"9c785ctUdJOQr3YTXa98kNg","VIPLevel");var n=a(e("SharedFunction"));function a(e){return e&&e.__esModule?e:{default:e}}a(e("SharedData")),cc.Class({extends:cc.Component,properties:{mCallBack:null,mLevelList:[],createdInfos:[],mBackground:{default:null,type:cc.Node},myScrollView:{default:null,type:cc.Node},myScrollContent:{default:null,type:cc.Node},mySummaryContainer:{default:null,type:cc.Node},myDetailContainer:{default:null,type:cc.Node},myLevelInfoPrefab:{default:null,type:cc.Prefab},myRichText:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI()},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},updateView:function(e){this.localizeUI(),this.mCallBack=e,this.mBackground.active=!0,this.node.opacity=255,this.myDetailContainer.active=!1,this.mySummaryContainer.active=!0,this.mLevelList=[{name:"New Player",level:1,dailyLimit:0,dailyTransaction:0,upgradeBonus:0,rescueBonus:3,birthdayBonus:288,present:"No"},{name:"Silver Card",level:2,dailyLimit:0,dailyTransaction:0,upgradeBonus:888,rescueBonus:4,birthdayBonus:688,present:"No"},{name:"Gold Card",level:3,dailyLimit:0,dailyTransaction:0,upgradeBonus:1888,rescueBonus:5,birthdayBonus:1288,present:"No"},{name:"Platinum Card",level:4,dailyLimit:0,dailyTransaction:0,upgradeBonus:3888,rescueBonus:6,birthdayBonus:2888,present:"No"},{name:"Ruby Card",level:5,dailyLimit:0,dailyTransaction:0,upgradeBonus:8888,rescueBonus:7,birthdayBonus:6888,present:"No"},{name:"Diamond Card",level:6,dailyLimit:0,dailyTransaction:0,upgradeBonus:38888,rescueBonus:8,birthdayBonus:28888,present:"No"}],this.drawLevelInfo();var t=this.mBackground.getChildByName("card_bg");t.setScale(0),cc.tween(t).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setCallBack:function(e){this.mCallBack=e},drawLevelInfo:function(){for(var e in this.mLevelList){var t=this.mLevelList[e],n=new cc.instantiate(this.myLevelInfoPrefab).getComponent("LevelInfo");n.init(147+280*parseInt(e),0,t,this),this.myScrollContent.addChild(n.node),this.createdInfos.push(n)}this.myScrollContent.width=14+279*this.mLevelList.length,this.myScrollView.getComponent(cc.ScrollView).scrollToLeft(0)},onCloseButtonDidPressed:function(e,t,a){var r=this;if(a||n.default.playButtonClickSound(),this.mySummaryContainer.active){var o=this.mBackground.getChildByName("card_bg");cc.tween(o).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){r.createdInfos.forEach(function(e){e&&e.isValid&&e.node.removeFromParent()}),r.createdInfos=[],r.mCallBack&&r.mCallBack.myCloseVIPLevelDidPressed()}).start()}else this.myDetailContainer.active&&this.onShowHideLevelDetail(!1)},onShowHideLevelDetail:function(e,t,a){var r=this,o=this.mBackground.getChildByName("card_bg");cc.tween(o).to(1/6,{scale:1.1}).to(1/6,{scale:0}).call(function(){e?(r.mTitleLabel.getComponent(cc.Label).string="VIP "+t+" - "+a,r.mySummaryContainer.active=!1,r.myDetailContainer.active=!0):(r.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(r.i18nJson,"title"),r.myDetailContainer.active=!1,r.mySummaryContainer.active=!0)}).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=n.default.getLocalizedString(this.i18nJson,"title")},updatePrefabSize:function(){cc.view.getVisibleSize()}}),cc._RF.pop()},{SharedData:"SharedData",SharedFunction:"SharedFunction"}],Verification:[function(e,t){"use strict";cc._RF.push(t,"de2a1Z9xx5PgYodxpTIQLcI","Verification");var n=o(e("SharedData")),a=o(e("SharedFunction")),r=o(e("../Services/AuthServices"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),i=new B(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var d={};function h(){}function m(){}function f(){}var p={};s(p,r,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,r)&&(p=y);var v=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}var r;this._invoke=function(e,n){function o(){return new t(function(t,r){a(e,n,t,r)})}return r=r?r.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=f,s(v,"constructor",f),s(f,"constructor",m),m.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(error){return void n(error)}c.done?t(s):Promise.resolve(s).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){c(o,a,r,i,s,"next",e)}function s(e){c(o,a,r,i,s,"throw",e)}i(void 0)})}}cc.Class({extends:cc.Component,properties:{mCallBack:null,verifyType:null,mInitSource:"Register",mIsRequestedTac:!1,mForgotUsername:"",isFromEditBasicInfo:!1,mForgetPasswordResponse:{default:{}},mBackground:{default:null,type:cc.Node},myVerifyBox1:{default:null,type:cc.EditBox},myVerifyBox2:{default:null,type:cc.EditBox},myVerifyBox3:{default:null,type:cc.EditBox},myVerifyBox4:{default:null,type:cc.EditBox},myVerifyBox5:{default:null,type:cc.EditBox},myVerifyBox6:{default:null,type:cc.EditBox},myErrorLabel:{default:null,type:cc.Node},mCountDownTimer:{default:30,type:cc.Float},myCDLabel:{default:null,type:cc.Node},myNoCodeLabel:{default:null,type:cc.Node},myResendLabel:{default:null,type:cc.Node},mDescLabel:{default:null,type:cc.Node},mSelectedTabIndex:0,mUserIdLabel:{default:null,type:cc.Node},mBackgroundAnimation:{default:null,type:cc.Node},mContainer:{default:null,type:cc.Node},mPhoneButton:{default:null,type:cc.Node},mSMSButton:{default:null,type:cc.Node},mWhatsappButton:{default:null,type:cc.Node},mPhoneNumberLabel:{default:null,type:cc.Node},mCodeInput:{default:null,type:cc.Node},mRequestTacButton:{default:null,type:cc.Node},mNewPasswordInput:{default:null,type:cc.EditBox},mConfirmPasswordInput:{default:null,type:cc.EditBox},mRewardLabel:{default:null,type:cc.Node},mOneLabel:{default:null,type:cc.Node},mInviteLabel:{default:null,type:cc.Node},mVoiceLabel:{default:null,type:cc.Node},mPhoneNoLabel:{default:null,type:cc.Node},mPhoneNoHolderLabel:{default:null,type:cc.Node},mPhoneNoHintLabel:{default:null,type:cc.Node},mCodeLabel:{default:null,type:cc.Node},mCodeHolderLabel:{default:null,type:cc.Node},mSendLabel:{default:null,type:cc.Node},mContinueLabel:{default:null,type:cc.Node},mNewPassLabel:{default:null,type:cc.Node},mNewPassHolderLabel:{default:null,type:cc.Node},mConPassLabel:{default:null,type:cc.Node},mConPassHolderLabel:{default:null,type:cc.Node},mPhoneCodeLabel:{default:null,type:cc.Node},i18nJson:{default:null,type:cc.JsonAsset},mTitleLabel:{default:null,type:cc.Node},mNoCodeLabel:{default:null,type:cc.Node},mResendLabel:{default:null,type:cc.Node},mVerifyLabel:{default:null,type:cc.Node},mHvAccountLabel:{default:null,type:cc.Node},mLoginHereLabel:{default:null,type:cc.Node}},onLoad:function(){this.localizeUI();for(var e=1;e<=5;e++)this["myVerifyBox"+e].node.on("editing-did-began",function(){this._this["myVerifyBox"+this.count].string=""}.bind({_this:this,count:e})),this["myVerifyBox"+e].node.on("text-changed",function(){this._this["myVerifyBox"+this.count].string.length>=1&&this._this["myVerifyBox"+(this.count+1)].focus()}.bind({_this:this,count:e}))},updateView:function(e,t,r,o){this.localizeUI(),"profileEmailVerify"==t?(this.isFromEditBasicInfo=!0,this.mHvAccountLabel.active=!1,this.mLoginHereLabel.active=!1):(this.mHvAccountLabel.active=!0,this.mLoginHereLabel.active=!0),this.mCallBack=e,this.verifyType=this.isFromEditBasicInfo?"emailVerify":t,this.mInitSource=r,this.mBackground.active=!0,this.myErrorLabel.active=!1,this.myCDLabel.active=!0,this.myNoCodeLabel.active=!1,this.myResendLabel.active=!1,this.node.opacity=255,this.mCountDownTimer=30,this.mIsRequestedTac=!1;for(var i=1;i<=6;i++)this["myVerifyBox"+i].getComponent(cc.EditBox).string="";if("phoneVerify"==this.verifyType){var c=localStorage.getItem("unverified_phoneNum");this.mDescLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"verificationSent")+" "+n.default.getPhoneCode()+" "+c.substring(0,4)+" XXXX",this.onRequestTacButtonDidPressed("","",!0)}if("emailVerify"==this.verifyType){var s=localStorage.getItem("unverified_email");this.mDescLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"verificationSent")+" "+s.substring(0,1)+"XXXX"+s.substring(s.indexOf("@")),this.onRequestTacButtonDidPressed("","",!0)}"forgotPasswordVerify"==this.verifyType&&(this.mDescLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,o),this.myCDLabel.active=!0,this.myNoCodeLabel.active=!1,this.myResendLabel.active=!1,this.mIsRequestedTac=!0,this.myResendLabel.getComponent(cc.Button).interactable=!1);var l=this.mBackground.getChildByName("verification_bg");l.setScale(0),cc.tween(l).to(1/3,{scale:1}).to(1/12,{scale:.95}).to(1/12,{scale:1}).start()},setForgetPasswordResponse:function(e){this.mForgetPasswordResponse=e},setUsername:function(e){this.mForgotUsername=e},init:function(e,t,n,a){this.node.x=e,this.node.y=t,this.node.width=n,this.node.height=a,this.mBackground.width=n,this.mBackground.height=a},setCallBack:function(e,t){void 0===t&&(t="LOBBY"),this.mCallBack=e,this.isFrom=t},onTabbarButtonDidPressed:function(e,t){a.default.playButtonClickSound(),this.mSelectedTabIndex=t;var n=new cc.Color(255,255,255),r=new cc.Color(253,238,193);this.mPhoneButton.getComponent(cc.Button).interactable=!0,this.mSMSButton.getComponent(cc.Button).interactable=!0,this.mWhatsappButton.getComponent(cc.Button).interactable=!0,this.mPhoneButton.getChildByName("effect").active=!1,this.mSMSButton.getChildByName("effect").active=!1,this.mWhatsappButton.getChildByName("effect").active=!1,this.mPhoneButton.getChildByName("label").color=r,this.mSMSButton.getChildByName("label").color=r,this.mWhatsappButton.getChildByName("label").color=r,0==t?(this.mPhoneButton.getComponent(cc.Button).interactable=!1,this.mPhoneButton.getChildByName("effect").active=!0,this.mPhoneButton.getChildByName("label").color=n):1==t?(this.mSMSButton.getComponent(cc.Button).interactable=!1,this.mSMSButton.getChildByName("effect").active=!0,this.mSMSButton.getChildByName("label").color=n):(this.mWhatsappButton.getComponent(cc.Button).interactable=!1,this.mWhatsappButton.getChildByName("effect").active=!0,this.mWhatsappButton.getChildByName("label").color=n)},myCloseButtonDidPressedForgotPassword:function(e,t,n,r,o,i,c){var s=this;n||a.default.playButtonClickSound();var l=this.mBackground.getChildByName("verification_bg");cc.tween(l).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){s.mCallBack&&s.mCallBack.onVerificationCloseButtonDidPressed(r,o,i,c,s.mForgotUsername)}).start()},myCloseButtonDidPressed:function(e,t,n,r,o,i){var c=this;n||a.default.playButtonClickSound();var s=this.mBackground.getChildByName("verification_bg");cc.tween(s).to(1/6,{scale:1.1}).to(1/6,{scale:0}).start(),cc.tween(this.node).delay(1/6).to(1/6,{opacity:0}).call(function(){c.mCallBack&&c.mCallBack.onVerificationCloseButtonDidPressed(r,o,i)}).start()},onRequestForgotPasswordTacButtonDidPressed:function(e,t,n){var o=this;return s(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n||a.default.playButtonClickSound(),a.default.showLoadingView("",o),e.prev=3,e.next=6,r.default.forgotPassword({username:o.mForgotUsername});case 6:(200==(t=e.sent).status||t.success)&&(o.myCDLabel.active=!0,o.myNoCodeLabel.active=!1,o.myResendLabel.active=!1,o.mIsRequestedTac=!0,o.myResendLabel.getComponent(cc.Button).interactable=!1,a.default.hideLoadingView(o)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),o.showLableError(o.myErrorLabel,e.t0.message),a.default.hideLoadingView(o);case 14:case"end":return e.stop()}},e,null,[[3,10]])}))()},onRequestTacButtonDidPressed:function(e,t,o){var c=this;return s(i().mark(function s(){var l;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if("forgotPasswordVerify"!=c.verifyType){i.next=3;break}return c.onRequestForgotPasswordTacButtonDidPressed(e,t,o),i.abrupt("return");case 3:return o||a.default.playButtonClickSound(),a.default.showLoadingView("",c),i.prev=6,i.next=9,r.default.sendOtp({identifier:"phoneVerify"==c.verifyType?n.default.getPhoneCode()+localStorage.getItem("unverified_phoneNum"):localStorage.getItem("unverified_email"),type:"phoneVerify"==c.verifyType?"sms":"email",purpose:"register"});case 9:l=i.sent,Object.keys(l).length>0&&(200==l.status?(c.myCDLabel.active=!0,c.myNoCodeLabel.active=!1,c.myResendLabel.active=!1,c.mIsRequestedTac=!0,c.myResendLabel.getComponent(cc.Button).interactable=!1,a.default.hideLoadingView(c)):c.showLableError(c.myErrorLabel,l.message)),i.next=17;break;case 13:i.prev=13,i.t0=i.catch(6),c.showLableError(c.myErrorLabel,i.t0.message),a.default.hideLoadingView(c);case 17:case"end":return i.stop()}},s,null,[[6,13]])}))()},onVerifyPhoneSubmitDidPressed:function(e,t,o){var c=this;return s(i().mark(function e(){var t,s,l,u,d,h;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o||a.default.playButtonClickSound(),t="",s=1;case 3:if(!(s<=6)){e.next=14;break}if(""==(l=c["myVerifyBox"+s].getComponent(cc.EditBox).string)){e.next=9;break}t+=l,e.next=11;break;case 9:return c.showLableError(c.myErrorLabel,a.default.getLocalizedString(c.i18nJson,"invalidOTP")),e.abrupt("return");case 11:s++,e.next=3;break;case 14:return a.default.showLoadingView("",c),e.prev=15,u={},"forgotPasswordVerify"==c.verifyType?(u.identifier=c.mForgetPasswordResponse.contact,u.type=c.mForgetPasswordResponse.type,u.code=t,u.testOnly=!0):(u.identifier="phoneVerify"==c.verifyType?n.default.getPhoneCode()+localStorage.getItem("unverified_phoneNum"):localStorage.getItem("unverified_email"),u.type="phoneVerify"==c.verifyType?"sms":"email",u.code=t,u.testOnly=!0),e.next=20,r.default.verifyOtp(u);case 20:if(200!=e.sent.status){e.next=50;break}if(!c.isFromEditBasicInfo){e.next=26;break}return c.myCloseButtonDidPressed("","",!0,"editBasicInfo",null,t),a.default.hideLoadingView(c),e.abrupt("return");case 26:if("ForgotPassword"!=c.mInitSource){e.next=33;break}return localStorage.setItem("reset_password_otp",t),c.myCloseButtonDidPressedForgotPassword("","",!0,"resetPassword",null,t,c.mForgetPasswordResponse.type),a.default.hideLoadingView(c),e.abrupt("return");case 33:if("PersonalCenter"!=c.mInitSource){e.next=38;break}return localStorage.setItem("verify_personal_otp",t),c.myCloseButtonDidPressed("","",!0,"personalCenter",null,t),a.default.hideLoadingView(c),e.abrupt("return");case 38:if(d=JSON.parse(localStorage.getItem("from_index")),h=d.settings.verification,"phoneVerify"!=c.verifyType||!h.emailVerification.enabled||"onRegister"!=h.emailVerification.required){e.next=47;break}return localStorage.setItem("unverified_phoneotp",t),c.myCloseButtonDidPressed("","",!0,"emailVerify"),a.default.hideLoadingView(c),e.abrupt("return");case 47:c.callRegisterApi(localStorage.getItem("unverified_username"),localStorage.getItem("unverified_fullName"),n.default.getPhoneCode()+localStorage.getItem("unverified_phoneNum"),localStorage.getItem("unverified_password"),localStorage.getItem("unverified_referal"),localStorage.getItem("unverified_email"),"phoneVerify"==c.verifyType?t:localStorage.getItem("unverified_phoneotp"),"phoneVerify"==c.verifyType?"":t);case 48:e.next=51;break;case 50:c.showLableError(c.myErrorLabel,error.message);case 51:e.next=57;break;case 53:e.prev=53,e.t0=e.catch(15),c.showLableError(c.myErrorLabel,e.t0.message),a.default.hideLoadingView(c);case 57:case"end":return e.stop()}},e,null,[[15,53]])}))()},callRegisterApi:function(e,t,n,o,c,l,u,d){var h=this;return s(i().mark(function s(){var m;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,r.default.register({fullName:t,username:e,email:l,password:o,phone:n,referralCode:c,phoneOtp:u,emailOtp:d});case 3:201==(m=i.sent).status?(localStorage.setItem("verified_username",e),localStorage.setItem("verified_password",o),localStorage.setItem("token",m.token),h.myCloseButtonDidPressed("","",!0,"lobby")):h.showLableError(h.myErrorLabel,m.message),a.default.hideLoadingView(h),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),400==i.t0.status?h.myCloseButtonDidPressed("","",!0,"registerPage",i.t0.message):h.showLableError(h.myErrorLabel,i.t0.message),a.default.hideLoadingView(h);case 12:case"end":return i.stop()}},s,null,[[0,8]])}))()},showLableError:function(e,t){this.myErrorLabel.active=!1,e&&(e.getComponent(cc.Label).string=t,e.active=!0,cc.tween(e).to(1/12,{scale:1.1}).to(1/12,{scale:1}).start())},update:function(e){this.mIsRequestedTac&&(this.mCountDownTimer-=e,this.myCDLabel.getComponent(cc.Label).string=parseInt(this.mCountDownTimer)+" Secs",this.mCountDownTimer<=1&&(this.myCDLabel.active=!1,this.myNoCodeLabel.active=!0,this.myResendLabel.active=!0,this.mCountDownTimer=30,this.mIsRequestedTac=!1,this.myResendLabel.getComponent(cc.Button).interactable=!0))},localizeUI:function(){this.mTitleLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"title"),this.mNoCodeLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"nocode"),this.mResendLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"resend"),this.mVerifyLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"verify"),this.mHvAccountLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"hvAccount"),this.mLoginHereLabel.getComponent(cc.Label).string=a.default.getLocalizedString(this.i18nJson,"loginhere")}}),cc._RF.pop()},{"../Services/AuthServices":"AuthServices",SharedData:"SharedData",SharedFunction:"SharedFunction"}],WalletService:[function(e,t,n){"use strict";cc._RF.push(t,"f4fe2hRp0lMBp0ehscfy9KY","WalletService");var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(c){o=[6,c],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.WalletService=void 0;var o=e("./NetworkService"),i=function(){function e(){}return e.getWalletLedger=function(e,t){var n,i,c;return a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),!t.currency)throw new Error("Currency parameter is required");return(a={}).currency=t.currency,void 0!==t.walletType&&null!==t.walletType&&(a.walletType=t.walletType),void 0!==t.page&&null!==t.page&&(a.page=t.page),void 0!==t.limit&&null!==t.limit&&(a.limit=t.limit),void 0!==t.startDate&&null!==t.startDate&&(a.startDate=t.startDate),void 0!==t.endDate&&null!==t.endDate&&(a.endDate=t.endDate),[4,o.NetworkService.get(this.GET_WALLET_LEDGER_ENDPOINT,a,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(n=s.data)||void 0===n?void 0:n.data)||s.data,[2,{status:s.status,success:null===(i=s.data)||void 0===i?void 0:i.success,message:(null===(c=s.data)||void 0===c?void 0:c.message)||s.message,data:l,entries:null==l?void 0:l.entries,pagination:null==l?void 0:l.pagination}];case 2:throw u=r.sent(),console.error("WalletService.getWalletLedger error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch wallet ledger",error:u};case 3:return[2]}})})},e.getCompanyBanks=function(e){var t,n;return a(this,void 0,Promise,function(){var a,i;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.get(this.GET_COMPANY_BANKS_ENDPOINT,{},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return[2,{status:(a=r.sent()).status,success:null===(t=a.data)||void 0===t?void 0:t.success,data:null===(n=a.data)||void 0===n?void 0:n.data}];case 2:throw i=r.sent(),console.error("WalletService.getCompanyBanks error:",i),{status:i.status||500,data:i.data||null,message:i.message||"Failed to fetch company banks",error:i};case 3:return[2]}})})},e.deposit=function(e,t){var n,i,c;return a(this,void 0,Promise,function(){var a,s,l;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),(a=new FormData).append("amount",t.amount.toString()),a.append("companyBankId",t.companyBankId),a.append("proof",t.proof),[4,o.NetworkService.post(this.DEPOSIT_ENDPOINT,a,{headers:{Authorization:"Bearer "+e}})];case 1:return[2,{status:(s=r.sent()).status,success:null===(n=s.data)||void 0===n?void 0:n.success,message:null===(i=s.data)||void 0===i?void 0:i.message,data:null===(c=s.data)||void 0===c?void 0:c.data}];case 2:throw l=r.sent(),console.error("WalletService.deposit error:",l),{status:l.status||500,data:l.data||null,message:l.message||"Failed to submit deposit",error:l};case 3:return[2]}})})},e.withdraw=function(e,t){var n,i,c,s,l;return a(this,void 0,Promise,function(){var a,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.post(this.WITHDRAW_ENDPOINT,{amount:t.amount,playerBankAccountId:t.playerBankAccountId},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return[2,{status:(a=r.sent()).status,success:null===(n=a.data)||void 0===n?void 0:n.success,message:null===(i=a.data)||void 0===i?void 0:i.message,data:null===(c=a.data)||void 0===c?void 0:c.data,frozenBalance:null===(s=a.data)||void 0===s?void 0:s.frozenBalance,availableBalance:null===(l=a.data)||void 0===l?void 0:l.availableBalance}];case 2:throw u=r.sent(),console.error("WalletService.withdraw error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to submit withdrawal",error:u};case 3:return[2]}})})},e.getPaymentTransactions=function(e,t){var n,i,c;return void 0===t&&(t={}),a(this,void 0,Promise,function(){var a,s,l,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a={},void 0!==t.type&&null!==t.type&&(a.type=t.type),void 0!==t.status&&null!==t.status&&"all"!==t.status&&(a.status=t.status),void 0!==t.page&&null!==t.page&&(a.page=t.page),void 0!==t.limit&&null!==t.limit&&(a.limit=t.limit),void 0!==t.startDate&&null!==t.startDate&&(a.startDate=t.startDate),void 0!==t.endDate&&null!==t.endDate&&(a.endDate=t.endDate),[4,o.NetworkService.get(this.GET_PAYMENT_TRANSACTIONS_ENDPOINT,a,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return s=r.sent(),l=(null===(n=s.data)||void 0===n?void 0:n.data)||s.data,[2,{status:s.status,success:null===(i=s.data)||void 0===i?void 0:i.success,message:(null===(c=s.data)||void 0===c?void 0:c.message)||s.message,data:l,transactions:null==l?void 0:l.transactions,pagination:null==l?void 0:l.pagination}];case 2:throw u=r.sent(),console.error("WalletService.getPaymentTransactions error:",u),{status:u.status||500,data:u.data||null,message:u.message||"Failed to fetch payment transactions",error:u};case 3:return[2]}})})},e.getBankAccounts=function(e){var t,n;return a(this,void 0,Promise,function(){var a,i;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.get(this.BANK_ACCOUNTS_ENDPOINT,{},{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return[2,{status:(a=r.sent()).status,success:null===(t=a.data)||void 0===t?void 0:t.success,data:null===(n=a.data)||void 0===n?void 0:n.data}];case 2:throw i=r.sent(),console.error("WalletService.getBankAccounts error:",i),{status:i.status||500,data:i.data||null,message:i.message||"Failed to fetch bank accounts",error:i};case 3:return[2]}})})},e.createBankAccount=function(e,t){var n,i,c;return a(this,void 0,Promise,function(){var a,s;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.post(this.BANK_ACCOUNTS_ENDPOINT,t,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}})];case 1:return[2,{status:(a=r.sent()).status,success:null===(n=a.data)||void 0===n?void 0:n.success,message:null===(i=a.data)||void 0===i?void 0:i.message,data:null===(c=a.data)||void 0===c?void 0:c.data}];case 2:throw s=r.sent(),console.error("WalletService.createBankAccount error:",s),{status:s.status||500,data:s.data||null,message:s.message||"Failed to create bank account",error:s};case 3:return[2]}})})},e.deleteBankAccount=function(e,t){var n,i;return a(this,void 0,Promise,function(){var a,c;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.NetworkService.delete(this.BANK_ACCOUNTS_ENDPOINT+"/"+t,{headers:{Authorization:"Bearer "+e}})];case 1:return[2,{status:(a=r.sent()).status,success:null===(n=a.data)||void 0===n?void 0:n.success,message:null===(i=a.data)||void 0===i?void 0:i.message}];case 2:throw c=r.sent(),console.error("WalletService.deleteBankAccount error:",c),{status:c.status||500,data:c.data||null,message:c.message||"Failed to delete bank account",error:c};case 3:return[2]}})})},e.GET_WALLET_LEDGER_ENDPOINT="/api/public/v1/wallet-ledger",e.GET_COMPANY_BANKS_ENDPOINT="/api/public/v1/payments/company-banks",e.DEPOSIT_ENDPOINT="/api/public/v1/payments/deposit",e.WITHDRAW_ENDPOINT="/api/public/v1/payments/withdraw",e.BANK_ACCOUNTS_ENDPOINT="/api/public/v1/bank-accounts",e.GET_PAYMENT_TRANSACTIONS_ENDPOINT="/api/public/v1/payments/transactions",e}();n.WalletService=i,n.default=i,cc._RF.pop()},{"./NetworkService":"NetworkService"}]},{},["AlertView","MessageInfoView","Avatar","AvatarList","CalendarManager","SimpleBirthdayPicker","CustomerService","CustomerServiceItem","Deposit","ManageCard","DeveloperLogo","GameContainer","GameList","GameType","GameWebView","Language","LoadingView","Settings","Landing","AnnounceItem","Announcement","AnnouncementDetail","Banner","DrawerCsItem","GameGroup","Lobby","ForgotPassword","Login","ResetPassword","DDLSelect","EditBasicInfo","PersonalCenter","UnselectedTab","Rebate","Registration","AuthServices","GameService","NetworkService","TransactionService","TwoFAService","UserService","WalletService","Splash","LevelInfo","VIPLevel","Verification","SharedData","SharedFunction","CCGIF","GIFLoadInit","GIFParser","LZW"]);